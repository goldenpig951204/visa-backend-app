"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5472],{15472:function(e,s,n){var r=n(85893),t=n(67294),i=n(80562),a=n(73812),l=n(31538),o=n(29630),c=n(79072),d=n(49837),x=n(59742),m=n(61953),u=n(75084),h=n(91359),Z=n(1890),j=n(77745),p=n(95398),g=n(55343),f=n(67836),C=n(32631),y=n(94314),v=n(5464),S=n(21609),b=n(98966),w=n(74231),k=n(47533),P=n(87536),z=n(86501);let D=e=>{let{row:s,editDuration:n,deleteDuration:o}=e,[c,d]=(0,t.useState)(null),x=Boolean(c),m=e=>{e.stopPropagation(),d(e.currentTarget)},u=()=>{d(null)},h=()=>{n(s),u()},Z=()=>{o(s._id),u()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{size:"small",onClick:m,children:(0,r.jsx)(S.Z,{icon:"mdi:dots-vertical"})}),(0,r.jsxs)(a.Z,{keepMounted:!0,anchorEl:c,open:x,onClose:u,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{minWidth:"8rem"}},children:[(0,r.jsxs)(l.Z,{onClick:h,sx:{"& svg":{mr:2}},children:[(0,r.jsx)(S.Z,{icon:"mdi:pencil-outline",fontSize:20}),"Edit"]}),(0,r.jsxs)(l.Z,{onClick:Z,sx:{"& svg":{mr:2}},children:[(0,r.jsx)(S.Z,{icon:"mdi:delete-outline",fontSize:20}),"Delete"]})]})]})},I=()=>{let[e,s]=(0,t.useState)([]),[n,a]=(0,t.useState)(!1),[l,y]=(0,t.useState)(10),[I,W]=(0,t.useState)(!1),[_,E]=(0,t.useState)(!1),[N,T]=(0,t.useState)(0),B={name:""},R=w.Ry().shape({name:w.Z_().required("Name is required field.")}),{reset:q,control:A,handleSubmit:H,formState:{errors:L}}=(0,P.cI)({defaultValues:B,mode:"onChange",resolver:(0,k.X)(R)}),{reset:M,control:O,handleSubmit:Q,formState:{errors:X}}=(0,P.cI)({defaultValues:B,mode:"onChange",resolver:(0,k.X)(R)});(0,t.useEffect)(()=>{(async()=>{let{data:e}=await v.Z.get("crms/visa-durations");s(e)})()},[n,l]);let F=e=>{T(e._id),M({name:e.name}),E(!0)},G=e=>e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""),U=async e=>{let{name:s}=e,{data:r}=await v.Z.post("crms/visa-durations",{name:s,slug:G(s)});r.status?(q(B),W(!1),a(!n),z.ZP.success(r.msg)):z.ZP.error(r.msg)},$=async e=>{let{name:s}=e,{data:r}=await v.Z.put("crms/visa-durations/".concat(N),{name:s,slug:G(s)});r.status?(M(B),E(!1),a(!n),z.ZP.success(r.msg)):z.ZP.error(r.msg)},J=async e=>{let{data:s}=await v.Z.delete("crms/visa-durations/".concat(e));s.status?(a(!n),z.ZP.success(s.msg)):z.ZP.error(s.msg)};return(0,r.jsxs)(c.ZP,{container:!0,spacing:6,children:[(0,r.jsx)(c.ZP,{item:!0,md:12,sm:12,children:(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(x.Z,{title:(0,r.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(o.Z,{variant:"h5",children:"Duration Types"}),(0,r.jsx)(m.Z,{sx:{pl:0,pr:0,pt:0,pb:0,display:"flex",flex:1,flexWrap:"wrap",alignItems:"center",justifyContent:"flex-end"},children:(0,r.jsx)(m.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center"},children:(0,r.jsxs)(u.Z,{sx:{mb:2},onClick:()=>W(!0),variant:"contained",children:[(0,r.jsx)(S.Z,{icon:"mdi:plus"})," Add Duration"]})})})]})}),(0,r.jsx)(h.Z,{children:(0,r.jsx)(b._,{autoHeight:!0,getRowId:e=>e._id,rows:e,columns:[{flex:2,field:"duration",headerName:"Duration Name",renderCell(e){let{row:s}=e;return(0,r.jsx)(o.Z,{noWrap:!0,children:s.name})}},{flex:.5,field:"actions",headerName:"Actions",renderCell(e){let{row:s}=e;return(0,r.jsx)(D,{row:s,editDuration:F,deleteDuration:J})}}],pageSize:l,sx:{"& .MuiDataGrid-columnHeaders":{borderRadius:0}},onPageSizeChange:e=>y(e)})})]})}),(0,r.jsxs)(Z.Z,{fullWidth:!0,maxWidth:"sm",onClose:()=>W(!1),open:I,children:[(0,r.jsxs)(j.Z,{children:["New Duration Type",(0,r.jsx)(i.Z,{onClick:()=>W(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,r.jsx)(S.Z,{icon:"mdi:close"})})]}),(0,r.jsx)(p.Z,{sx:{p:6},children:(0,r.jsxs)("form",{onSubmit:H(U),style:{paddingTop:8},children:[(0,r.jsxs)(g.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(P.Qr,{name:"name",control:A,render(e){let{field:{value:s,onChange:n}}=e;return(0,r.jsx)(f.Z,{value:s,label:"Duration",onChange:n,error:Boolean(L.name)})}}),L.name&&(0,r.jsx)(C.Z,{sx:{color:"error.main"},children:L.name.message})]}),(0,r.jsxs)(m.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,r.jsx)(u.Z,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:(0,r.jsx)(S.Z,{icon:"mdi:content-save"}),sx:{mr:4},children:"Save"}),(0,r.jsx)(u.Z,{variant:"contained",color:"error",size:"large",startIcon:(0,r.jsx)(S.Z,{icon:"mdi:delete"}),onClick:()=>W(!1),children:"Cancel"})]})]})})]}),(0,r.jsxs)(Z.Z,{fullWidth:!0,maxWidth:"sm",onClose:()=>E(!1),open:_,children:[(0,r.jsxs)(j.Z,{children:["Edit Duration Type",(0,r.jsx)(i.Z,{onClick:()=>E(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,r.jsx)(S.Z,{icon:"mdi:close"})})]}),(0,r.jsx)(p.Z,{sx:{p:6},children:(0,r.jsxs)("form",{onSubmit:Q($),style:{paddingTop:8},children:[(0,r.jsxs)(g.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(P.Qr,{name:"name",control:O,render(e){let{field:{value:s,onChange:n}}=e;return(0,r.jsx)(f.Z,{value:s,label:"Duration",onChange:n,error:Boolean(X.name)})}}),X.name&&(0,r.jsx)(C.Z,{sx:{color:"error.main"},children:X.name.message})]}),(0,r.jsxs)(m.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,r.jsx)(u.Z,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:(0,r.jsx)(S.Z,{icon:"mdi:content-save"}),sx:{mr:4},children:"Update"}),(0,r.jsx)(u.Z,{variant:"contained",color:"error",size:"large",startIcon:(0,r.jsx)(S.Z,{icon:"mdi:delete"}),onClick:()=>setShowEditType(!1),children:"Cancel"})]})]})})]})]})};I.getLayout=e=>(0,r.jsx)(y.Z,{children:e}),s.Z=I}}]);