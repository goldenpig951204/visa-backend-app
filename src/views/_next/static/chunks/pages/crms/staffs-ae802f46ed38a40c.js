(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{98250:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/crms/staffs",function(){return t(63128)}])},63128:function(e,n,t){"use strict";t.r(n);var r=t(85893),s=t(67294),a=t(80562),o=t(73812),l=t(31538),i=t(29630),u=t(21448),c=t(79072),d=t(49837),h=t(59742),m=t(61953),f=t(67836),p=t(75084),g=t(91359),v=t(1890),x=t(77745),k=t(95398),j=t(55343),C=t(32631),Z=t(40818),S=t(21609),w=t(74231),b=t(47533),y=t(87536),N=t(76627),O=t.n(N),I=t(94314),M=t(5464),P=t(86501);let D=e=>{let{id:n,status:t,permitStaff:i,editStaff:u,deleteStaff:c}=e,[d,h]=(0,s.useState)(null),m=Boolean(d),f=e=>{h(e.currentTarget)},p=()=>{h(null)},g=()=>{i(n,t),p()},v=()=>{u(n),p()},x=()=>{c(n),p()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.Z,{size:"small",onClick:f,children:(0,r.jsx)(S.Z,{icon:"mdi:dots-vertical"})}),(0,r.jsxs)(o.Z,{keepMounted:!0,anchorEl:d,open:m,onClose:p,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{minWidth:"8rem"}},children:[t?(0,r.jsxs)(l.Z,{onClick:g,sx:{"& svg":{mr:2}},children:[(0,r.jsx)(S.Z,{icon:"mdi:account-lock",fontSize:20}),"Pause"]}):(0,r.jsxs)(l.Z,{onClick:g,sx:{"& svg":{mr:2}},children:[(0,r.jsx)(S.Z,{icon:"mdi:account-lock-open",fontSize:20}),"Allow"]}),(0,r.jsxs)(l.Z,{onClick:v,sx:{"& svg":{mr:2}},children:[(0,r.jsx)(S.Z,{icon:"mdi:pencil-outline",fontSize:20}),"Edit"]}),(0,r.jsxs)(l.Z,{onClick:x,sx:{"& svg":{mr:2}},children:[(0,r.jsx)(S.Z,{icon:"mdi:delete-outline",fontSize:20}),"Delete"]})]})]})},E=()=>{let[e,n]=(0,s.useState)(!0),[t,o]=(0,s.useState)(""),[l,N]=(0,s.useState)(10),[I,E]=(0,s.useState)([]),[V,W]=(0,s.useState)(!1),[_,L]=(0,s.useState)(!1),[B,q]=(0,s.useState)(0),F={firstName:"",lastName:"",email:"",phone:"",password:"123456789"},z=w.Ry().shape({firstName:w.Z_().required(),lastName:w.Z_().required(),email:w.Z_().email().required(),phone:w.Z_().min(10,"Phone number must be 10 digits").required(),password:w.Z_().required()}),R=w.Ry().shape({firstName:w.Z_().required(),lastName:w.Z_().required(),email:w.Z_().email().required(),phone:w.Z_().min(10,"Phone number must be 10 digits").required()});(0,s.useEffect)(()=>{let e=async()=>{let{data:e}=await M.Z.get("crms/staffs",{params:{search:""}});E(e)};e()},[e,t,l]);let{reset:T,control:A,handleSubmit:Q,formState:{errors:X}}=(0,y.cI)({defaultValues:F,mode:"onChange",resolver:(0,b.X)(z)}),{reset:U,control:Y,handleSubmit:H,formState:{errors:G}}=(0,y.cI)({defaultValues:F,mode:"onChange",resolver:(0,b.X)(R)}),J=()=>{W(!0)},K=async t=>{let{data:r}=await M.Z.post("crms/staffs",{...t,role:"staff"});r.status?(T(F),W(!1),n(!e),P.ZP.success(r.msg)):P.ZP.error(r.msg)},$=async e=>{q(e);let{data:n}=await M.Z.get("crms/staffs/".concat(e));U({firstName:n.firstName,lastName:n.lastName,email:n.email,phone:n.phone}),L(!0)},ee=async(t,r)=>{let{data:s}=await M.Z.put("/crms/staffs/".concat(t),{status:!r});s.status?(P.ZP.success(s.msg),n(!e)):P.ZP.error(s.msg)},en=async t=>{let{data:r}=await M.Z.put("crms/staffs/".concat(B),t);r.status?(U(F),L(!1),n(!e),P.ZP.success(r.msg)):P.ZP.error(r.msg)},et=async()=>{};return(0,r.jsxs)(c.ZP,{container:!0,spacing:6,children:[(0,r.jsx)(c.ZP,{item:!0,xs:12,children:(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(h.Z,{title:(0,r.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(i.Z,{variant:"h5",children:"Staff Management"}),(0,r.jsx)(m.Z,{sx:{pl:0,pr:0,pt:0,pb:0,display:"flex",flex:1,flexWrap:"wrap",alignItems:"center",justifyContent:"flex-end"},children:(0,r.jsxs)(m.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center"},children:[(0,r.jsx)(f.Z,{size:"small",value:t,sx:{mr:6,mb:2},placeholder:"Search staff...",onChange:e=>o(e.target.value)}),(0,r.jsxs)(p.Z,{sx:{mb:2},onClick:J,variant:"contained",children:[(0,r.jsx)(S.Z,{icon:"mdi:plus"})," Add staff"]})]})})]})}),(0,r.jsx)(g.Z,{children:(0,r.jsx)(Z._,{autoHeight:!0,getRowId:e=>e._id,rows:I,columns:[{flex:.2,minWidth:230,field:"firstName",headerName:"First Name",renderCell(e){let{row:n}=e;return(0,r.jsx)(i.Z,{noWrap:!0,children:n.firstName})}},{flex:.2,minWidth:250,field:"lastName",headerName:"Last Name",renderCell(e){let{row:n}=e;return(0,r.jsx)(i.Z,{noWrap:!0,children:n.lastName})}},{flex:.3,minWidth:250,field:"email",headerName:"Email",renderCell(e){let{row:n}=e;return(0,r.jsx)(i.Z,{noWrap:!0,children:n.email})}},{flex:.1,minWidth:250,field:"phone",headerName:"Phone",renderCell(e){let{row:n}=e;return(0,r.jsx)(i.Z,{noWrap:!0,children:n.phone})}},{flex:.1,minWidth:100,field:"status",headerName:"Status",renderCell(e){let{row:n}=e;return(0,r.jsx)(u.Z,{skin:"light",size:"small",variant:"filled",label:n.status?"Approved":"Refused",color:n.status?"success":"warning",sx:{textTransform:"capitalize","& .MuiChip-label":{lineHeight:"18px"}}})}},{flex:.1,sortable:!1,field:"actions",headerName:"Actions",renderCell(e){let{row:n}=e;return(0,r.jsx)(D,{id:n._id,status:n.status,permitStaff:ee,editStaff:$,deleteStaff:et})}}],pageSize:l,sx:{"& .MuiDataGrid-columnHeaders":{borderRadius:0}},onPageSizeChange:e=>N(e)})})]})}),(0,r.jsxs)(v.Z,{fullWidth:!0,maxWidth:"sm",onClose:()=>W(!1),open:V,children:[(0,r.jsxs)(x.Z,{children:["New Staff",(0,r.jsx)(a.Z,{onClick:()=>W(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,r.jsx)(S.Z,{icon:"mdi:close"})})]}),(0,r.jsx)(k.Z,{sx:{p:6},children:(0,r.jsxs)("form",{onSubmit:Q(K),style:{paddingTop:8},children:[(0,r.jsxs)(j.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(y.Qr,{name:"firstName",control:A,rules:{required:!0},render(e){let{field:{value:n,onChange:t}}=e;return(0,r.jsx)(f.Z,{value:n,label:"First Name",onChange:t,placeholder:"Denys",error:Boolean(X.firstName)})}}),X.firstName&&(0,r.jsx)(C.Z,{sx:{color:"error.main"},children:X.firstName.message})]}),(0,r.jsxs)(j.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(y.Qr,{name:"lastName",control:A,rules:{required:!0},render(e){let{field:{value:n,onChange:t}}=e;return(0,r.jsx)(f.Z,{value:n,label:"Last Name",onChange:t,placeholder:"Lavrynenko",error:Boolean(X.lastName)})}}),X.lastName&&(0,r.jsx)(C.Z,{sx:{color:"error.main"},children:X.lastName.message})]}),(0,r.jsxs)(j.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(y.Qr,{name:"email",control:A,rules:{required:!0},render(e){let{field:{value:n,onChange:t}}=e;return(0,r.jsx)(f.Z,{type:"email",value:n,label:"Email",onChange:t,placeholder:"denys.lavrynenko@gmail.com",error:Boolean(X.email)})}}),X.email&&(0,r.jsx)(C.Z,{sx:{color:"error.main"},children:X.email.message})]}),(0,r.jsxs)(j.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(y.Qr,{name:"phone",control:A,rules:{required:!0},render(e){let{field:{value:n,onChange:t}}=e;return(0,r.jsx)(O(),{mask:"(+44) 999 999 9999",maskChar:"_",value:n,onChange:t,children:()=>(0,r.jsx)(f.Z,{type:"string",label:"Phone",placeholder:"8316235660",error:Boolean(X.phone)})})}}),X.phone&&(0,r.jsx)(C.Z,{sx:{color:"error.main"},children:X.phone.message})]}),(0,r.jsxs)(j.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(y.Qr,{name:"password",control:A,rules:{required:!0},render(e){let{field:{value:n,onChange:t}}=e;return(0,r.jsx)(f.Z,{type:"text",value:n,label:"Password",placeholder:"a1A!s2S@d3D#",readOnly:!0,error:Boolean(X.password)})}}),X.password&&(0,r.jsx)(C.Z,{sx:{color:"error.main"},children:X.password.message})]}),(0,r.jsxs)(m.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,r.jsx)(p.Z,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:(0,r.jsx)(S.Z,{icon:"mdi:content-save"}),sx:{mr:4},children:"Save"}),(0,r.jsx)(p.Z,{variant:"contained",color:"error",size:"large",startIcon:(0,r.jsx)(S.Z,{icon:"mdi:delete"}),onClick:()=>W(!1),children:"Cancel"})]})]})})]}),(0,r.jsxs)(v.Z,{fullWidth:!0,maxWidth:"sm",onClose:()=>L(!1),open:_,children:[(0,r.jsxs)(x.Z,{children:["Edit Staff",(0,r.jsx)(a.Z,{onClick:()=>L(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,r.jsx)(S.Z,{icon:"mdi:close"})})]}),(0,r.jsx)(k.Z,{sx:{p:6},children:(0,r.jsxs)("form",{onSubmit:H(en),style:{paddingTop:8},children:[(0,r.jsxs)(j.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(y.Qr,{name:"firstName",control:Y,rules:{required:!0},render(e){let{field:{value:n,onChange:t}}=e;return(0,r.jsx)(f.Z,{value:n,label:"First Name",onChange:t,placeholder:"Denys",error:Boolean(G.firstName)})}}),G.firstName&&(0,r.jsx)(C.Z,{sx:{color:"error.main"},children:G.firstName.message})]}),(0,r.jsxs)(j.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(y.Qr,{name:"lastName",control:Y,rules:{required:!0},render(e){let{field:{value:n,onChange:t}}=e;return(0,r.jsx)(f.Z,{value:n,label:"Last Name",onChange:t,placeholder:"Lavrynenko",error:Boolean(G.lastName)})}}),G.lastName&&(0,r.jsx)(C.Z,{sx:{color:"error.main"},children:G.lastName.message})]}),(0,r.jsxs)(j.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(y.Qr,{name:"email",control:Y,rules:{required:!0},render(e){let{field:{value:n,onChange:t}}=e;return(0,r.jsx)(f.Z,{type:"email",value:n,label:"Email",onChange:t,placeholder:"denys.lavrynenko@gmail.com",error:Boolean(G.email)})}}),G.email&&(0,r.jsx)(C.Z,{sx:{color:"error.main"},children:G.email.message})]}),(0,r.jsxs)(j.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(y.Qr,{name:"phone",control:Y,rules:{required:!0},render(e){let{field:{value:n,onChange:t}}=e;return(0,r.jsx)(O(),{mask:"(+44) 999 999 9999",maskChar:"_",value:n,onChange:t,children:()=>(0,r.jsx)(f.Z,{type:"string",label:"Phone",placeholder:"8316235660",error:Boolean(G.phone)})})}}),G.phone&&(0,r.jsx)(C.Z,{sx:{color:"error.main"},children:G.phone.message})]}),(0,r.jsxs)(m.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,r.jsx)(p.Z,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:(0,r.jsx)(S.Z,{icon:"mdi:content-save"}),sx:{mr:4},children:"Update"}),(0,r.jsx)(p.Z,{variant:"contained",color:"error",size:"large",startIcon:(0,r.jsx)(S.Z,{icon:"mdi:delete"}),onClick:()=>L(!1),children:"Cancel"})]})]})})]})]})};E.getLayout=e=>(0,r.jsx)(I.Z,{children:e}),n.default=E},76627:function(e,n,t){e.exports=t(53462)},53462:function(e,n,t){"use strict";var r,s=(r=t(67294))&&"object"==typeof r&&"default"in r?r.default:r,a=t(73935);function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function l(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var i=function(e,n,t,r,s,a,o,l){if(!e){var i;if(void 0===n)i=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[t,r,s,a,o,l],c=0;(i=Error(n.replace(/%s/g,function(){return u[c++]}))).name="Invariant Violation"}throw i.framesToPop=1,i}};function u(e,n,t){if("selectionStart"in e&&"selectionEnd"in e)e.selectionStart=n,e.selectionEnd=t;else{var r=e.createTextRange();r.collapse(!0),r.moveStart("character",n),r.moveEnd("character",t-n),r.select()}}var c={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"};function d(e,n,t){var r="",s="",a=null,o=[];if(void 0===n&&(n="_"),null==t&&(t=c),!e||"string"!=typeof e)return{maskChar:n,formatChars:t,mask:null,prefix:null,lastEditablePosition:null,permanents:[]};var l=!1;return e.split("").forEach(function(e){l=!l&&"\\"===e||(l||!t[e]?(o.push(r.length),r.length===o.length-1&&(s+=e)):a=r.length+1,r+=e,!1)}),{maskChar:n,formatChars:t,prefix:s,mask:r,lastEditablePosition:a,permanents:o}}function h(e,n){return -1!==e.permanents.indexOf(n)}function m(e,n,t){var r=e.mask,s=e.formatChars;return!!t&&(h(e,n)?r[n]===t:RegExp(s[r[n]]).test(t))}function f(e,n){return n.split("").every(function(n,t){return h(e,t)||!m(e,t,n)})}function p(e,n){var t=e.maskChar,r=e.prefix;if(!t){for(;n.length>r.length&&h(e,n.length-1);)n=n.slice(0,n.length-1);return n.length}for(var s=r.length,a=n.length;a>=r.length;a--){var o=n[a];if(!h(e,a)&&m(e,a,o)){s=a+1;break}}return s}function g(e,n){return p(e,n)===e.mask.length}function v(e,n){var t=e.maskChar,r=e.mask,s=e.prefix;if(!t){for((n=x(e,"",n,0)).length<s.length&&(n=s);n.length<r.length&&h(e,n.length);)n+=r[n.length];return n}if(n)return x(e,v(e,""),n,0);for(var a=0;a<r.length;a++)h(e,a)?n+=r[a]:n+=t;return n}function x(e,n,t,r){var s=e.mask,a=e.maskChar,o=e.prefix,l=t.split(""),i=g(e,n);return!a&&r>n.length&&(n+=s.slice(n.length,r)),l.every(function(t){for(var l,u;h(e,u=r)&&t!==s[u];){if(r>=n.length&&(n+=s[r]),l=r,a&&h(e,l)&&t===a)return!0;if(++r>=s.length)return!1}return!m(e,r,t)&&t!==a||(r<n.length?n=a||i||r<o.length?n.slice(0,r)+t+n.slice(r+1):(n=n.slice(0,r)+t+n.slice(r),v(e,n)):a||(n+=t),++r<s.length)}),n}function k(e,n){for(var t=e.mask,r=n;r<t.length;++r)if(!h(e,r))return r;return null}function j(e){return e||0===e?e+"":""}function C(e){return"function"==typeof e}function Z(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame}function S(e){return(Z()?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame:function(){return setTimeout(e,1e3/60)})(e)}function w(e){(Z()||clearTimeout)(e)}var b=function(e){function n(n){var t=e.call(this,n)||this;t.focused=!1,t.mounted=!1,t.previousSelection=null,t.selectionDeferId=null,t.saveSelectionLoopDeferId=null,t.saveSelectionLoop=function(){t.previousSelection=t.getSelection(),t.saveSelectionLoopDeferId=S(t.saveSelectionLoop)},t.runSaveSelectionLoop=function(){null===t.saveSelectionLoopDeferId&&t.saveSelectionLoop()},t.stopSaveSelectionLoop=function(){null!==t.saveSelectionLoopDeferId&&(w(t.saveSelectionLoopDeferId),t.saveSelectionLoopDeferId=null,t.previousSelection=null)},t.getInputDOMNode=function(){if(!t.mounted)return null;var e=a.findDOMNode(l(l(t))),n="undefined"!=typeof window&&e instanceof window.Element;if(e&&!n)return null;if("INPUT"!==e.nodeName&&(e=e.querySelector("input")),!e)throw Error("react-input-mask: inputComponent doesn't contain input node");return e},t.getInputValue=function(){var e=t.getInputDOMNode();return e?e.value:null},t.setInputValue=function(e){var n=t.getInputDOMNode();n&&(t.value=e,n.value=e)},t.setCursorToEnd=function(){var e=p(t.maskOptions,t.value),n=k(t.maskOptions,e);null!==n&&t.setCursorPosition(n)},t.setSelection=function(e,n,r){void 0===r&&(r={});var s=t.getInputDOMNode(),a=t.isFocused();s&&a&&(r.deferred||u(s,e,n),null!==t.selectionDeferId&&w(t.selectionDeferId),t.selectionDeferId=S(function(){t.selectionDeferId=null,u(s,e,n)}),t.previousSelection={start:e,end:n,length:Math.abs(n-e)})},t.getSelection=function(){return function(e){var n=0,t=0;if("selectionStart"in e&&"selectionEnd"in e)n=e.selectionStart,t=e.selectionEnd;else{var r=document.selection.createRange();r.parentElement()===e&&(n=-r.moveStart("character",-e.value.length),t=-r.moveEnd("character",-e.value.length))}return{start:n,end:t,length:t-n}}(t.getInputDOMNode())},t.getCursorPosition=function(){return t.getSelection().start},t.setCursorPosition=function(e){t.setSelection(e,e)},t.isFocused=function(){return t.focused},t.getBeforeMaskedValueChangeConfig=function(){var e=t.maskOptions,n=e.mask,r=e.maskChar,s=e.permanents,a=e.formatChars;return{mask:n,maskChar:r,permanents:s,alwaysShowMask:!!t.props.alwaysShowMask,formatChars:a}},t.isInputAutofilled=function(e,n,r,s){var a=t.getInputDOMNode();try{if(a.matches(":-webkit-autofill"))return!0}catch(o){}return!t.focused||s.end<r.length&&n.end===e.length},t.onChange=function(e){var n,r,s,a,o,i,u,c,d,f,p,g,j,Z,S,w,b,y,N,O=l(l(t)).beforePasteState,I=l(l(t)).previousSelection,M=t.props.beforeMaskedValueChange,P=t.getInputValue(),D=t.value,E=t.getSelection();t.isInputAutofilled(P,E,D,I)&&(D=v(t.maskOptions,""),I={start:0,end:0,length:0}),O&&(I=O.selection,D=O.value,E={start:I.start+P.length,end:I.start+P.length,length:0},P=D.slice(0,I.start)+P+D.slice(I.end),t.beforePasteState=null);var V=(n=t.maskOptions,r=P,s=E,a=D,o=I,g=n.mask,j=n.prefix,Z=n.lastEditablePosition,S=r,w="",b=0,y=0,N=Math.min(o.start,s.start),s.end>o.start?(i=w=S.slice(o.start,s.end),u=N,c=n.mask,d=n.maskChar,f=i.split(""),p=u,f.every(function(e){for(var t;h(n,t=u)&&e!==c[t];)if(++u>=c.length)return!1;return(m(n,u,e)||e===d)&&u++,u<c.length}),y=(b=u-p)?o.length:0):S.length<a.length&&(y=a.length-S.length),S=a,y&&(1!==y||o.length||(N=o.start===s.start?k(n,s.start):function(e,n){for(var t=n;0<=t;--t)if(!h(e,t))return t;return null}(n,s.start)),S=function(e,n,t,r){var s=t+r,a=e.maskChar,o=e.mask,l=e.prefix,i=n.split("");if(a)return i.map(function(n,r){return r<t||s<=r?n:h(e,r)?o[r]:a}).join("");for(var u=s;u<i.length;u++)h(e,u)&&(i[u]="");return t=Math.max(l.length,t),i.splice(t,s-t),v(e,n=i.join(""))}(n,S,N,y)),S=x(n,S,w,N),(N+=b)>=g.length?N=g.length:N<j.length&&!b?N=j.length:N>=j.length&&N<Z&&b&&(N=k(n,N)),w||(w=null),{value:S=v(n,S),enteredString:w,selection:{start:N,end:N}}),W=V.enteredString,_=V.selection,L=V.value;if(C(M)){var B=M({value:L,selection:_},{value:D,selection:I},W,t.getBeforeMaskedValueChangeConfig());L=B.value,_=B.selection}t.setInputValue(L),C(t.props.onChange)&&t.props.onChange(e),t.isWindowsPhoneBrowser?t.setSelection(_.start,_.end,{deferred:!0}):t.setSelection(_.start,_.end)},t.onFocus=function(e){var n=t.props.beforeMaskedValueChange,r=t.maskOptions,s=r.mask,a=r.prefix;if(t.focused=!0,t.mounted=!0,s){if(t.value)p(t.maskOptions,t.value)<t.maskOptions.mask.length&&t.setCursorToEnd();else{var o=v(t.maskOptions,a),l=v(t.maskOptions,o),i=p(t.maskOptions,l),u=k(t.maskOptions,i),c={start:u,end:u};if(C(n)){var d=n({value:l,selection:c},{value:t.value,selection:null},null,t.getBeforeMaskedValueChangeConfig());l=d.value,c=d.selection}var h=l!==t.getInputValue();h&&t.setInputValue(l),h&&C(t.props.onChange)&&t.props.onChange(e),t.setSelection(c.start,c.end)}t.runSaveSelectionLoop()}C(t.props.onFocus)&&t.props.onFocus(e)},t.onBlur=function(e){var n=t.props.beforeMaskedValueChange,r=t.maskOptions.mask;if(t.stopSaveSelectionLoop(),t.focused=!1,r&&!t.props.alwaysShowMask&&f(t.maskOptions,t.value)){var s="";C(n)&&(s=n({value:s,selection:null},{value:t.value,selection:t.previousSelection},null,t.getBeforeMaskedValueChangeConfig()).value);var a=s!==t.getInputValue();a&&t.setInputValue(s),a&&C(t.props.onChange)&&t.props.onChange(e)}C(t.props.onBlur)&&t.props.onBlur(e)},t.onMouseDown=function(e){if(!t.focused&&document.addEventListener){t.mouseDownX=e.clientX,t.mouseDownY=e.clientY,t.mouseDownTime=(new Date).getTime();var n=function e(n){if(document.removeEventListener("mouseup",e),t.focused){var r=Math.max(Math.abs(n.clientX-t.mouseDownX),Math.abs(n.clientY-t.mouseDownY)),s=(new Date).getTime()-t.mouseDownTime;(r<=10&&s<=200||r<=5&&s<=300)&&t.setCursorToEnd()}};document.addEventListener("mouseup",n)}C(t.props.onMouseDown)&&t.props.onMouseDown(e)},t.onPaste=function(e){C(t.props.onPaste)&&t.props.onPaste(e),e.defaultPrevented||(t.beforePasteState={value:t.getInputValue(),selection:t.getSelection()},t.setInputValue(""))},t.handleRef=function(e){null==t.props.children&&C(t.props.inputRef)&&t.props.inputRef(e)};var r=n.mask,s=n.maskChar,o=n.formatChars,i=n.alwaysShowMask,c=n.beforeMaskedValueChange,g=n.defaultValue,Z=n.value;t.maskOptions=d(r,s,o),null==g&&(g=""),null==Z&&(Z=g);var b=j(Z);if(t.maskOptions.mask&&(i||b)&&(b=v(t.maskOptions,b),C(c))){var y=n.value;null==n.value&&(y=g),b=c({value:b,selection:null},{value:y=j(y),selection:null},null,t.getBeforeMaskedValueChangeConfig()).value}return t.value=b,t}(t=n).prototype=Object.create(e.prototype),function(e,n){for(var t=Object.getOwnPropertyNames(n),r=0;r<t.length;r++){var s=t[r],a=Object.getOwnPropertyDescriptor(n,s);a&&a.configurable&&void 0===e[s]&&Object.defineProperty(e,s,a)}}(t.prototype.constructor=t,e);var t,r=n.prototype;return r.componentDidMount=function(){var e;this.mounted=!0,this.getInputDOMNode()&&(this.isWindowsPhoneBrowser=(e=navigator.userAgent,/windows/i.test(e)&&/phone/i.test(e)),this.maskOptions.mask&&this.getInputValue()!==this.value&&this.setInputValue(this.value))},r.componentDidUpdate=function(){var e=this.previousSelection,n=this.props,t=n.beforeMaskedValueChange,r=n.alwaysShowMask,s=n.mask,a=n.maskChar,o=n.formatChars,l=this.maskOptions,i=r||this.isFocused(),u=null!=this.props.value,c=u?j(this.props.value):this.value,h=e?e.start:null;if(this.maskOptions=d(s,a,o),this.maskOptions.mask){!l.mask&&this.isFocused()&&this.runSaveSelectionLoop();var m=this.maskOptions.mask&&this.maskOptions.mask!==l.mask;if(l.mask||u||(c=this.getInputValue()),(m||this.maskOptions.mask&&(c||i))&&(c=v(this.maskOptions,c)),m){var x=p(this.maskOptions,c);(null===h||x<h)&&(h=g(this.maskOptions,c)?x:k(this.maskOptions,x))}!this.maskOptions.mask||!f(this.maskOptions,c)||i||u&&this.props.value||(c="");var Z={start:h,end:h};if(C(t)){var S=t({value:c,selection:Z},{value:this.value,selection:this.previousSelection},null,this.getBeforeMaskedValueChangeConfig());c=S.value,Z=S.selection}this.value=c;var w=this.getInputValue()!==this.value;w?(this.setInputValue(this.value),this.forceUpdate()):m&&this.forceUpdate();var b=!1;null!=Z.start&&null!=Z.end&&(b=!e||e.start!==Z.start||e.end!==Z.end),(b||w)&&this.setSelection(Z.start,Z.end)}else l.mask&&(this.stopSaveSelectionLoop(),this.forceUpdate())},r.componentWillUnmount=function(){this.mounted=!1,null!==this.selectionDeferId&&w(this.selectionDeferId),this.stopSaveSelectionLoop()},r.render=function(){var e,n=this.props,t=(n.mask,n.alwaysShowMask,n.maskChar,n.formatChars,n.inputRef,n.beforeMaskedValueChange,n.children),r=function(e,n){if(null==e)return{};var t,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)0<=n.indexOf(t=a[r])||(s[t]=e[t]);return s}(n,["mask","alwaysShowMask","maskChar","formatChars","inputRef","beforeMaskedValueChange","children"]);if(t){C(t)||i(!1);var a=["onChange","onPaste","onMouseDown","onFocus","onBlur","value","disabled","readOnly"],l=o({},r);a.forEach(function(e){return delete l[e]}),e=t(l),a.filter(function(n){return null!=e.props[n]&&e.props[n]!==r[n]}).length&&i(!1)}else e=s.createElement("input",o({ref:this.handleRef},r));var u={onFocus:this.onFocus,onBlur:this.onBlur};return this.maskOptions.mask&&(r.disabled||r.readOnly||(u.onChange=this.onChange,u.onPaste=this.onPaste,u.onMouseDown=this.onMouseDown),null!=r.value&&(u.value=this.value)),e=s.cloneElement(e,u)},n}(s.Component);e.exports=b}},function(e){e.O(0,[284,480,710,267,72,871,330,323,169,733,459,1,314,774,888,179],function(){return e(e.s=98250)}),_N_E=e.O()}]);