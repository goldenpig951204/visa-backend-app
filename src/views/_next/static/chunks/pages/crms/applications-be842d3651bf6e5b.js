(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[318],{80198:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/crms/applications",function(){return t(53250)}])},53250:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return ep}});var r=t(85893),n=t(67294),i=t(79072),o=t(49837),s=t(59742),l=t(29630),d=t(61953),c=t(91359),m=t(18661),p=t(45670),b=t(8769),h=t(55050),u=t(21609),x=t(94314),v=t(5464),g=t(67836),y=t(80562),f=t(73812),j=t(31538),Z=t(21448),k=t(75084),_=t(1890),C=t(77745),w=t(95398),P=t(55343),N=t(58316),S=t(53442),A=t(32631),I=t(9041),D=t(76779),T=t(17288),M=t(74231),W=t(47533),R=t(87536),E=t(40818),Y=t(67074),L=t(51514),B=t(62097),O=t(5026);let F=()=>{let e=(0,B.Z)();return{primaryFilled:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main},primaryLight:{color:e.palette.primary.main,backgroundColor:(0,O.E)(e.palette.primary.main,.12)},secondaryFilled:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main},secondaryLight:{color:e.palette.secondary.main,backgroundColor:(0,O.E)(e.palette.secondary.main,.12)},successFilled:{color:e.palette.success.contrastText,backgroundColor:e.palette.success.main},successLight:{color:e.palette.success.main,backgroundColor:(0,O.E)(e.palette.success.main,.12)},errorFilled:{color:e.palette.error.contrastText,backgroundColor:e.palette.error.main},errorLight:{color:e.palette.error.main,backgroundColor:(0,O.E)(e.palette.error.main,.12)},warningFilled:{color:e.palette.warning.contrastText,backgroundColor:e.palette.warning.main},warningLight:{color:e.palette.warning.main,backgroundColor:(0,O.E)(e.palette.warning.main,.12)},infoFilled:{color:e.palette.info.contrastText,backgroundColor:e.palette.info.main},infoLight:{color:e.palette.info.main,backgroundColor:(0,O.E)(e.palette.info.main,.12)}}};t(95828);let z=(0,Y.ZP)(d.Z)(e=>{let{theme:a}=e,{settings:t}=(0,L.r)(),r=F();return{"& .react-datepicker-popper":{zIndex:20},"& .react-datepicker-wrapper":{width:"100%"},"& .react-datepicker":{color:a.palette.text.primary,borderRadius:a.shape.borderRadius,fontFamily:a.typography.fontFamily,backgroundColor:a.palette.background.paper,boxShadow:a.shadows["bordered"===t.skin?0:7],border:"bordered"===t.skin?"1px solid ".concat(a.palette.divider):"none","& .react-datepicker__header":{padding:0,border:"none",fontWeight:"normal",backgroundColor:a.palette.background.paper,"&:not(.react-datepicker-year-header)":{"& + .react-datepicker__month, & + .react-datepicker__year":{margin:a.spacing(3.2),marginTop:a.spacing(6)}},"&.react-datepicker-year-header":{"& + .react-datepicker__month, & + .react-datepicker__year":{margin:a.spacing(3.2),marginTop:a.spacing(4)}}},"& .react-datepicker__triangle":{display:"none"},"& > .react-datepicker__navigation":{top:18,"&.react-datepicker__navigation--previous":{width:24,height:24,border:"none",..."ltr"===a.direction?{left:15}:{right:15},backgroundImage:"".concat("url('data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' style=\\'width:24px;height:24px\\' viewBox=\\'0 0 24 24\\'%3E%3Cpath fill=\\'currentColor\\' d=\\'M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z\\' /%3E%3C/svg%3E')".replace("currentColor",a.palette.text.secondary).replace("#","%23")),"& .react-datepicker__navigation-icon":{display:"none"}},"&.react-datepicker__navigation--next":{width:24,height:24,border:"none",..."ltr"===a.direction?{right:15}:{left:15},backgroundImage:"".concat("url('data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' style=\\'width:24px;height:24px\\' viewBox=\\'0 0 24 24\\'%3E%3Cpath fill=\\'currentColor\\' d=\\'M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z\\' /%3E%3C/svg%3E')".replace("currentColor",a.palette.text.secondary).replace("#","%23")),"& .react-datepicker__navigation-icon":{display:"none"}},"&.react-datepicker__navigation--next--with-time":"ltr"===a.direction?{right:127}:{left:127},"&:focus, &:active":{outline:0}},"& .react-datepicker__month-container":{paddingTop:a.spacing(3.2)},"& .react-datepicker__current-month, & .react-datepicker-year-header":{lineHeight:2.1,fontSize:"1rem",fontWeight:"normal",letterSpacing:"0.15px",marginBottom:a.spacing(2),color:a.palette.text.primary},"& .react-datepicker__day-name":{margin:0,lineHeight:1.5,width:"2.25rem",fontSize:"0.75rem",letterSpacing:"0.4px",color:a.palette.text.secondary},"& .react-datepicker__day":{margin:0,width:"2.25rem",borderRadius:"50%",lineHeight:"2.25rem",color:a.palette.text.primary,"&.react-datepicker__day--selected.react-datepicker__day--in-selecting-range.react-datepicker__day--selecting-range-start, &.react-datepicker__day--selected.react-datepicker__day--range-start.react-datepicker__day--in-range, &.react-datepicker__day--range-start":{borderTopLeftRadius:"50%",borderBottomLeftRadius:"50%",color:"".concat(a.palette.common.white," !important"),backgroundColor:"".concat(a.palette.primary.main," !important")},"&.react-datepicker__day--range-end.react-datepicker__day--in-range":{borderTopRightRadius:"50%",borderBottomRightRadius:"50%",color:"".concat(a.palette.common.white," !important"),backgroundColor:"".concat(a.palette.primary.main," !important")},"&:focus, &:active":{outline:0},"&.react-datepicker__day--outside-month, &.react-datepicker__day--disabled:not(.react-datepicker__day--selected)":{color:a.palette.text.disabled,"&:hover":{backgroundColor:"transparent"}},"&.react-datepicker__day--highlighted, &.react-datepicker__day--highlighted:hover":{color:a.palette.success.main,backgroundColor:"".concat(r.successLight.backgroundColor," !important"),"&.react-datepicker__day--selected":{backgroundColor:"".concat(a.palette.primary.main," !important")}}},"& .react-datepicker__day--in-range, & .react-datepicker__day--in-selecting-range":{borderRadius:0,color:a.palette.primary.main,backgroundColor:"".concat((0,O.E)(a.palette.primary.main,.06)," !important")},"& .react-datepicker__day--today":{fontWeight:"normal","&:not(.react-datepicker__day--selected):not(:empty)":{lineHeight:"2.125rem",color:a.palette.primary.main,border:"1px solid ".concat(a.palette.primary.main),"&:hover":{backgroundColor:(0,O.E)(a.palette.primary.main,.04)},"&.react-datepicker__day--keyboard-selected":{backgroundColor:(0,O.E)(a.palette.primary.main,.06),"&:hover":{backgroundColor:(0,O.E)(a.palette.primary.main,.06)}}}},"& .react-datepicker__month-text--today":{fontWeight:"normal","&:not(.react-datepicker__month--selected)":{lineHeight:"2.125rem",color:a.palette.primary.main,border:"1px solid ".concat(a.palette.primary.main),"&:hover":{backgroundColor:(0,O.E)(a.palette.primary.main,.04)}}},"& .react-datepicker__year-text--today":{fontWeight:"normal","&:not(.react-datepicker__year-text--selected)":{lineHeight:"2.125rem",color:a.palette.primary.main,border:"1px solid ".concat(a.palette.primary.main),"&:hover":{backgroundColor:(0,O.E)(a.palette.primary.main,.04)},"&.react-datepicker__year-text--keyboard-selected":{color:a.palette.primary.main,backgroundColor:(0,O.E)(a.palette.primary.main,.06),"&:hover":{color:a.palette.primary.main,backgroundColor:(0,O.E)(a.palette.primary.main,.06)}}}},"& .react-datepicker__day--keyboard-selected":{"&:not(.react-datepicker__day--in-range)":{backgroundColor:"rgba(".concat(a.palette.customColors.main,", 0.06)"),"&:hover":{backgroundColor:"rgba(".concat(a.palette.customColors.main,", 0.06)")}},"&.react-datepicker__day--in-range:not(.react-datepicker__day--range-end)":{backgroundColor:"".concat(r.primaryLight.backgroundColor," !important"),"&:hover":{backgroundColor:"".concat(r.primaryLight.backgroundColor," !important")}}},"& .react-datepicker__month-text--keyboard-selected":{"&:not(.react-datepicker__month--in-range)":{color:a.palette.text.primary,backgroundColor:"rgba(".concat(a.palette.customColors.main,", 0.06)"),"&:hover":{color:a.palette.text.primary,backgroundColor:"rgba(".concat(a.palette.customColors.main,", 0.06)")}}},"& .react-datepicker__year-text--keyboard-selected":{color:a.palette.text.primary,backgroundColor:"rgba(".concat(a.palette.customColors.main,", 0.06)"),"&:hover":{color:a.palette.text.primary,backgroundColor:"rgba(".concat(a.palette.customColors.main,", 0.06)")}},"& .react-datepicker__day--selected, & .react-datepicker__month--selected, & .react-datepicker__year-text--selected, & .react-datepicker__quarter--selected":{color:"".concat(a.palette.common.white," !important"),backgroundColor:"".concat(a.palette.primary.main," !important"),"&:hover":{backgroundColor:"".concat(a.palette.primary.dark," !important")}},"& .react-datepicker__header__dropdown":{"& .react-datepicker__month-dropdown-container:not(:last-child)":{marginRight:a.spacing(8)},"& .react-datepicker__month-dropdown-container, & .react-datepicker__year-dropdown-container":{marginBottom:a.spacing(4)},"& .react-datepicker__month-read-view--selected-month, & .react-datepicker__year-read-view--selected-year":{fontSize:"0.875rem",marginRight:a.spacing(1),color:a.palette.text.primary},"& .react-datepicker__month-read-view:hover .react-datepicker__month-read-view--down-arrow, & .react-datepicker__year-read-view:hover .react-datepicker__year-read-view--down-arrow":{borderColor:a.palette.text.secondary},"& .react-datepicker__month-read-view--down-arrow, & .react-datepicker__year-read-view--down-arrow":{top:4,borderColor:a.palette.text.disabled},"& .react-datepicker__month-dropdown, & .react-datepicker__year-dropdown":{paddingTop:a.spacing(2),paddingBottom:a.spacing(2),borderColor:a.palette.divider,borderRadius:a.shape.borderRadius,backgroundColor:a.palette.background.paper,boxShadow:"light"===a.palette.mode?a.shadows[8]:a.shadows[9]},"& .react-datepicker__month-option, & .react-datepicker__year-option":{paddingTop:a.spacing(1),paddingBottom:a.spacing(1),"&:first-of-type, &:last-of-type":{borderRadius:0},"&:hover":{backgroundColor:a.palette.action.hover}},"& .react-datepicker__month-option.react-datepicker__month-option--selected_month":{backgroundColor:(0,O.E)(a.palette.primary.main,.08),"&:hover":{backgroundColor:r.primaryLight.backgroundColor},"& .react-datepicker__month-option--selected":{display:"none"}},"& .react-datepicker__year-option.react-datepicker__year-option--selected_year":{backgroundColor:(0,O.E)(a.palette.primary.main,.08),"&:hover":{backgroundColor:r.primaryLight.backgroundColor},"& .react-datepicker__year-option--selected":{display:"none"}},"& .react-datepicker__year-option":{"& .react-datepicker__navigation--years-upcoming":{width:9,height:9,borderStyle:"solid",borderWidth:"3px 3px 0 0",transform:"rotate(-45deg)",borderTopColor:a.palette.text.disabled,borderRightColor:a.palette.text.disabled,margin:"".concat(a.spacing(2.75)," auto ").concat(a.spacing(0))},"&:hover .react-datepicker__navigation--years-upcoming":{borderTopColor:a.palette.text.secondary,borderRightColor:a.palette.text.secondary},"& .react-datepicker__navigation--years-previous":{width:9,height:9,borderStyle:"solid",borderWidth:"0 0 3px 3px",transform:"rotate(-45deg)",borderLeftColor:a.palette.text.disabled,borderBottomColor:a.palette.text.disabled,margin:"".concat(a.spacing(0)," auto ").concat(a.spacing(2.75))},"&:hover .react-datepicker__navigation--years-previous":{borderLeftColor:a.palette.text.secondary,borderBottomColor:a.palette.text.secondary}}},"& .react-datepicker__week-number":{margin:0,fontWeight:600,width:"2.25rem",lineHeight:"2.25rem",color:a.palette.text.primary},"& .react-datepicker__month-text, & .react-datepicker__year-text, & .react-datepicker__quarter-text":{margin:0,alignItems:"center",lineHeight:"2.25rem",display:"inline-flex",justifyContent:"center",borderRadius:a.shape.borderRadius,"&:focus, &:active":{outline:0}},"& .react-datepicker__year--container":{paddingTop:a.spacing(3.2)},"& .react-datepicker__year-wrapper":{maxWidth:205,justifyContent:"center"},"& .react-datepicker__input-time-container":{display:"flex",alignItems:"center",..."rtl"===a.direction?{flexDirection:"row-reverse"}:{}},"& .react-datepicker__today-button":{borderTop:0,borderRadius:"1rem",margin:a.spacing(0,4,4),color:a.palette.common.white,backgroundColor:a.palette.primary.main},"&:not(.react-datepicker--time-only)":{"& .react-datepicker__time-container":{borderLeftColor:a.palette.divider,[a.breakpoints.down("sm")]:{width:"5.5rem"},[a.breakpoints.up("sm")]:{width:"7rem"}},".react-datepicker-time__header":{paddingTop:a.spacing(3.2)}},"&.react-datepicker--time-only":{width:"7rem",padding:a.spacing(1.2,0),"& .react-datepicker__time-container":{width:"calc(7rem - 2px)"}},"& .react-datepicker__time-container":{padding:a.spacing(1.2,0),"& .react-datepicker-time__header":{fontSize:"1rem",lineHeight:1.31,fontWeight:"normal",letterSpacing:"0.15px",marginBottom:a.spacing(3),color:a.palette.text.primary},"& .react-datepicker__time":{background:a.palette.background.paper,"& .react-datepicker__time-box .react-datepicker__time-list-item--disabled":{pointerEvents:"none",color:a.palette.text.disabled,"&.react-datepicker__time-list-item--selected":{fontWeight:"normal",backgroundColor:a.palette.action.disabledBackground}}},"& .react-datepicker__time-list-item":{lineHeight:1.75,height:"auto !important",marginLeft:a.spacing(3.2),marginRight:a.spacing(1.2),color:a.palette.text.primary,borderRadius:a.shape.borderRadius,"&:focus, &:active":{outline:0},"&:hover":{backgroundColor:"".concat(a.palette.action.hover," !important")},"&.react-datepicker__time-list-item--selected:not(.react-datepicker__time-list-item--disabled)":{fontWeight:"600 !important",color:"".concat(a.palette.common.white," !important"),backgroundColor:"".concat(a.palette.primary.main," !important")}},"& .react-datepicker__time-box":{width:"100%"},"& .react-datepicker__time-list":{"&::-webkit-scrollbar":{width:8},"&::-webkit-scrollbar-track":{background:a.palette.background.paper},"&::-webkit-scrollbar-thumb":{borderRadius:10,background:"#aaa"},"&::-webkit-scrollbar-thumb:hover":{background:"#999"}}},"& .react-datepicker__day:hover, & .react-datepicker__month-text:hover, & .react-datepicker__quarter-text:hover, & .react-datepicker__year-text:hover":{backgroundColor:a.palette.action.hover}},"& .react-datepicker__close-icon":{paddingRight:a.spacing(4),..."rtl"===a.direction?{right:0,left:"auto"}:{},"&:after":{width:"unset",height:"unset",fontSize:"1.5rem",color:a.palette.text.primary,backgroundColor:"transparent !important"}}}});var G=t(9198),H=t.n(G),V=t(76627),U=t.n(V),K=t(86501),J=t(30381),q=t.n(J),Q=t(51964),X=t.n(Q),$=t(83461),ee=t(33504);let ea=(0,Y.ZP)(X())(e=>{let{theme:a}=e;return{padding:a.spacing(5)}}),et=(0,n.forwardRef)((e,a)=>{let{...t}=e,{label:n,readOnly:i}=t;return(0,r.jsx)(g.Z,{inputRef:a,...t,label:n||"",...i&&{inputProps:{readOnly:!0}}})}),er=e=>{let{id:a,application:t,assign:i,viewNote:o,updateStatus:s,remove:l}=e,{user:d}=(0,T.a)(),[c,m]=(0,n.useState)(null),p=Boolean(c),b=e=>{e.stopPropagation(),m(e.currentTarget)},h=()=>{m(null)},x=()=>{i(a),h()},v=()=>{o(t),h()},g=e=>{s(a,e),h()},Z=()=>{l(a),h()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.Z,{size:"small",onClick:b,children:(0,r.jsx)(u.Z,{icon:"mdi:dots-vertical"})}),(0,r.jsxs)(f.Z,{keepMounted:!0,anchorEl:c,open:p,onClose:h,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{minWidth:"8rem"}},children:["staff"===d.role?[(0,r.jsxs)(j.Z,{onClick:()=>g(!0),sx:{"& svg":{mr:2}},children:[(0,r.jsx)(u.Z,{icon:"mdi:book-check",fontSize:20}),"Approve"]},1),(0,r.jsxs)(j.Z,{onClick:()=>g(!1),sx:{"& svg":{mr:2}},children:[(0,r.jsx)(u.Z,{icon:"mdi:book-cancel",fontSize:20}),"Decline"]},2)]:"super_admin"===d.role||"admin"===d.role?[(0,r.jsxs)(j.Z,{sx:{"& svg":{mr:2}},onClick:x,children:[(0,r.jsx)(u.Z,{icon:"mdi:calendar-month",fontSize:20})," Assignment"]},1),(0,r.jsxs)(j.Z,{sx:{"& svg":{mr:2}},onClick:v,children:[(0,r.jsx)(u.Z,{icon:"mdi:eye",fontSize:20})," View Notes"]},2)]:null,"super_admin"===d.role&&(0,r.jsxs)(j.Z,{onClick:Z,sx:{"& svg":{mr:2}},children:[(0,r.jsx)(u.Z,{icon:"mdi:delete-outline",fontSize:20}),"Delete"]})]})]})},en=e=>{let{staffs:a}=e,t=(0,n.useRef)(),{user:o}=(0,T.a)(),[s,c]=(0,n.useState)(10),[m,p]=(0,n.useState)([]),[b,h]=(0,n.useState)(!0),[x,f]=(0,n.useState)(!1),[Y,L]=(0,n.useState)(!1),[B,O]=(0,n.useState)(!1),[F,G]=(0,n.useState)(0),[V,J]=(0,n.useState)("approved"),[Q,X]=(0,n.useState)([]),[en,ei]=(0,n.useState)([]),[eo,es]=(0,n.useState)({}),[el,ed]=(0,n.useState)(!1),[ec,em]=(0,n.useState)({note:"",attach:""}),ep=M.Ry().shape({staff:M.Z_().required("Staff is required field.")}),{reset:eb,control:eh,handleSubmit:eu,formState:{errors:ex}}=(0,R.cI)({defaultValues:{staff:""},mode:"onChange",resolver:(0,W.X)(ep)});(0,n.useEffect)(()=>{let e=async()=>{let{data:e}=await v.Z.get("visa/agent-visa-prices");X(e)},a=async()=>{let{data:e}=await v.Z.get("visa/travel-types");ei(e)};e(),a()},[]),(0,n.useEffect)(()=>{let e=async()=>{let{data:e}=await v.Z.get("/crms/applications",{params:{userId:o._id,by:"global"}});p(e)};e()},[b]);let ev=async e=>{G(e);let{data:a}=await v.Z.get("crms/applications/".concat(e,"/assign"));a?eb({staff:a.staff}):eb({staff:""}),f(!0)},eg=async e=>{let{data:a}=await v.Z.put("crms/applications/".concat(F,"/assign"),e);a.status?(K.Am.success(a.msg),eb(),f(!1)):K.Am.error(a.msg)},ey=e=>{es(e),O(!0)},ef=async(e,a)=>{G(e),J(a?"approved":"declined"),L(!0)},ej=async e=>{if(e.preventDefault(),""===ec.note)K.Am.error("Please put down the note.");else{let a=new FormData;a.append("note",ec.note),a.append("status",V),ec.attach instanceof File&&a.append("attach",ec.attach);let{data:t}=await v.Z.put("crms/applications/".concat(F),a,{headers:{"Content-Type":"multipart/form-data"}});t.status?(L(!1),h(!b),K.Am.success(t.msg)):K.Am.error(t.msg)}},eZ=async e=>{let{data:a}=await v.Z.delete("crms/applications/".concat(e));a.status?(K.Am.success(a.msg),h(!b)):K.Am.error(a.msg)},ek=e=>{es(e.row),ed(!0)};return(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(k.Z,{variant:"contained",size:"small",sx:{mb:3},startIcon:(0,r.jsx)(u.Z,{icon:"mdi:file-download"}),children:(0,r.jsx)($.CSVLink,{style:{textDecoration:"none",color:"#fafafa"},filename:"applications.csv",data:m.map((e,a)=>({id:e._id,orderNumber:e.orderNumber,passportNumber:e.persons[0].passportNumber,firstName:e.persons[0].firstName,lastName:e.persons[0].lastName,phone:e.persons[0].phone,amount:e.amount,submittedDate:q()(e.createdAt).format("YYYY-MM-DD HH:mm:ss"),status:e.status})),headers:[{label:"Application number",key:"id"},{label:"Order number",key:"orderNumber"},{label:"Passport number",key:"passportNumber"},{label:"First name",key:"firstName"},{label:"Last name",key:"lastName"},{label:"Phone",key:"phone"},{label:"Amount",key:"amount"},{label:"Submitted date",key:"submittedDate"},{label:"Status",key:"status"}],children:"Export to CSV"})}),(0,r.jsx)(E._,{autoHeight:!0,rows:m,columns:[{flex:4,minWidth:230,field:"_id",headerName:"Application Number",renderCell(e){let{row:a}=e;return(0,r.jsx)(l.Z,{noWrap:!0,children:a._id})}},{flex:4,minWidth:250,field:"orderNumber",headerName:"Order Number",renderCell(e){let{row:a}=e;return(0,r.jsx)(l.Z,{noWrap:!0,children:a.orderNumber})}},{flex:3,field:"passportNumber",headerName:"Passport Number",renderCell(e){let{row:a}=e;return(0,r.jsx)(l.Z,{noWrap:!0,children:a.persons[0].passportNumber})}},{flex:2,field:"firstName",headerName:"Name",renderCell(e){let{row:a}=e;return(0,r.jsx)(l.Z,{noWrap:!0,children:a.persons[0].firstName})}},{flex:2,field:"lastName",headerName:"Surname",renderCell(e){let{row:a}=e;return(0,r.jsx)(l.Z,{noWrap:!0,children:a.persons[0].lastName})}},{flex:3,field:"phone",headerName:"Phone",renderCell(e){let{row:a}=e;return(0,r.jsx)(l.Z,{noWrap:!0,children:a.persons[0].phone})}},{flex:1,minWidth:100,field:"amount",headerName:"Amount",renderCell(e){let{row:a}=e;return(0,r.jsx)(l.Z,{noWrap:!0,children:a.amount})}},{flex:3,minWidth:110,field:"createdAt",headerName:"Submitted Date",renderCell(e){let{row:a}=e;return(0,r.jsx)(l.Z,{noWrap:!0,children:q()(a.createdAt).format("YYYY-MM-DD HH:mm:ss")})}},{flex:1,minWidth:100,field:"status",headerName:"Status",renderCell(e){let{row:a}=e;return(0,r.jsx)(Z.Z,{skin:"light",size:"small",variant:"filled",label:a.status[0].toUpperCase()+a.status.substring(1),color:"received"==a.status?"warning":"approved"==a.status?"success":"error",sx:{textTransform:"capitalize","& .MuiChip-label":{lineHeight:"18px"}}})}},{flex:1,field:"action",headerName:"Action",renderCell(e){let{row:a}=e;return"agent"!==o.role?(0,r.jsx)(er,{id:a._id,application:a,assign:ev,viewNote:ey,updateStatus:ef,remove:eZ}):null}}],pageSize:s,rowsPerPageOptions:[10,25,50],getRowId:e=>e._id,onRowClick:ek,sx:{"& .MuiDataGrid-columnHeaders":{borderRadius:0}},onPageSizeChange:e=>c(e)}),(0,r.jsxs)(_.Z,{fullWidth:!0,maxWidth:"sm",onClose(){},open:x,children:[(0,r.jsxs)(C.Z,{children:["Choose a sub user to deal with this application",(0,r.jsx)(y.Z,{onClick:()=>f(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,r.jsx)(u.Z,{icon:"mdi:close"})})]}),(0,r.jsx)(w.Z,{sx:{p:6},children:(0,r.jsxs)("form",{onSubmit:eu(eg),style:{paddingTop:8},children:[(0,r.jsxs)(P.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(N.Z,{htmlFor:"sub-user",children:"Staff"}),(0,r.jsx)(R.Qr,{id:"sub-user",name:"staff",control:eh,rules:{required:!0},render(e){let{field:{value:t,onChange:n}}=e;return(0,r.jsx)(S.Z,{value:t,label:"Staff",onChange:n,error:Boolean(ex.staff),children:a.map((e,a)=>(0,r.jsxs)(j.Z,{value:e._id,sx:{flexDirection:"column",alignItems:"flex-start"},children:[(0,r.jsx)(l.Z,{children:e.firstName+" "+e.lastName}),(0,r.jsx)(l.Z,{variant:"body2",sx:{color:"text.disabled"},children:e.email})]},a))})}}),ex.staff&&(0,r.jsx)(A.Z,{sx:{color:"error.main"},children:ex.staff.message})]}),(0,r.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,r.jsx)(k.Z,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:(0,r.jsx)(u.Z,{icon:"mdi:content-save"}),sx:{mr:4},children:"Update"}),(0,r.jsx)(k.Z,{variant:"contained",color:"error",size:"large",startIcon:(0,r.jsx)(u.Z,{icon:"mdi:delete"}),onClick:()=>f(!1),children:"Cancel"})]})]})})]}),(0,r.jsxs)(_.Z,{fullWidth:!0,maxWidth:"sm",onClose:()=>L(!1),open:Y,children:[(0,r.jsxs)(C.Z,{children:["Update Status",(0,r.jsx)(y.Z,{onClick:()=>L(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,r.jsx)(u.Z,{icon:"mdi:close"})})]}),(0,r.jsx)(w.Z,{sx:{p:6},children:(0,r.jsxs)("form",{onSubmit:ej,style:{paddingTop:8},children:[(0,r.jsx)(P.Z,{fullWidth:!0,sx:{mb:6},children:(0,r.jsx)(g.Z,{multiline:!0,rows:4,value:ec.note,label:"Note",onChange:e=>em({...ec,note:e.target.value})})}),(0,r.jsx)(P.Z,{fullWidth:!0,sx:{mb:6},children:(0,r.jsx)(g.Z,{type:"file",label:"Attachment",onChange:e=>em({...ec,attach:e.target.files[0]})})}),(0,r.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,r.jsx)(k.Z,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:(0,r.jsx)(u.Z,{icon:"mdi:content-save"}),sx:{mr:4},children:"Update"}),(0,r.jsx)(k.Z,{variant:"contained",color:"error",size:"large",startIcon:(0,r.jsx)(u.Z,{icon:"mdi:delete"}),onClick:()=>L(!1),children:"Cancel"})]})]})})]}),(0,r.jsxs)(_.Z,{fullWidth:!0,maxWidth:"md",onClose(){ed(!1)},open:el,children:[(0,r.jsxs)(C.Z,{children:["Application Detail",(0,r.jsx)(y.Z,{onClick:()=>ed(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,r.jsx)(u.Z,{icon:"mdi:close"})})]}),(0,r.jsx)(w.Z,{children:(0,r.jsx)(ea,{ref:t,style:{height:"calc(100vh - 300px)"},children:(0,r.jsx)(z,{children:(0,r.jsx)(i.ZP,{container:!0,spacing:5,children:Object.keys(eo).length?eo.persons.map((e,a)=>{var t;return(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,r.jsx)(g.Z,{fullWidth:!0,label:"First name",placeholder:"Denys",value:e.firstName,readOnly:!0,InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:account-outline"})})}})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,r.jsx)(g.Z,{fullWidth:!0,label:"Last name",placeholder:"Lavrynenko",value:e.lastName,readOnly:!0,InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:account-outline"})})}})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,r.jsx)(g.Z,{fullWidth:!0,label:"Father's name",placeholder:"Alexander",value:e.fatherName,readOnly:!0,InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:account-outline"})})}})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,r.jsx)(d.Z,{children:(0,r.jsx)(H(),{showYearDropdown:!0,showMonthDropdown:!0,popperPlacement:"bottom-start",selected:new Date(e.birthday),readOnly:!0,placeholderText:"DD/MM/YYYY",customInput:(0,r.jsx)(et,{fullWidth:!0,label:"Date of birthday",InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:calendar-month"})})}})})})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(N.Z,{id:"country-label",children:"Country"}),(0,r.jsx)(S.Z,{label:"Country",id:"country",labelId:"country-label",value:e.country,readOnly:!0,children:ee.map((e,a)=>(0,r.jsx)(j.Z,{value:e.abbreviation,children:e.name},a))})]})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,r.jsx)(U(),{mask:"(+44) 999 999 9999",maskChar:"_",value:e.phone,readOnly:!0,children:()=>(0,r.jsx)(g.Z,{fullWidth:!0,label:"Phone number",placeholder:"(+44) 831 623 5660",InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:phone"})})}})})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(N.Z,{id:"prev-nationality-label",children:"Previous Nationally"}),(0,r.jsx)(S.Z,{label:"Previous Nationality",id:"prev-nationality",labelId:"prev-nationlity-label",value:e.prevNationality,readOnly:!0,children:ee.map((e,a)=>(0,r.jsx)(j.Z,{value:e.abbreviation,children:e.name},a))})]})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,r.jsx)(g.Z,{fullWidth:!0,label:"Email",placeholder:"denys.lavrynenko@gmail.com",value:e.email,readOnly:!0,InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:email-outline"})})}})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(N.Z,{id:"type-of-visa-label",children:"Type of Visa"}),(0,r.jsx)(S.Z,{label:"Type of Visa",id:"type-of-visa",labelId:"type-of-visa-label",value:e.visaType,readOnly:!0,children:Q.map((e,a)=>(0,r.jsx)(j.Z,{value:e.visaType._id,children:e.visaType.name},a))})]})}),(0,r.jsx)(i.ZP,{item:!0,md:6,sm:6,xs:12,sx:{mb:3},children:(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(N.Z,{id:"type-of-travel-label",children:"Type of Travel Document"}),(0,r.jsx)(S.Z,{label:"Type of Travel Document",id:"type-of-travel",labelId:"type-of-travel-label",value:e.travelType,readOnly:!0,children:en.map((e,a)=>(0,r.jsx)(j.Z,{value:e._id,children:e.name},a))})]})}),(0,r.jsx)(i.ZP,{item:!0,md:6,sm:6,xs:12,sx:{mb:3},children:(0,r.jsx)(g.Z,{fullWidth:!0,label:"Passport Number",placeholder:"7700225VH",value:e.passportNumber,readOnly:!0,InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:passport"})})}})}),(0,r.jsx)(i.ZP,{item:!0,md:6,sm:6,xs:12,sx:{mb:3},children:(0,r.jsx)(H(),{showYearDropdown:!0,showMonthDropdown:!0,selected:new Date(e.issuedDate),readOnly:!0,id:"issued-date-input",popperPlacement:"bottom-start",placeholderText:"MM/DD/YYYY",customInput:(0,r.jsx)(et,{fullWidth:!0,label:"Issued Date",InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:calendar-month"})})}})})}),(0,r.jsx)(i.ZP,{item:!0,md:6,xs:12,sx:{mb:3},children:(0,r.jsx)(H(),{showYearDropdown:!0,showMonthDropdown:!0,selected:new Date(e.expireDate),readOnly:!0,id:"expire-date-input",popperPlacement:"bottom-start",placeholderText:"MM/DD/YYYY",customInput:(0,r.jsx)(et,{fullWidth:!0,label:"Expire Date",InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:calendar-month"})})}})})}),(0,r.jsx)(i.ZP,{item:!0,md:12,children:(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"row"},children:[(0,r.jsx)(d.Z,{sx:{borderRadius:1,marginRight:4,flexBasis:170,height:175,padding:1,border:"2px solid #585b75",overflow:"hidden"},children:(0,r.jsx)("img",{src:"".concat("/uploads","/personal_photos/").concat(e.personalPhoto),alt:"personal_photo",style:{width:"100%",height:"100%",borderRadius:5}})}),(0,r.jsx)(d.Z,{sx:{borderRadius:1,marginRight:4,flexBasis:215,height:175,padding:1,border:"2px solid #585b75",overflow:"hidden"},children:(0,r.jsx)("img",{src:"".concat("/uploads","/passport_photos/").concat(e.passportPhoto),alt:"passport_photo",style:{width:"100%",height:"100%",borderRadius:5}})}),(0,r.jsx)(g.Z,{sx:{flex:1},fullWidth:!0,multiline:!0,readOnly:!0,rows:6,label:"Note",value:null!==(t=e.note)&&void 0!==t?t:""})]})})]},a)}):null})})})}),(0,r.jsx)(D.Z,{children:(0,r.jsx)(d.Z,{sx:{flex:1,pt:0,pb:3,display:"flex",justifyContent:"flex-end"},children:(0,r.jsx)(k.Z,{type:"button",variant:"contained",size:"large",startIcon:(0,r.jsx)(u.Z,{icon:"mdi:close"}),onClick:()=>ed(!1),children:"Close"})})})]}),(0,r.jsxs)(_.Z,{fullWidth:!0,maxWidth:"sm",onClose:()=>O(!1),open:B,children:[(0,r.jsxs)(C.Z,{children:["View Note",(0,r.jsx)(y.Z,{onClick:()=>O(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,r.jsx)(u.Z,{icon:"mdi:close"})})]}),(0,r.jsx)(w.Z,{sx:{px:6},children:(0,r.jsx)(P.Z,{fullWidth:!0,sx:{mt:2,mb:0},children:(0,r.jsx)(g.Z,{multiline:!0,readOnly:!0,rows:4,value:eo.note,label:"Note"})})}),(0,r.jsxs)(D.Z,{sx:{justifyContent:eo.attach?"space-between":"flex-end"},children:[eo.attach&&(0,r.jsxs)(k.Z,{variant:"contained",href:"".concat("/uploads","/attachments/").concat(eo.attach),download:!0,target:"_blank",children:[(0,r.jsx)(u.Z,{icon:"mdi:download"})," Attachment"]}),(0,r.jsxs)(k.Z,{variant:"contained",color:"error",onClick:()=>O(!1),children:[(0,r.jsx)(u.Z,{icon:"mdi:close"})," Close"]})]})]})]})};var ei=t(77718),eo=t.n(ei);t(16250);let es=(0,Y.ZP)(X())(e=>{let{theme:a}=e;return{padding:a.spacing(5)}}),el=(0,n.forwardRef)((e,a)=>{let{...t}=e,{label:n,readOnly:i}=t;return(0,r.jsx)(g.Z,{inputRef:a,...t,label:n||"",...i&&{inputProps:{readOnly:!0}}})}),ed=e=>{let{id:a,application:t,assign:i,viewNote:o,updateStatus:s,remove:l}=e,{user:d}=(0,T.a)(),[c,m]=(0,n.useState)(null),p=Boolean(c),b=e=>{e.stopPropagation(),m(e.currentTarget)},h=()=>{m(null)},x=()=>{i(a),h()},v=()=>{o(t),h()},g=e=>{s(a,e),h()},Z=()=>{l(a),h()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.Z,{size:"small",onClick:b,children:(0,r.jsx)(u.Z,{icon:"mdi:dots-vertical"})}),(0,r.jsxs)(f.Z,{keepMounted:!0,anchorEl:c,open:p,onClose:h,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{minWidth:"8rem"}},children:["staff"===d.role?[(0,r.jsxs)(j.Z,{onClick:()=>g(!0),sx:{"& svg":{mr:2}},children:[(0,r.jsx)(u.Z,{icon:"mdi:book-check",fontSize:20}),"Approve"]},1),(0,r.jsxs)(j.Z,{onClick:()=>g(!1),sx:{"& svg":{mr:2}},children:[(0,r.jsx)(u.Z,{icon:"mdi:book-cancel",fontSize:20}),"Decline"]},2)]:"super_admin"===d.role||"admin"===d.role?[(0,r.jsxs)(j.Z,{sx:{"& svg":{mr:2}},onClick:x,children:[(0,r.jsx)(u.Z,{icon:"mdi:calendar-month",fontSize:20})," Assignment"]},1),(0,r.jsxs)(j.Z,{sx:{"& svg":{mr:2}},onClick:v,children:[(0,r.jsx)(u.Z,{icon:"mdi:eye",fontSize:20})," View Notes"]},2)]:null,"super_admin"===d.role&&(0,r.jsxs)(j.Z,{onClick:Z,sx:{"& svg":{mr:2}},children:[(0,r.jsx)(u.Z,{icon:"mdi:delete-outline",fontSize:20}),"Delete"]})]})]})},ec=e=>{let{staffs:a}=e,{user:t,setUser:o}=(0,T.a)(),s=(0,n.useRef)(),[c,m]=(0,n.useState)(10),[p,b]=(0,n.useState)([]),[h,x]=(0,n.useState)(!0),[f,Y]=(0,n.useState)(!1),[L,B]=(0,n.useState)(!1),[O,F]=(0,n.useState)(!1),[G,V]=(0,n.useState)(0),[J,Q]=(0,n.useState)(!1),[X,ea]=(0,n.useState)({note:"",attach:""}),[et,er]=(0,n.useState)([{firstName:"",lastName:"",fatherName:"",birthday:"",country:"_",phone:"",prevNationality:"_",email:"",visaType:"_",travelType:"_",passportNumber:"",issuedDate:"",expireDate:"",personalPhoto:{},passportPhoto:{},note:""}]),[en,ei]=(0,n.useState)([]),[ec,em]=(0,n.useState)([]),[ep,eb]=(0,n.useState)({}),[eh,eu]=(0,n.useState)(!1),[ex,ev]=(0,n.useState)("approved"),eg=M.Ry().shape({staff:M.Z_().required("Staff is required field.")}),{reset:ey,control:ef,handleSubmit:ej,formState:{errors:eZ}}=(0,R.cI)({defaultValues:{staff:""},mode:"onChange",resolver:(0,W.X)(eg)});(0,n.useEffect)(()=>{let e=async()=>{let{data:e}=await v.Z.get("/crms/applications",{params:{userId:t._id,by:"agent"}});b(e)};e()},[h]),(0,n.useEffect)(()=>{let e=async()=>{let{data:e}=await v.Z.get("visa/agent-visa-prices");ei(e)},a=async()=>{let{data:e}=await v.Z.get("visa/travel-types");em(e)};e(),a()},[]);let ek=async e=>{V(e);let{data:a}=await v.Z.get("crms/applications/".concat(e,"/assign"));a&&ey({staff:a.staff}),Y(!0)},e_=async e=>{let{data:a}=await v.Z.put("crms/applications/".concat(G,"/assign"),e);a.status?(K.Am.success(a.msg),ey(),Y(!1)):K.Am.error(a.msg)},eC=e=>{eb(e),F(!0)},ew=async(e,a)=>{V(e),ev(a?"approved":"declined"),B(!0)},eP=async e=>{if(e.preventDefault(),""===X.note)K.Am.error("Please put down the note.");else{let a=new FormData;a.append("note",X.note),a.append("status",ex),X.attach instanceof File&&a.append("attach",X.attach);let{data:t}=await v.Z.put("crms/applications/".concat(G),a,{headers:{"Content-Type":"multipart/form-data"}});t.status?(B(!1),x(!h),K.Am.success(t.msg)):K.Am.error(t.msg)}},eN=async e=>{let{data:a}=await v.Z.delete("crms/applications/".concat(e));a.status?(K.Am.success(a.msg),x(!h)):K.Am.error(a.msg)},eS=()=>{er([{firstName:"",lastName:"",fatherName:"",birthday:"",country:"_",phone:"",prevNationality:"_",email:"",visaType:"_",travelType:"_",passportNumber:"",issuedDate:"",expireDate:"",personalPhoto:{},passportPhoto:{},note:""}]),Q(!0)},eA=()=>{er([...et,{firstName:"",lastName:"",fatherName:"",birthday:"",country:"_",phone:"",prevNationality:"_",email:"",visaType:"_",travelType:"_",passportNumber:"",issuedDate:"",expireDate:"",personalPhoto:{},passportPhoto:{},note:""}]),s.current._container.scrollTop=Number.MAX_SAFE_INTEGER},eI=e=>{er(et.filter((a,t)=>t!==e))},eD=function(e,a,t){let r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];er(et.map((n,i)=>a===i?{...n,[t]:r?e:{}}:n))},eT=async()=>{let e=!0;if(et.forEach((a,t)=>{if(""===a.firstName){K.Am.error("Please enter your first name."),e=!1;return}if(""===a.lastName){K.Am.error("Please enter your last name."),e=!1;return}if(""===a.fatherName){K.Am.error("Please enter your father's name."),e=!1;return}if(""===a.birthday){K.Am.error("Please enter your birthday."),e=!1;return}if("_"===a.country){K.Am.error("Please choose your country."),e=!1;return}if(""===a.phone){K.Am.error("Please enter your phone number."),e=!1;return}if(12!==a.phone.replace(/[^0-9]/g,"").length){K.Am.error("The phone number format seems to be incorrect."),e=!1;return}else if("_"===a.prevNationality){K.Am.error("Please choose your previous nationality."),e=!1;return}else if("UK"===a.prevNationality){K.Am.error("Because you have record of british in the previous nationality, you can not continue this application."),e=!1;return}else if(""===a.email){K.Am.error("Please enter your email address."),e=!1;return}else if(/\S+@\S+\.\S+/.test(a.email)){if("_"===a.visaType){K.Am.error("Please choose the type of visa."),e=!1;return}if("_"===a.travelType){K.Am.error("Please choose the type of travel."),e=!1;return}if(""===a.passportNumber){K.Am.error("Please enter your passport number."),e=!1;return}else if(""===a.issuedDate){K.Am.error("Please enter issued date of visa."),e=!1;return}else if(""===a.expireDate){K.Am.error("Please enter expire date of visa."),e=!1;return}else if(6>q().duration(q()(a.expireDate).diff(q()(),"months",!0))){K.Am.error("Because the expire date of your passport is not enough, you can't continue this application."),e=!1;return}else if(Object.keys(a.passportPhoto).length){if(!Object.keys(a.personalPhoto).length){K.Am.error("Please choose your personal photo.");return}}else{K.Am.error("Please choose your passport photo."),e=!1;return}}else{K.Am.error("The email format seems to be incorrect."),e=!1;return}}),e){let a=new FormData;et.forEach((e,t)=>{a.append("firstName[]",e.firstName),a.append("lastName[]",e.lastName),a.append("fatherName[]",e.fatherName),a.append("birthday[]",q()(e.birthday).format("YYYY-MM-DD")),a.append("country[]",e.country),a.append("phone[]",e.phone),a.append("prevNationality[]",e.prevNationality),a.append("email[]",e.email),a.append("visaType[]",e.visaType),a.append("travelType[]",e.travelType),a.append("passportNumber[]",e.passportNumber),a.append("issuedDate[]",e.issuedDate),a.append("expireDate[]",e.expireDate),a.append("personalPhoto[]",e.personalPhoto.file),a.append("passportPhoto[]",e.passportPhoto.file),a.append("note[]",e.note)}),a.append("by","agent"),a.append("agentId",t._id);let{data:r}=await v.Z.post("crms/applications",a,{headers:{"Content-Type":"multipart/form-data"}});r.status?(K.Am.success(r.msg),Q(!1),o({...t,balance:Number(t.balance)-Number(r.amount)}),x(!h)):K.Am.error(r.msg)}},eM=e=>{eb(e.row),eu(!0)};return(0,r.jsxs)(d.Z,{children:["agent"===t.role&&(0,r.jsxs)(k.Z,{variant:"contained",color:"primary",size:"small",sx:{float:"right"},onClick:eS,children:[(0,r.jsx)(u.Z,{icon:"mdi:plus"})," Apply Now"]}),(0,r.jsx)(k.Z,{variant:"contained",size:"small",sx:{mb:3},startIcon:(0,r.jsx)(u.Z,{icon:"mdi:file-download"}),children:(0,r.jsx)($.CSVLink,{style:{textDecoration:"none",color:"#fafafa"},filename:"applications.csv",data:p.map((e,a)=>({id:e._id,orderNumber:e.orderNumber,passportNumber:e.persons[0].passportNumber,firstName:e.persons[0].firstName,lastName:e.persons[0].lastName,phone:e.persons[0].phone,amount:e.amount,submittedDate:q()(e.createdAt).format("YYYY-MM-DD HH:mm:ss"),status:e.status})),headers:[{label:"Application number",key:"id"},{label:"Order number",key:"orderNumber"},{label:"Passport number",key:"passportNumber"},{label:"First name",key:"firstName"},{label:"Last name",key:"lastName"},{label:"Phone",key:"phone"},{label:"Amount",key:"amount"},{label:"Submitted date",key:"submittedDate"},{label:"Status",key:"status"}],children:"Export to CSV"})}),(0,r.jsx)(E._,{autoHeight:!0,rows:p,columns:[{flex:4,minWidth:230,field:"_id",headerName:"Application Number",renderCell(e){let{row:a}=e;return(0,r.jsx)(l.Z,{noWrap:!0,children:a._id})}},{flex:3,field:"passportNumber",headerName:"Passport Number",renderCell(e){let{row:a}=e;return(0,r.jsx)(l.Z,{noWrap:!0,children:a.persons[0].passportNumber})}},{flex:2,field:"firstName",headerName:"Name",renderCell(e){let{row:a}=e;return(0,r.jsx)(l.Z,{noWrap:!0,children:a.persons[0].firstName})}},{flex:2,field:"lastName",headerName:"Surname",renderCell(e){let{row:a}=e;return(0,r.jsx)(l.Z,{noWrap:!0,children:a.persons[0].lastName})}},{flex:3,field:"phone",headerName:"Phone",renderCell(e){let{row:a}=e;return(0,r.jsx)(l.Z,{noWrap:!0,children:a.persons[0].phone})}},{flex:1,minWidth:100,field:"amount",headerName:"Amount",renderCell(e){let{row:a}=e;return(0,r.jsx)(l.Z,{noWrap:!0,children:a.amount})}},{flex:3,minWidth:110,field:"createdAt",headerName:"Submitted Date",renderCell(e){let{row:a}=e;return(0,r.jsx)(l.Z,{noWrap:!0,children:q()(a.createdAt).format("YYYY-MM-DD HH:mm:ss")})}},{flex:1,minWidth:100,field:"status",headerName:"Status",renderCell(e){let{row:a}=e;return(0,r.jsx)(Z.Z,{skin:"light",size:"small",variant:"filled",label:a.status[0].toUpperCase()+a.status.substring(1),color:"received"==a.status?"warning":"approved"==a.status?"success":"error",sx:{textTransform:"capitalize","& .MuiChip-label":{lineHeight:"18px"}}})}},{flex:1,field:"action",headerName:"Action",renderCell(e){let{row:a}=e;return"agent"!==t.role?(0,r.jsx)(ed,{id:a._id,application:a,assign:ek,viewNote:eC,updateStatus:ew,remove:eN}):null}}],pageSize:c,rowsPerPageOptions:[10,25,50],getRowId:e=>e._id,onRowClick:eM,sx:{"& .MuiDataGrid-columnHeaders":{borderRadius:0}},onPageSizeChange:e=>m(e)}),(0,r.jsxs)(_.Z,{fullWidth:!0,maxWidth:"sm",onClose(){Y(!1)},open:f,children:[(0,r.jsxs)(C.Z,{children:["Choose a sub user to deal with this application",(0,r.jsx)(y.Z,{onClick:()=>Y(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,r.jsx)(u.Z,{icon:"mdi:close"})})]}),(0,r.jsx)(w.Z,{sx:{p:6},children:(0,r.jsxs)("form",{onSubmit:ej(e_),style:{paddingTop:8},children:[(0,r.jsxs)(P.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(N.Z,{htmlFor:"sub-user",children:"Staff"}),(0,r.jsx)(R.Qr,{id:"sub-user",name:"staff",control:ef,rules:{required:!0},render(e){let{field:{value:t,onChange:n}}=e;return(0,r.jsx)(S.Z,{value:t,label:"Staff",onChange:n,error:Boolean(eZ.staff),children:a.map((e,a)=>(0,r.jsxs)(j.Z,{value:e._id,sx:{flexDirection:"column",alignItems:"flex-start"},children:[(0,r.jsx)(l.Z,{children:e.firstName+" "+e.lastName}),(0,r.jsx)(l.Z,{variant:"body2",sx:{color:"text.disabled"},children:e.email})]},a))})}}),eZ.staff&&(0,r.jsx)(A.Z,{sx:{color:"error.main"},children:eZ.staff.message})]}),(0,r.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,r.jsx)(k.Z,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:(0,r.jsx)(u.Z,{icon:"mdi:content-save"}),sx:{mr:4},children:"Update"}),(0,r.jsx)(k.Z,{variant:"contained",color:"error",size:"large",startIcon:(0,r.jsx)(u.Z,{icon:"mdi:delete"}),onClick:()=>Y(!1),children:"Cancel"})]})]})})]}),(0,r.jsxs)(_.Z,{fullWidth:!0,maxWidth:"sm",onClose(){B(!1)},open:L,children:[(0,r.jsxs)(C.Z,{children:["Update Status",(0,r.jsx)(y.Z,{onClick:()=>B(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,r.jsx)(u.Z,{icon:"mdi:close"})})]}),(0,r.jsx)(w.Z,{sx:{p:6},children:(0,r.jsxs)("form",{onSubmit:eP,style:{paddingTop:8},children:[(0,r.jsx)(P.Z,{fullWidth:!0,sx:{mb:6},children:(0,r.jsx)(g.Z,{multiline:!0,rows:4,value:X.note,label:"Note",onChange:e=>ea({...X,note:e.target.value})})}),(0,r.jsx)(P.Z,{fullWidth:!0,sx:{mb:6},children:(0,r.jsx)(g.Z,{type:"file",label:"Attachment",onChange:e=>ea({...X,attach:e.target.files[0]})})}),(0,r.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,r.jsx)(k.Z,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:(0,r.jsx)(u.Z,{icon:"mdi:content-save"}),sx:{mr:4},children:"Update"}),(0,r.jsx)(k.Z,{variant:"contained",color:"error",size:"large",startIcon:(0,r.jsx)(u.Z,{icon:"mdi:delete"}),onClick:()=>B(!1),children:"Cancel"})]})]})})]}),(0,r.jsxs)(_.Z,{fullWidth:!0,maxWidth:"md",onClose(){Q(!1)},open:J,children:[(0,r.jsxs)(C.Z,{children:["New Application",(0,r.jsx)(y.Z,{onClick:()=>Q(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,r.jsx)(u.Z,{icon:"mdi:close"})})]}),(0,r.jsx)(w.Z,{children:(0,r.jsx)(es,{ref:s,style:{height:"calc(100vh - 300px)"},children:(0,r.jsx)(z,{children:(0,r.jsx)(i.ZP,{container:!0,spacing:5,children:et.map((e,a)=>(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,r.jsx)(g.Z,{fullWidth:!0,label:"First name",value:e.firstName,onChange:e=>eD(e.target.value,a,"firstName"),InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:account-outline"})})}})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,r.jsx)(g.Z,{fullWidth:!0,label:"Last name",value:e.lastName,onChange:e=>eD(e.target.value,a,"lastName"),InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:account-outline"})})}})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,r.jsx)(g.Z,{fullWidth:!0,label:"Father's name",value:e.fatherName,onChange:e=>eD(e.target.value,a,"fatherName"),InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:account-outline"})})}})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,r.jsx)(d.Z,{children:(0,r.jsx)(H(),{showYearDropdown:!0,showMonthDropdown:!0,popperPlacement:"bottom-start",selected:e.birthday,onChange:e=>eD(e,a,"birthday"),dateFormat:"dd/MM/yyyy",placeholderText:"DD/MM/YYYY",customInput:(0,r.jsx)(el,{fullWidth:!0,label:"Date of birthday",InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:calendar-month"})})}})})})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(N.Z,{id:"country-label",children:"Country"}),(0,r.jsxs)(S.Z,{label:"Country",id:"country",labelId:"country-label",value:e.country,onChange:e=>eD(e.target.value,a,"country"),children:[(0,r.jsx)(j.Z,{value:"_",children:"Please select"}),ee.map((e,a)=>(0,r.jsx)(j.Z,{value:e.abbreviation,children:e.name},a))]})]})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,r.jsx)(U(),{mask:"(+44) 999 999 9999",maskChar:"_",value:e.phone,onChange:e=>eD(e.target.value,a,"phone"),children:()=>(0,r.jsx)(g.Z,{fullWidth:!0,label:"Phone number",InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:phone"})})}})})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(N.Z,{id:"prev-nationality-label",children:"Previous Nationally"}),(0,r.jsxs)(S.Z,{label:"Previous Nationality",id:"prev-nationality",labelId:"prev-nationlity-label",value:e.prevNationality,onChange:e=>eD(e.target.value,a,"prevNationality"),children:[(0,r.jsx)(j.Z,{value:"_",children:"Please select"}),ee.map((e,a)=>(0,r.jsx)(j.Z,{value:e.abbreviation,children:e.name},a))]})]})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,r.jsx)(g.Z,{fullWidth:!0,label:"Email",value:e.email,onChange:e=>eD(e.target.value,a,"email"),InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:email-outline"})})}})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(N.Z,{id:"type-of-visa-label",children:"Type of Visa"}),(0,r.jsxs)(S.Z,{label:"Type of Visa",id:"type-of-visa",labelId:"type-of-visa-label",value:e.visaType,onChange:e=>eD(e.target.value,a,"visaType"),children:[(0,r.jsx)(j.Z,{value:"_",children:"Please select"}),en.map((e,a)=>(0,r.jsx)(j.Z,{value:e.visaType._id,children:e.visaType.name},a))]})]})}),(0,r.jsx)(i.ZP,{item:!0,md:6,sm:6,xs:12,sx:{mb:3},children:(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(N.Z,{id:"type-of-travel-label",children:"Type of Travel Document"}),(0,r.jsxs)(S.Z,{label:"Type of Travel Document",id:"type-of-travel",labelId:"type-of-travel-label",value:e.travelType,onChange:e=>eD(e.target.value,a,"travelType"),children:[(0,r.jsx)(j.Z,{value:"_",children:"Please select"}),ec.map((e,a)=>(0,r.jsx)(j.Z,{value:e._id,children:e.name},a))]})]})}),(0,r.jsx)(i.ZP,{item:!0,md:6,sm:6,xs:12,sx:{mb:3},children:(0,r.jsx)(g.Z,{fullWidth:!0,label:"Passport Number",value:e.passportNumber,onChange:e=>eD(e.target.value,a,"passportNumber"),InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:passport"})})}})}),(0,r.jsx)(i.ZP,{item:!0,md:6,sm:6,xs:12,sx:{mb:3},children:(0,r.jsx)(H(),{showYearDropdown:!0,showMonthDropdown:!0,selected:e.issuedDate,id:"issued-date-input",popperPlacement:"bottom-start",dateFormat:"dd/MM/yyyy",placeholderText:"DD/MM/YYYY",onChange:e=>eD(e,a,"issuedDate"),customInput:(0,r.jsx)(el,{fullWidth:!0,label:"Issued Date",InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:calendar-month"})})}})})}),(0,r.jsx)(i.ZP,{item:!0,md:6,xs:12,sx:{mb:3},children:(0,r.jsx)(H(),{showYearDropdown:!0,showMonthDropdown:!0,selected:e.expireDate,id:"expire-date-input",popperPlacement:"bottom-start",dateFormat:"dd/MM/yyyy",placeholderText:"DD/MM/YYYY",onChange:e=>eD(e,a,"expireDate"),customInput:(0,r.jsx)(el,{fullWidth:!0,label:"Expire Date",InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:calendar-month"})})}})})}),(0,r.jsx)(i.ZP,{item:!0,md:12,children:(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"row"},children:[(0,r.jsx)(eo(),{style:{width:175,height:175,background:"#282a42",borderRadius:5,marginRight:20},deleteIcon:(0,r.jsx)(u.Z,{icon:"mdi:delete-circle"}),uploadIcon:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(u.Z,{icon:"mdi:camera",style:{width:50,height:50}}),(0,r.jsx)("span",{style:{fontSize:12},children:"personal Photo"})]}),onFileAdded:e=>eD(e,a,"personalPhoto",!0),onFileRemoved:e=>eD(e,a,"personalPhoto",!1)}),(0,r.jsx)(eo(),{style:{width:225,height:175,background:"#282a42",borderRadius:5,marginRight:20},deleteIcon:(0,r.jsx)(u.Z,{icon:"mdi:delete-circle"}),uploadIcon:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(u.Z,{icon:"mdi:camera",style:{width:50,height:50}}),(0,r.jsx)("span",{style:{fontSize:12},children:"Passport Photo"})]}),onFileAdded:e=>eD(e,a,"passportPhoto",!0),onFileRemoved:e=>eD(e,a,"passportPhoto",!0)}),(0,r.jsx)(d.Z,{sx:{flex:1},children:(0,r.jsx)(g.Z,{fullWidth:!0,multiline:!0,rows:6,label:"Note",onChange:e=>eD(e.target.value,a,"note")})})]})}),0!==a&&(0,r.jsx)(i.ZP,{item:!0,md:12,children:(0,r.jsx)(k.Z,{color:"error",startIcon:(0,r.jsx)(u.Z,{icon:"mdi:delete"}),sx:{float:"right"},onClick:()=>eI(a),children:"Remove Person"})})]},a))})})})}),(0,r.jsx)(D.Z,{children:(0,r.jsxs)(d.Z,{sx:{flex:1,pt:4,pb:3,display:"flex",justifyContent:"space-between"},children:[(0,r.jsx)(k.Z,{type:"button",variant:"contained",size:"large",startIcon:(0,r.jsx)(u.Z,{icon:"mdi:plus"}),sx:{mr:4},onClick:eA,children:"Person"}),(0,r.jsx)(k.Z,{type:"button",variant:"contained",size:"large",startIcon:(0,r.jsx)(u.Z,{icon:"mdi:upload"}),onClick:eT,children:"Submit"})]})})]}),(0,r.jsxs)(_.Z,{fullWidth:!0,maxWidth:"md",onClose(){eu(!1)},open:eh,children:[(0,r.jsxs)(C.Z,{children:["Application Detail",(0,r.jsx)(y.Z,{onClick:()=>eu(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,r.jsx)(u.Z,{icon:"mdi:close"})})]}),(0,r.jsx)(w.Z,{children:(0,r.jsx)(es,{ref:s,style:{height:"calc(100vh - 300px)"},children:(0,r.jsx)(z,{children:(0,r.jsx)(i.ZP,{container:!0,spacing:5,children:Object.keys(ep).length?ep.persons.map((e,a)=>{var t;return(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,r.jsx)(g.Z,{fullWidth:!0,label:"First name",placeholder:"Denys",value:e.firstName,readOnly:!0,InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:account-outline"})})}})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,r.jsx)(g.Z,{fullWidth:!0,label:"Last name",placeholder:"Lavrynenko",value:e.lastName,readOnly:!0,InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:account-outline"})})}})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,r.jsx)(g.Z,{fullWidth:!0,label:"Father's name",placeholder:"Alexander",value:e.fatherName,readOnly:!0,InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:account-outline"})})}})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,r.jsx)(d.Z,{children:(0,r.jsx)(H(),{showYearDropdown:!0,showMonthDropdown:!0,popperPlacement:"bottom-start",selected:new Date(e.birthday),readOnly:!0,placeholderText:"DD/MM/YYYY",customInput:(0,r.jsx)(el,{fullWidth:!0,label:"Date of birthday",InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:calendar-month"})})}})})})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(N.Z,{id:"country-label",children:"Country"}),(0,r.jsx)(S.Z,{label:"Country",id:"country",labelId:"country-label",value:e.country,readOnly:!0,children:ee.map((e,a)=>(0,r.jsx)(j.Z,{value:e.abbreviation,children:e.name},a))})]})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,r.jsx)(U(),{mask:"(+44) 999 999 9999",maskChar:"_",value:e.phone,readOnly:!0,children:()=>(0,r.jsx)(g.Z,{fullWidth:!0,label:"Phone number",InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:phone"})})}})})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(N.Z,{id:"prev-nationality-label",children:"Previous Nationally"}),(0,r.jsx)(S.Z,{label:"Previous Nationality",id:"prev-nationality",labelId:"prev-nationlity-label",value:e.prevNationality,readOnly:!0,children:ee.map((e,a)=>(0,r.jsx)(j.Z,{value:e.abbreviation,children:e.name},a))})]})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,r.jsx)(g.Z,{fullWidth:!0,label:"Email",placeholder:"denys.lavrynenko@gmail.com",value:e.email,readOnly:!0,InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:email-outline"})})}})}),(0,r.jsx)(i.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(N.Z,{id:"type-of-visa-label",children:"Type of Visa"}),(0,r.jsx)(S.Z,{label:"Type of Visa",id:"type-of-visa",labelId:"type-of-visa-label",value:e.visaType,readOnly:!0,children:en.map((e,a)=>(0,r.jsx)(j.Z,{value:e.visaType._id,children:e.visaType.name},a))})]})}),(0,r.jsx)(i.ZP,{item:!0,md:6,sm:6,xs:12,sx:{mb:3},children:(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(N.Z,{id:"type-of-travel-label",children:"Type of Travel Document"}),(0,r.jsx)(S.Z,{label:"Type of Travel Document",id:"type-of-travel",labelId:"type-of-travel-label",value:e.travelType,readOnly:!0,children:ec.map((e,a)=>(0,r.jsx)(j.Z,{value:e._id,children:e.name},a))})]})}),(0,r.jsx)(i.ZP,{item:!0,md:6,sm:6,xs:12,sx:{mb:3},children:(0,r.jsx)(g.Z,{fullWidth:!0,label:"Passport Number",placeholder:"7700225VH",value:e.passportNumber,readOnly:!0,InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:passport"})})}})}),(0,r.jsx)(i.ZP,{item:!0,md:6,sm:6,xs:12,sx:{mb:3},children:(0,r.jsx)(H(),{showYearDropdown:!0,showMonthDropdown:!0,selected:new Date(e.issuedDate),readOnly:!0,id:"issued-date-input",popperPlacement:"bottom-start",placeholderText:"MM/DD/YYYY",customInput:(0,r.jsx)(el,{fullWidth:!0,label:"Issued Date",InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:calendar-month"})})}})})}),(0,r.jsx)(i.ZP,{item:!0,md:6,xs:12,sx:{mb:3},children:(0,r.jsx)(H(),{showYearDropdown:!0,showMonthDropdown:!0,selected:new Date(e.expireDate),readOnly:!0,id:"expire-date-input",popperPlacement:"bottom-start",placeholderText:"MM/DD/YYYY",customInput:(0,r.jsx)(el,{fullWidth:!0,label:"Expire Date",InputProps:{startAdornment:(0,r.jsx)(I.Z,{position:"start",children:(0,r.jsx)(u.Z,{icon:"mdi:calendar-month"})})}})})}),(0,r.jsx)(i.ZP,{item:!0,md:12,children:(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"row"},children:[(0,r.jsx)(d.Z,{sx:{borderRadius:1,marginRight:4,flexBasis:170,height:175,padding:1,border:"2px solid #585b75",overflow:"hidden"},children:(0,r.jsx)("img",{src:"".concat("/uploads","/personal_photos/").concat(e.personalPhoto),alt:"personal_photo",style:{width:"100%",height:"100%",borderRadius:5}})}),(0,r.jsx)(d.Z,{sx:{borderRadius:1,marginRight:4,flexBasis:215,height:175,padding:1,border:"2px solid #585b75",overflow:"hidden"},children:(0,r.jsx)("img",{src:"".concat("/uploads","/passport_photos/").concat(e.passportPhoto),alt:"passport_photo",style:{width:"100%",height:"100%",borderRadius:5}})}),(0,r.jsx)(g.Z,{sx:{flex:1},fullWidth:!0,multiline:!0,readOnly:!0,rows:6,label:"Note",value:null!==(t=e.note)&&void 0!==t?t:""})]})})]},a)}):null})})})}),(0,r.jsx)(D.Z,{children:(0,r.jsx)(d.Z,{sx:{flex:1,pt:0,pb:3,display:"flex",justifyContent:"flex-end"},children:(0,r.jsx)(k.Z,{type:"button",variant:"contained",size:"large",startIcon:(0,r.jsx)(u.Z,{icon:"mdi:close"}),onClick:()=>eu(!1),children:"Close"})})})]}),(0,r.jsxs)(_.Z,{fullWidth:!0,maxWidth:"sm",onClose:()=>F(!1),open:O,children:[(0,r.jsxs)(C.Z,{children:["View Note",(0,r.jsx)(y.Z,{onClick:()=>F(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,r.jsx)(u.Z,{icon:"mdi:close"})})]}),(0,r.jsx)(w.Z,{sx:{px:6},children:(0,r.jsx)(P.Z,{fullWidth:!0,sx:{mt:2,mb:0},children:(0,r.jsx)(g.Z,{multiline:!0,readOnly:!0,rows:4,value:ep.note,label:"Note"})})}),(0,r.jsxs)(D.Z,{sx:{justifyContent:ep.attach?"space-between":"flex-end"},children:[ep.attach&&(0,r.jsxs)(k.Z,{variant:"contained",href:"".concat("/uploads","/attachments/").concat(ep.attach),download:!0,target:"_blank",children:[(0,r.jsx)(u.Z,{icon:"mdi:download"})," Attachment"]}),(0,r.jsxs)(k.Z,{variant:"contained",color:"error",onClick:()=>F(!1),children:[(0,r.jsx)(u.Z,{icon:"mdi:close"})," Close"]})]})]})]})},em=()=>{let{user:e}=(0,T.a)(),[a,t]=(0,n.useState)([]),[u,x]=(0,n.useState)("1");(0,n.useEffect)(()=>{let e=async()=>{let{data:e}=await v.Z.get("crms/staffs",{params:{search:!0}});t(e)};e()},[]);let g=(e,a)=>{x(a)};return(0,r.jsx)(i.ZP,{container:!0,spacing:6,children:(0,r.jsx)(i.ZP,{item:!0,xs:12,children:(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(s.Z,{title:(0,r.jsxs)(l.Z,{variant:"h5",children:["Application Management","agent"===e.role&&(0,r.jsx)(d.Z,{sx:{float:"right"},children:(0,r.jsxs)(l.Z,{variant:"h6",children:["Credit: $",e.balance]})})]})}),(0,r.jsx)(c.Z,{children:"agent"!==e.role?(0,r.jsxs)(p.ZP,{value:u,children:[(0,r.jsxs)(b.Z,{variant:"fullWidth",onChange:g,children:[(0,r.jsx)(m.Z,{value:"1",label:"Applications by global user"}),(0,r.jsx)(m.Z,{value:"2",label:"Applications by agent"})]}),(0,r.jsx)(h.Z,{value:"1",children:(0,r.jsx)(en,{staffs:a})}),(0,r.jsx)(h.Z,{value:"2",children:(0,r.jsx)(ec,{staffs:a})})]}):(0,r.jsx)(ec,{staff:a})})]})})})};em.getLayout=e=>(0,r.jsx)(x.Z,{children:e});var ep=em},33504:function(e){"use strict";e.exports=JSON.parse('[{"name":"Afghanistan","abbreviation":"AF"},{"name":"Albania","abbreviation":"AL"},{"name":"Algeria","abbreviation":"DZ"},{"name":"American Samoa","abbreviation":"AS"},{"name":"Andorra","abbreviation":"AD"},{"name":"Angola","abbreviation":"AO"},{"name":"Anguilla","abbreviation":"AI"},{"name":"Antarctica","abbreviation":"AQ"},{"name":"Antigua and Barbuda","abbreviation":"AG"},{"name":"Argentina","abbreviation":"AR"},{"name":"Armenia","abbreviation":"AM"},{"name":"Aruba","abbreviation":"AW"},{"name":"Australia","abbreviation":"AU"},{"name":"Austria","abbreviation":"AT"},{"name":"Azerbaijan","abbreviation":"AZ"},{"name":"Bahamas","abbreviation":"BS"},{"name":"Bahrain","abbreviation":"BH"},{"name":"Bangladesh","abbreviation":"BD"},{"name":"Barbados","abbreviation":"BB"},{"name":"Belarus","abbreviation":"BY"},{"name":"Belgium","abbreviation":"BE"},{"name":"Belize","abbreviation":"BZ"},{"name":"Benin","abbreviation":"BJ"},{"name":"Bermuda","abbreviation":"BM"},{"name":"Bhutan","abbreviation":"BT"},{"name":"Bolivia","abbreviation":"BO"},{"name":"Bosnia and Herzegovina","abbreviation":"BA"},{"name":"Botswana","abbreviation":"BW"},{"name":"Bouvet Island","abbreviation":"BV"},{"name":"Brazil","abbreviation":"BR"},{"name":"British Indian Ocean Territory","abbreviation":"IO"},{"name":"Brunei","abbreviation":"BN"},{"name":"Bulgaria","abbreviation":"BG"},{"name":"Burkina Faso","abbreviation":"BF"},{"name":"Burundi","abbreviation":"BI"},{"name":"Cambodia","abbreviation":"KH"},{"name":"Cameroon","abbreviation":"CM"},{"name":"Canada","abbreviation":"CA"},{"name":"Cape Verde","abbreviation":"CV"},{"name":"Cayman Islands","abbreviation":"KY"},{"name":"Central African Republic","abbreviation":"CF"},{"name":"Chad","abbreviation":"TD"},{"name":"Chile","abbreviation":"CL"},{"name":"China","abbreviation":"CN"},{"name":"Christmas Island","abbreviation":"CX"},{"name":"Cocos (Keeling) Islands","abbreviation":"CC"},{"name":"Colombia","abbreviation":"CO"},{"name":"Comoros","abbreviation":"KM"},{"name":"Congo","abbreviation":"CG"},{"name":"Cook Islands","abbreviation":"CK"},{"name":"Costa Rica","abbreviation":"CR"},{"name":"Croatia","abbreviation":"HR"},{"name":"Cuba","abbreviation":"CU"},{"name":"Cyprus","abbreviation":"CY"},{"name":"Czech Republic","abbreviation":"CZ"},{"name":"Denmark","abbreviation":"DK"},{"name":"Djibouti","abbreviation":"DJ"},{"name":"Dominica","abbreviation":"DM"},{"name":"Dominican Republic","abbreviation":"DO"},{"name":"East Timor","abbreviation":"TP"},{"name":"Ecuador","abbreviation":"EC"},{"name":"Egypt","abbreviation":"EG"},{"name":"El Salvador","abbreviation":"SV"},{"name":"Equatorial Guinea","abbreviation":"GQ"},{"name":"Eritrea","abbreviation":"ER"},{"name":"Estonia","abbreviation":"EE"},{"name":"Ethiopia","abbreviation":"ET"},{"name":"Falkland Islands","abbreviation":"FK"},{"name":"Faroe Islands","abbreviation":"FO"},{"name":"Fiji Islands","abbreviation":"FJ"},{"name":"Finland","abbreviation":"FI"},{"name":"France","abbreviation":"FR"},{"name":"French Guiana","abbreviation":"GF"},{"name":"French Polynesia","abbreviation":"PF"},{"name":"French Southern territories","abbreviation":"TF"},{"name":"Gabon","abbreviation":"GA"},{"name":"Gambia","abbreviation":"GM"},{"name":"Georgia","abbreviation":"GE"},{"name":"Germany","abbreviation":"DE"},{"name":"Ghana","abbreviation":"GH"},{"name":"Gibraltar","abbreviation":"GI"},{"name":"Greece","abbreviation":"GR"},{"name":"Greenland","abbreviation":"GL"},{"name":"Grenada","abbreviation":"GD"},{"name":"Guadeloupe","abbreviation":"GP"},{"name":"Guam","abbreviation":"GU"},{"name":"Guatemala","abbreviation":"GT"},{"name":"Guernsey","abbreviation":"GG"},{"name":"Guinea","abbreviation":"GN"},{"name":"Guinea-Bissau","abbreviation":"GW"},{"name":"Guyana","abbreviation":"GY"},{"name":"Haiti","abbreviation":"HT"},{"name":"Heard Island and McDonald Islands","abbreviation":"HM"},{"name":"Holy See (Vatican City State)","abbreviation":"VA"},{"name":"Honduras","abbreviation":"HN"},{"name":"Hong Kong","abbreviation":"HK"},{"name":"Hungary","abbreviation":"HU"},{"name":"Iceland","abbreviation":"IS"},{"name":"India","abbreviation":"IN"},{"name":"Indonesia","abbreviation":"ID"},{"name":"Iran","abbreviation":"IR"},{"name":"Iraq","abbreviation":"IQ"},{"name":"Ireland","abbreviation":"IE"},{"name":"Isle of Man","abbreviation":"IM"},{"name":"Israel","abbreviation":"IL"},{"name":"Italy","abbreviation":"IT"},{"name":"Ivory Coast","abbreviation":"CI"},{"name":"Jamaica","abbreviation":"JM"},{"name":"Japan","abbreviation":"JP"},{"name":"Jersey","abbreviation":"JE"},{"name":"Jordan","abbreviation":"JO"},{"name":"Kazakhstan","abbreviation":"KZ"},{"name":"Kenya","abbreviation":"KE"},{"name":"Kiribati","abbreviation":"KI"},{"name":"Kuwait","abbreviation":"KW"},{"name":"Kyrgyzstan","abbreviation":"KG"},{"name":"Laos","abbreviation":"LA"},{"name":"Latvia","abbreviation":"LV"},{"name":"Lebanon","abbreviation":"LB"},{"name":"Lesotho","abbreviation":"LS"},{"name":"Liberia","abbreviation":"LR"},{"name":"Libyan Arab Jamahiriya","abbreviation":"LY"},{"name":"Liechtenstein","abbreviation":"LI"},{"name":"Lithuania","abbreviation":"LT"},{"name":"Luxembourg","abbreviation":"LU"},{"name":"Macao","abbreviation":"MO"},{"name":"North Macedonia","abbreviation":"MK"},{"name":"Madagascar","abbreviation":"MG"},{"name":"Malawi","abbreviation":"MW"},{"name":"Malaysia","abbreviation":"MY"},{"name":"Maldives","abbreviation":"MV"},{"name":"Mali","abbreviation":"ML"},{"name":"Malta","abbreviation":"MT"},{"name":"Marshall Islands","abbreviation":"MH"},{"name":"Martinique","abbreviation":"MQ"},{"name":"Mauritania","abbreviation":"MR"},{"name":"Mauritius","abbreviation":"MU"},{"name":"Mayotte","abbreviation":"YT"},{"name":"Mexico","abbreviation":"MX"},{"name":"Micronesia, Federated States of","abbreviation":"FM"},{"name":"Moldova","abbreviation":"MD"},{"name":"Monaco","abbreviation":"MC"},{"name":"Mongolia","abbreviation":"MN"},{"name":"Montenegro","abbreviation":"ME"},{"name":"Montserrat","abbreviation":"MS"},{"name":"Morocco","abbreviation":"MA"},{"name":"Mozambique","abbreviation":"MZ"},{"name":"Myanmar","abbreviation":"MM"},{"name":"Namibia","abbreviation":"NA"},{"name":"Nauru","abbreviation":"NR"},{"name":"Nepal","abbreviation":"NP"},{"name":"Netherlands","abbreviation":"NL"},{"name":"Netherlands Antilles","abbreviation":"AN"},{"name":"New Caledonia","abbreviation":"NC"},{"name":"New Zealand","abbreviation":"NZ"},{"name":"Nicaragua","abbreviation":"NI"},{"name":"Niger","abbreviation":"NE"},{"name":"Nigeria","abbreviation":"NG"},{"name":"Niue","abbreviation":"NU"},{"name":"Norfolk Island","abbreviation":"NF"},{"name":"North Korea","abbreviation":"KP"},{"name":"Northern Ireland","abbreviation":"GB"},{"name":"Northern Mariana Islands","abbreviation":"MP"},{"name":"Norway","abbreviation":"NO"},{"name":"Oman","abbreviation":"OM"},{"name":"Pakistan","abbreviation":"PK"},{"name":"Palau","abbreviation":"PW"},{"name":"Palestine","abbreviation":"PS"},{"name":"Panama","abbreviation":"PA"},{"name":"Papua New Guinea","abbreviation":"PG"},{"name":"Paraguay","abbreviation":"PY"},{"name":"Peru","abbreviation":"PE"},{"name":"Philippines","abbreviation":"PH"},{"name":"Pitcairn","abbreviation":"PN"},{"name":"Poland","abbreviation":"PL"},{"name":"Portugal","abbreviation":"PT"},{"name":"Puerto Rico","abbreviation":"PR"},{"name":"Qatar","abbreviation":"QA"},{"name":"Reunion","abbreviation":"RE"},{"name":"Romania","abbreviation":"RO"},{"name":"Russian Federation","abbreviation":"RU"},{"name":"Rwanda","abbreviation":"RW"},{"name":"Saint Helena","abbreviation":"SH"},{"name":"Saint Kitts and Nevis","abbreviation":"KN"},{"name":"Saint Lucia","abbreviation":"LC"},{"name":"Saint Pierre and Miquelon","abbreviation":"PM"},{"name":"Saint Vincent and the Grenadines","abbreviation":"VC"},{"name":"Samoa","abbreviation":"WS"},{"name":"San Marino","abbreviation":"SM"},{"name":"Sao Tome and Principe","abbreviation":"ST"},{"name":"Saudi Arabia","abbreviation":"SA"},{"name":"Senegal","abbreviation":"SN"},{"name":"Serbia","abbreviation":"RS"},{"name":"Seychelles","abbreviation":"SC"},{"name":"Sierra Leone","abbreviation":"SL"},{"name":"Singapore","abbreviation":"SG"},{"name":"Slovakia","abbreviation":"SK"},{"name":"Slovenia","abbreviation":"SI"},{"name":"Solomon Islands","abbreviation":"SB"},{"name":"Somalia","abbreviation":"SO"},{"name":"South Africa","abbreviation":"ZA"},{"name":"South Georgia and the South Sandwich Islands","abbreviation":"GS"},{"name":"South Korea","abbreviation":"KR"},{"name":"South Sudan","abbreviation":"SS"},{"name":"Spain","abbreviation":"ES"},{"name":"Sri Lanka","abbreviation":"LK"},{"name":"Sudan","abbreviation":"SD"},{"name":"Suriname","abbreviation":"SR"},{"name":"Svalbard and Jan Mayen","abbreviation":"SJ"},{"name":"Swaziland","abbreviation":"SZ"},{"name":"Sweden","abbreviation":"SE"},{"name":"Switzerland","abbreviation":"CH"},{"name":"Syria","abbreviation":"SY"},{"name":"Tajikistan","abbreviation":"TJ"},{"name":"Tanzania","abbreviation":"TZ"},{"name":"Thailand","abbreviation":"TH"},{"name":"The Democratic Republic of Congo","abbreviation":"CD"},{"name":"Timor-Leste","abbreviation":"TL"},{"name":"Togo","abbreviation":"TG"},{"name":"Tokelau","abbreviation":"TK"},{"name":"Tonga","abbreviation":"TO"},{"name":"Trinidad and Tobago","abbreviation":"TT"},{"name":"Tunisia","abbreviation":"TN"},{"name":"Turkey","abbreviation":"TR"},{"name":"Turkmenistan","abbreviation":"TM"},{"name":"Turks and Caicos Islands","abbreviation":"TC"},{"name":"Tuvalu","abbreviation":"TV"},{"name":"Uganda","abbreviation":"UG"},{"name":"Ukraine","abbreviation":"UA"},{"name":"United Arab Emirates","abbreviation":"AE"},{"name":"United Kingdom","abbreviation":"UK"},{"name":"United States","abbreviation":"US"},{"name":"United States Minor Outlying Islands","abbreviation":"UM"},{"name":"Uruguay","abbreviation":"UY"},{"name":"Uzbekistan","abbreviation":"UZ"},{"name":"Vanuatu","abbreviation":"VU"},{"name":"Venezuela","abbreviation":"VE"},{"name":"Vietnam","abbreviation":"VN"},{"name":"Virgin Islands, British","abbreviation":"VG"},{"name":"Virgin Islands, U.S.","abbreviation":"VI"},{"name":"Wallis and Futuna","abbreviation":"WF"},{"name":"Western Sahara","abbreviation":"EH"},{"name":"Yemen","abbreviation":"YE"},{"name":"Zambia","abbreviation":"ZM"},{"name":"Zimbabwe","abbreviation":"ZW"}]')}},function(e){e.O(0,[885,284,480,710,540,72,194,330,323,169,733,459,1,177,297,507,314,774,888,179],function(){return e(e.s=80198)}),_N_E=e.O()}]);