(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8229],{61431:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/crms/item",function(){return s(47662)}])},47662:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return T}});var r=s(85893),t=s(67294),i=s(80562),a=s(73812),l=s(31538),o=s(29630),c=s(79072),d=s(49837),m=s(59742),x=s(61953),u=s(75084),h=s(91359),p=s(1890),j=s(77745),Z=s(95398),f=s(55343),g=s(67836),y=s(32631),C=s(5464),v=s(21609),b=s(98966),S=s(74231),P=s(47533),_=s(87536),w=s(86501);let k=e=>{let{row:n,editOccupation:s,deleteOccupation:o}=e,[c,d]=(0,t.useState)(null),m=Boolean(c),x=e=>{e.stopPropagation(),d(e.currentTarget)},u=()=>{d(null)},h=()=>{s(n),u()},p=()=>{o(n._id),u()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{size:"small",onClick:x,children:(0,r.jsx)(v.Z,{icon:"mdi:dots-vertical"})}),(0,r.jsxs)(a.Z,{keepMounted:!0,anchorEl:c,open:m,onClose:u,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{minWidth:"8rem"}},children:[(0,r.jsxs)(l.Z,{onClick:h,sx:{"& svg":{mr:2}},children:[(0,r.jsx)(v.Z,{icon:"mdi:pencil-outline",fontSize:20}),"Edit"]}),(0,r.jsxs)(l.Z,{onClick:p,sx:{"& svg":{mr:2}},children:[(0,r.jsx)(v.Z,{icon:"mdi:delete-outline",fontSize:20}),"Delete"]})]})]})},z=()=>{let[e,n]=(0,t.useState)([]),[s,a]=(0,t.useState)(!1),[l,z]=(0,t.useState)(10),[N,I]=(0,t.useState)(!1),[O,T]=(0,t.useState)(!1),[W,E]=(0,t.useState)(0),X={name:""},B=S.Ry().shape({name:S.Z_().required("Name is required field.")}),{reset:R,control:q,handleSubmit:A,formState:{errors:D}}=(0,_.cI)({defaultValues:X,mode:"onChange",resolver:(0,P.X)(B)}),{reset:F,control:H,handleSubmit:M,formState:{errors:Q}}=(0,_.cI)({defaultValues:X,mode:"onChange",resolver:(0,P.X)(B)});(0,t.useEffect)(()=>{(async()=>{let{data:e}=await C.Z.get("crms/occupations");n(e)})()},[s,l]);let G=e=>{E(e._id),F({name:e.name}),T(!0)},L=async e=>{let{data:n}=await C.Z.post("crms/occupations",e);n.status?(R(X),I(!1),a(!s),w.ZP.success(n.msg)):w.ZP.error(n.msg)},U=async e=>{let{data:n}=await C.Z.put("crms/occupations/".concat(W),e);n.status?(F(X),T(!1),a(!s),w.ZP.success(n.msg)):w.ZP.error(n.msg)},J=async e=>{let{data:n}=await C.Z.delete("crms/occupations/".concat(e));n.status?(a(!s),w.ZP.success(n.msg)):w.ZP.error(n.msg)};return(0,r.jsxs)(c.ZP,{container:!0,spacing:6,children:[(0,r.jsx)(c.ZP,{item:!0,md:12,sm:12,children:(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(m.Z,{title:(0,r.jsxs)(x.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(o.Z,{variant:"h5",children:"Occupation Types"}),(0,r.jsx)(x.Z,{sx:{pl:0,pr:0,pt:0,pb:0,display:"flex",flex:1,flexWrap:"wrap",alignItems:"center",justifyContent:"flex-end"},children:(0,r.jsx)(x.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center"},children:(0,r.jsxs)(u.Z,{sx:{mb:2},onClick:()=>I(!0),variant:"contained",children:[(0,r.jsx)(v.Z,{icon:"mdi:plus"})," Add Type"]})})})]})}),(0,r.jsx)(h.Z,{children:(0,r.jsx)(b._,{autoHeight:!0,getRowId:e=>e._id,rows:e,columns:[{flex:2,field:"name",headerName:"Occupation Type",renderCell(e){let{row:n}=e;return(0,r.jsx)(o.Z,{noWrap:!0,children:n.name})}},{flex:.5,field:"actions",headerName:"Actions",renderCell(e){let{row:n}=e;return(0,r.jsx)(k,{row:n,editOccupation:G,deleteOccupation:J})}}],pageSize:l,sx:{"& .MuiDataGrid-columnHeaders":{borderRadius:0}},onPageSizeChange:e=>z(e)})})]})}),(0,r.jsxs)(p.Z,{fullWidth:!0,maxWidth:"sm",onClose:()=>I(!1),open:N,children:[(0,r.jsxs)(j.Z,{children:["New Occupation Type",(0,r.jsx)(i.Z,{onClick:()=>I(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,r.jsx)(v.Z,{icon:"mdi:close"})})]}),(0,r.jsx)(Z.Z,{sx:{p:6},children:(0,r.jsxs)("form",{onSubmit:A(L),style:{paddingTop:8},children:[(0,r.jsxs)(f.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(_.Qr,{name:"name",control:q,render(e){let{field:{value:n,onChange:s}}=e;return(0,r.jsx)(g.Z,{value:n,label:"Name",onChange:s,error:Boolean(D.name)})}}),D.name&&(0,r.jsx)(y.Z,{sx:{color:"error.main"},children:D.name.message})]}),(0,r.jsxs)(x.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,r.jsx)(u.Z,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:(0,r.jsx)(v.Z,{icon:"mdi:content-save"}),sx:{mr:4},children:"Save"}),(0,r.jsx)(u.Z,{variant:"contained",color:"error",size:"large",startIcon:(0,r.jsx)(v.Z,{icon:"mdi:delete"}),onClick:()=>I(!1),children:"Cancel"})]})]})})]}),(0,r.jsxs)(p.Z,{fullWidth:!0,maxWidth:"sm",onClose:()=>T(!1),open:O,children:[(0,r.jsxs)(j.Z,{children:["Edit Occupation Type",(0,r.jsx)(i.Z,{onClick:()=>T(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,r.jsx)(v.Z,{icon:"mdi:close"})})]}),(0,r.jsx)(Z.Z,{sx:{p:6},children:(0,r.jsxs)("form",{onSubmit:M(U),style:{paddingTop:8},children:[(0,r.jsxs)(f.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(_.Qr,{name:"name",control:H,render(e){let{field:{value:n,onChange:s}}=e;return(0,r.jsx)(g.Z,{value:n,label:"Name",onChange:s,error:Boolean(Q.name)})}}),Q.name&&(0,r.jsx)(y.Z,{sx:{color:"error.main"},children:Q.name.message})]}),(0,r.jsxs)(x.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,r.jsx)(u.Z,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:(0,r.jsx)(v.Z,{icon:"mdi:content-save"}),sx:{mr:4},children:"Update"}),(0,r.jsx)(u.Z,{variant:"contained",color:"error",size:"large",startIcon:(0,r.jsx)(v.Z,{icon:"mdi:delete"}),onClick:()=>T(!1),children:"Cancel"})]})]})})]})]})};var N=s(15472),I=s(94314);let O=()=>(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(c.ZP,{container:!0,spacing:6,children:[(0,r.jsx)(c.ZP,{item:!0,md:6,sm:12,children:(0,r.jsx)(z,{})}),(0,r.jsx)(c.ZP,{item:!0,md:6,sm:12,children:(0,r.jsx)(N.Z,{})})]})});O.getLayout=e=>(0,r.jsx)(I.Z,{children:e});var T=O}},function(e){e.O(0,[6284,9799,4583,8515,3344,7836,9072,9491,9317,7985,4314,5472,9774,2888,179],function(){return e(e.s=61431)}),_N_E=e.O()}]);