(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[643],{30417:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/crms/profile",function(){return s(21983)}])},21983:function(e,r,s){"use strict";s.r(r);var n=s(85893),a=s(67294),i=s(79072),l=s(49837),o=s(59742),t=s(91359),d=s(55343),m=s(67836),c=s(32631),u=s(61953),h=s(75084),x=s(74231),f=s(86501),w=s(87536),Z=s(47533),j=s(21609),P=s(76627),p=s.n(P),g=s(17288),b=s(5464),N=s(94314);let _=()=>{let{user:e}=(0,g.a)(),r=x.Ry().shape({firstName:x.Z_().required("First name is required field."),lastName:x.Z_().required("Last name is required field."),email:x.Z_().email("Email is invalid.").required("Email is required field."),phone:x.Z_().min(10,"Phone number must be 10 digits.").required("Phone number is required field.")}),{reset:s,control:P,handleSubmit:N,formState:{errors:_}}=(0,w.cI)({defaultValues:{firstName:"",lastName:"",email:"",phone:""},mode:"onChange",resolver:(0,Z.X)(r)}),C=x.Ry().shape({currentPassword:x.Z_().required("Current password is required field."),newPassword:x.Z_().min(8,"Password must be at least 8 characters.").required("New password is required field."),confirmPassword:x.Z_().test("password-match","Passwors must match",function(e){return this.parent.newPassword===e}).required("Confirm password is required field.")}),{reset:y,control:v,handleSubmit:q,formState:{errors:E}}=(0,w.cI)({defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""},mode:"onChange",resolver:(0,Z.X)(C)});(0,a.useEffect)(()=>{s(e)},[]);let B=async r=>{let{data:s}=await b.Z.put("crms/auth/profile/".concat(e._id),{firstName:r.firstName,lastName:r.lastName,email:r.email,phone:r.phone});s.status?f.ZP.success(s.msg):f.ZP.error(s.msg)},Q=async r=>{let{data:s}=await b.Z.put("crms/auth/password/".concat(e._id),{currentPassword:r.currentPassword,newPassword:r.newPassword});s.status?(y(),f.ZP.success(s.msg)):f.ZP.error(s.msg)};return(0,n.jsxs)(i.ZP,{container:!0,spacing:6,children:[(0,n.jsx)(i.ZP,{item:!0,md:6,sm:12,children:(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(o.Z,{title:"Update Profile"}),(0,n.jsx)(t.Z,{children:(0,n.jsxs)("form",{onSubmit:N(B),children:[(0,n.jsxs)(d.Z,{fullWidth:!0,sx:{mb:6},children:[(0,n.jsx)(w.Qr,{name:"firstName",control:P,render(e){let{field:{value:r,onChange:s}}=e;return(0,n.jsx)(m.Z,{label:"First Name",value:r,onChange:s,error:Boolean(_.firstName)})}}),_.firstName&&(0,n.jsx)(c.Z,{sx:{color:"error.main"},children:_.firstName.message})]}),(0,n.jsxs)(d.Z,{fullWidth:!0,sx:{mb:6},children:[(0,n.jsx)(w.Qr,{name:"lastName",control:P,render(e){let{field:{value:r,onChange:s}}=e;return(0,n.jsx)(m.Z,{label:"Last Name",value:r,onChange:s,error:Boolean(_.lastName)})}}),_.lastName&&(0,n.jsx)(c.Z,{sx:{color:"error.main"},children:_.lastName.message})]}),(0,n.jsxs)(i.ZP,{container:!0,spacing:6,children:[(0,n.jsx)(i.ZP,{item:!0,md:6,sm:12,children:(0,n.jsxs)(d.Z,{fullWidth:!0,sx:{mb:6},children:[(0,n.jsx)(w.Qr,{name:"email",control:P,render(e){let{field:{value:r,onChange:s}}=e;return(0,n.jsx)(m.Z,{label:"Email",value:r,onChange:s,error:Boolean(_.email)})}}),_.email&&(0,n.jsx)(c.Z,{sx:{color:"error.main"},children:_.email.message})]})}),(0,n.jsx)(i.ZP,{item:!0,md:6,sm:12,children:(0,n.jsxs)(d.Z,{fullWidth:!0,sx:{mb:6},children:[(0,n.jsx)(w.Qr,{name:"phone",control:P,render(e){let{field:{value:r,onChange:s}}=e;return(0,n.jsx)(p(),{mask:"(+44) 999 999 9999",maskChar:"_",value:r,onChange:s,children:()=>(0,n.jsx)(m.Z,{label:"Phone",placeholder:"8316235660",error:Boolean(_.phone)})})}}),_.phone&&(0,n.jsx)(c.Z,{sx:{color:"error.main"},children:_.phone.message})]})})]}),(0,n.jsx)(u.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,n.jsxs)(h.Z,{type:"submit",variant:"contained",size:"large",color:"primary",children:[(0,n.jsx)(j.Z,{icon:"mdi:content-save",style:{marginRight:5}})," Update"]})})]})})]})}),(0,n.jsx)(i.ZP,{item:!0,md:6,sm:12,children:(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(o.Z,{title:"Change Password"}),(0,n.jsx)(t.Z,{children:(0,n.jsxs)("form",{onSubmit:q(Q),children:[(0,n.jsxs)(d.Z,{fullWidth:!0,sx:{mb:6},children:[(0,n.jsx)(w.Qr,{name:"currentPassword",control:v,render(e){let{field:{value:r,onChange:s}}=e;return(0,n.jsx)(m.Z,{type:"password",label:"Current Password",value:r,onChange:s,error:Boolean(E.currentPassword)})}}),E.currentPassword&&(0,n.jsx)(c.Z,{sx:{color:"error.main"},children:E.currentPassword.message})]}),(0,n.jsxs)(d.Z,{fullWidth:!0,sx:{mb:6},children:[(0,n.jsx)(w.Qr,{name:"newPassword",control:v,render(e){let{field:{value:r,onChange:s}}=e;return(0,n.jsx)(m.Z,{type:"password",label:"New Password",value:r,onChange:s,error:Boolean(E.newPassword)})}}),E.newPassword&&(0,n.jsx)(c.Z,{sx:{color:"error.main"},children:E.newPassword.message})]}),(0,n.jsxs)(d.Z,{fullWidth:!0,sx:{mb:6},children:[(0,n.jsx)(w.Qr,{name:"confirmPassword",control:v,render(e){let{field:{value:r,onChange:s}}=e;return(0,n.jsx)(m.Z,{type:"password",label:"Confirm Password",value:r,onChange:s,error:Boolean(E.confirmPassword)})}}),E.confirmPassword&&(0,n.jsx)(c.Z,{sx:{color:"error.main"},children:E.confirmPassword.message})]}),(0,n.jsx)(u.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,n.jsxs)(h.Z,{type:"submit",variant:"contained",size:"large",color:"primary",children:[(0,n.jsx)(j.Z,{icon:"mdi:content-save",style:{marginRight:5}})," Change"]})})]})})]})})]})};_.getLayout=e=>(0,n.jsx)(N.Z,{children:e}),r.default=_}},function(e){e.O(0,[284,480,710,267,72,871,330,323,169,733,975,314,774,888,179],function(){return e(e.s=30417)}),_N_E=e.O()}]);