(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[158],{47386:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/crms/agents",function(){return r(82534)}])},82534:function(e,n,r){"use strict";r.r(n);var t=r(85893),s=r(67294),a=r(80562),l=r(73812),i=r(31538),o=r(29630),u=r(21448),d=r(79072),c=r(49837),m=r(59742),h=r(61953),p=r(67836),f=r(75084),g=r(91359),x=r(1890),v=r(77745),j=r(95398),Z=r(55343),k=r(32631),C=r(40818),b=r(21609),w=r(74231),S=r(47533),N=r(87536),y=r(76627),P=r.n(y),O=r(94314),I=r(5464),q=r(86501);let M=e=>{let{id:n,status:r,permitAgent:o,editAgent:u,deleteAgent:d}=e,[c,m]=(0,s.useState)(null),h=Boolean(c),p=e=>{m(e.currentTarget)},f=()=>{m(null)},g=()=>{o(n,r),f()},x=()=>{u(n),f()},v=()=>{d(n),f()};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Z,{size:"small",onClick:p,children:(0,t.jsx)(b.Z,{icon:"mdi:dots-vertical"})}),(0,t.jsxs)(l.Z,{keepMounted:!0,anchorEl:c,open:h,onClose:f,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{minWidth:"8rem"}},children:[r?(0,t.jsxs)(i.Z,{onClick:g,sx:{"& svg":{mr:2}},children:[(0,t.jsx)(b.Z,{icon:"mdi:account-lock",fontSize:20}),"Pause"]}):(0,t.jsxs)(i.Z,{onClick:g,sx:{"& svg":{mr:2}},children:[(0,t.jsx)(b.Z,{icon:"mdi:account-lock-open",fontSize:20}),"Allow"]}),(0,t.jsxs)(i.Z,{onClick:x,sx:{"& svg":{mr:2}},children:[(0,t.jsx)(b.Z,{icon:"mdi:pencil-outline",fontSize:20}),"Edit"]}),(0,t.jsxs)(i.Z,{onClick:v,sx:{"& svg":{mr:2}},children:[(0,t.jsx)(b.Z,{icon:"mdi:delete-outline",fontSize:20}),"Delete"]})]})]})},E=()=>{let[e,n]=(0,s.useState)(!0),[r,l]=(0,s.useState)(""),[i,y]=(0,s.useState)(10),[O,E]=(0,s.useState)([]),[D,W]=(0,s.useState)(!1),[A,_]=(0,s.useState)(!1),[B,V]=(0,s.useState)(0),L={firstName:"",lastName:"",corpName:"",email:"",phone:"",address:"",balance:100,password:"123456789"},F=w.Ry().shape({firstName:w.Z_().required("First name is required field."),lastName:w.Z_().required("Last name is required field."),corpName:w.Z_().required("Company name is required field."),email:w.Z_().email("Email is invalid.").required("Email is required field."),address:w.Z_().required("Address is required field."),phone:w.Z_().min(10,"Phone number must be 10 digits").required("Phone number is required field."),balance:w.Rx("Credit must be numeric").required("Credit is required field."),password:w.Z_().required("Password is required field.")}),R=w.Ry().shape({firstName:w.Z_().required("First name is required field."),lastName:w.Z_().required("Last name is required field."),corpName:w.Z_().required("Company name is required field."),email:w.Z_().email("Email is invalid.").required("Email is required field."),address:w.Z_().required(10,"Address is required field."),phone:w.Z_().min(10,"Phone number must be 10 digits").required("Phone number is required"),balance:w.Rx("Credit must be numeric").required("Credit is required field.")});(0,s.useEffect)(()=>{let e=async()=>{let{data:e}=await I.Z.get("crms/agents",{params:{search:""}});E(e)};e()},[e,r,i]);let{reset:z,control:T,handleSubmit:Q,formState:{errors:X}}=(0,N.cI)({defaultValues:L,mode:"onChange",resolver:(0,S.X)(F)}),{reset:U,control:Y,handleSubmit:G,formState:{errors:H}}=(0,N.cI)({defaultValues:L,mode:"onChange",resolver:(0,S.X)(R)}),J=()=>{W(!0)},K=async r=>{let{data:t}=await I.Z.post("crms/agents",{...r,role:"agent"});t.status?(z(L),W(!1),n(!e),q.ZP.success(t.msg)):q.ZP.error(t.msg)},$=async e=>{V(e);let{data:n}=await I.Z.get("crms/agents/".concat(e));console.log(n),U({firstName:n.firstName,lastName:n.lastName,corpName:n.corpName,email:n.email,phone:n.phone,balance:n.balance}),_(!0)},ee=async(r,t)=>{let{data:s}=await I.Z.put("/crms/agents/".concat(r),{status:!t});s.status?(q.ZP.success(s.msg),n(!e)):q.ZP.error(s.msg)},en=async r=>{let{data:t}=await I.Z.put("crms/agents/".concat(B),r);t.status?(U(L),_(!1),n(!e),q.ZP.success(t.msg)):q.ZP.error(t.msg)},er=async r=>{let{data:t}=await I.Z.delete("crms/agents/".concat(r));t.status?n(!e):q.ZP.error(t.msg)};return(0,t.jsxs)(d.ZP,{container:!0,spacing:6,children:[(0,t.jsx)(d.ZP,{item:!0,xs:12,children:(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(m.Z,{title:(0,t.jsxs)(h.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(o.Z,{variant:"h5",children:"Agent Management"}),(0,t.jsx)(h.Z,{sx:{pl:0,pr:0,pt:0,pb:0,display:"flex",flex:1,flexWrap:"wrap",alignItems:"center",justifyContent:"flex-end"},children:(0,t.jsxs)(h.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center"},children:[(0,t.jsx)(p.Z,{size:"small",value:r,sx:{mr:6,mb:2},placeholder:"Search agent...",onChange:e=>l(e.target.value)}),(0,t.jsxs)(f.Z,{sx:{mb:2},onClick:J,variant:"contained",children:[(0,t.jsx)(b.Z,{icon:"mdi:plus"})," Add agent"]})]})})]})}),(0,t.jsx)(g.Z,{children:(0,t.jsx)(C._,{autoHeight:!0,getRowId:e=>e._id,rows:O,columns:[{flex:.1,minWidth:140,field:"firstName",headerName:"First Name",renderCell(e){let{row:n}=e;return(0,t.jsx)(o.Z,{noWrap:!0,children:n.firstName})}},{flex:.1,minWidth:140,field:"lastName",headerName:"Last Name",renderCell(e){let{row:n}=e;return(0,t.jsx)(o.Z,{noWrap:!0,children:n.lastName})}},{flex:.1,minWidth:150,field:"corpName",headerName:"Company Name",renderCell(e){let{row:n}=e;return(0,t.jsx)(o.Z,{noWrap:!0,children:n.corpName})}},{flex:.3,minWidth:150,field:"email",headerName:"Email",renderCell(e){let{row:n}=e;return(0,t.jsx)(o.Z,{noWrap:!0,children:n.email})}},{flex:.1,minWidth:200,field:"phone",headerName:"Phone",renderCell(e){let{row:n}=e;return(0,t.jsx)(o.Z,{noWrap:!0,children:n.phone})}},{flex:.2,minWidth:300,field:"address",headerName:"Address",renderCell(e){let{row:n}=e;return(0,t.jsx)(o.Z,{noWrap:!0,children:n.address})}},{flex:.1,minWidth:100,field:"balance",headerName:"Credit",renderCell(e){let{row:n}=e;return(0,t.jsx)(o.Z,{noWrap:!0,children:n.balance})}},{flex:.1,minWidth:110,field:"status",headerName:"Status",renderCell(e){let{row:n}=e;return(0,t.jsx)(u.Z,{skin:"light",size:"small",variant:"filled",label:n.status?"Approved":"Refused",color:n.status?"success":"warning",sx:{textTransform:"capitalize","& .MuiChip-label":{lineHeight:"18px"}}})}},{flex:.1,sortable:!1,field:"actions",headerName:"Actions",renderCell(e){let{row:n}=e;return(0,t.jsx)(M,{id:n._id,status:n.status,permitAgent:ee,editAgent:$,deleteAgent:er})}}],rowsPerPageOptions:[10,25,50],pageSize:i,sx:{"& .MuiDataGrid-columnHeaders":{borderRadius:0}},onPageSizeChange:e=>y(e)})})]})}),(0,t.jsxs)(x.Z,{fullWidth:!0,maxWidth:"sm",onClose:()=>W(!1),open:D,children:[(0,t.jsxs)(v.Z,{children:["New Agent",(0,t.jsx)(a.Z,{onClick:()=>W(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,t.jsx)(b.Z,{icon:"mdi:close"})})]}),(0,t.jsx)(j.Z,{sx:{p:6},children:(0,t.jsxs)("form",{onSubmit:Q(K),style:{paddingTop:8},children:[(0,t.jsxs)(Z.Z,{fullWidth:!0,sx:{mb:6},children:[(0,t.jsx)(N.Qr,{name:"firstName",control:T,rules:{required:!0},render(e){let{field:{value:n,onChange:r}}=e;return(0,t.jsx)(p.Z,{value:n,label:"First Name",onChange:r,placeholder:"Denys",error:Boolean(X.firstName)})}}),X.firstName&&(0,t.jsx)(k.Z,{sx:{color:"error.main"},children:X.firstName.message})]}),(0,t.jsxs)(Z.Z,{fullWidth:!0,sx:{mb:6},children:[(0,t.jsx)(N.Qr,{name:"lastName",control:T,rules:{required:!0},render(e){let{field:{value:n,onChange:r}}=e;return(0,t.jsx)(p.Z,{value:n,label:"Last Name",onChange:r,placeholder:"Lavrynenko",error:Boolean(X.lastName)})}}),X.lastName&&(0,t.jsx)(k.Z,{sx:{color:"error.main"},children:X.lastName.message})]}),(0,t.jsxs)(d.ZP,{container:!0,spacing:6,children:[(0,t.jsx)(d.ZP,{item:!0,md:6,sm:12,children:(0,t.jsxs)(Z.Z,{fullWidth:!0,sx:{mb:6},children:[(0,t.jsx)(N.Qr,{name:"email",control:T,rules:{required:!0},render(e){let{field:{value:n,onChange:r}}=e;return(0,t.jsx)(p.Z,{type:"email",value:n,label:"Email",onChange:r,placeholder:"denys.lavrynenko@gmail.com",error:Boolean(X.email)})}}),X.email&&(0,t.jsx)(k.Z,{sx:{color:"error.main"},children:X.email.message})]})}),(0,t.jsx)(d.ZP,{item:!0,md:6,sm:12,children:(0,t.jsxs)(Z.Z,{fullWidth:!0,sx:{mb:6},children:[(0,t.jsx)(N.Qr,{name:"phone",control:T,rules:{required:!0},render(e){let{field:{value:n,onChange:r}}=e;return(0,t.jsx)(P(),{mask:"(+44) 999 999 9999",maskChar:"_",value:n,onChange:r,children:()=>(0,t.jsx)(p.Z,{type:"string",label:"Phone",placeholder:"8316235660",error:Boolean(X.phone)})})}}),X.phone&&(0,t.jsx)(k.Z,{sx:{color:"error.main"},children:X.phone.message})]})})]}),(0,t.jsxs)(d.ZP,{container:!0,spacing:6,children:[(0,t.jsx)(d.ZP,{item:!0,md:6,sm:12,children:(0,t.jsxs)(Z.Z,{fullWidth:!0,sx:{mb:6},children:[(0,t.jsx)(N.Qr,{name:"corpName",control:T,rules:{required:!0},render(e){let{field:{value:n,onChange:r}}=e;return(0,t.jsx)(p.Z,{value:n,label:"Corp Name",onChange:r,placeholder:"ANZ MIGRATE",error:Boolean(X.corpName)})}}),X.corpName&&(0,t.jsx)(k.Z,{sx:{color:"error.main"},children:X.corpName.message})]})}),(0,t.jsx)(d.ZP,{item:!0,md:6,sm:12,children:(0,t.jsxs)(Z.Z,{fullWidth:!0,sx:{mb:6},children:[(0,t.jsx)(N.Qr,{name:"balance",control:T,rules:{required:!0},render(e){let{field:{value:n,onChange:r}}=e;return(0,t.jsx)(p.Z,{type:"number",value:n,label:"Credit",onChange:r,placeholder:"100",error:Boolean(X.balance)})}}),X.balance&&(0,t.jsx)(k.Z,{sx:{color:"error.main"},children:X.balance.message})]})})]}),(0,t.jsxs)(Z.Z,{fullWidth:!0,sx:{mb:6},children:[(0,t.jsx)(N.Qr,{name:"address",control:T,render(e){let{field:{value:n,onChange:r}}=e;return(0,t.jsx)(p.Z,{value:n,label:"Address",onChange:r,placeholder:"England Creek QLD 4306, Australia",error:Boolean(X.address)})}}),X.address&&(0,t.jsx)(k.Z,{sx:{color:"error.main"},children:X.address.message})]}),(0,t.jsxs)(Z.Z,{fullWidth:!0,sx:{mb:6},children:[(0,t.jsx)(N.Qr,{name:"password",control:T,rules:{required:!0},render(e){let{field:{value:n,onChange:r}}=e;return(0,t.jsx)(p.Z,{type:"text",value:n,label:"Password",placeholder:"a1A!s2S@d3D#",readOnly:!0,error:Boolean(X.password)})}}),X.password&&(0,t.jsx)(k.Z,{sx:{color:"error.main"},children:X.password.message})]}),(0,t.jsxs)(h.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,t.jsx)(f.Z,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:(0,t.jsx)(b.Z,{icon:"mdi:content-save"}),sx:{mr:4},children:"Save"}),(0,t.jsx)(f.Z,{variant:"contained",color:"error",size:"large",startIcon:(0,t.jsx)(b.Z,{icon:"mdi:delete"}),onClick:()=>W(!1),children:"Cancel"})]})]})})]}),(0,t.jsxs)(x.Z,{fullWidth:!0,maxWidth:"sm",onClose:()=>_(!1),open:A,children:[(0,t.jsxs)(v.Z,{children:["Edit Agent",(0,t.jsx)(a.Z,{onClick:()=>_(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,t.jsx)(b.Z,{icon:"mdi:close"})})]}),(0,t.jsx)(j.Z,{sx:{p:6},children:(0,t.jsxs)("form",{onSubmit:G(en),style:{paddingTop:8},children:[(0,t.jsxs)(Z.Z,{fullWidth:!0,sx:{mb:6},children:[(0,t.jsx)(N.Qr,{name:"firstName",control:Y,rules:{required:!0},render(e){let{field:{value:n,onChange:r}}=e;return(0,t.jsx)(p.Z,{value:n,label:"First Name",onChange:r,placeholder:"Denys",error:Boolean(H.firstName)})}}),H.firstName&&(0,t.jsx)(k.Z,{sx:{color:"error.main"},children:H.firstName.message})]}),(0,t.jsxs)(Z.Z,{fullWidth:!0,sx:{mb:6},children:[(0,t.jsx)(N.Qr,{name:"lastName",control:Y,rules:{required:!0},render(e){let{field:{value:n,onChange:r}}=e;return(0,t.jsx)(p.Z,{value:n,label:"Last Name",onChange:r,placeholder:"Lavrynenko",error:Boolean(H.lastName)})}}),H.lastName&&(0,t.jsx)(k.Z,{sx:{color:"error.main"},children:H.lastName.message})]}),(0,t.jsxs)(d.ZP,{container:!0,spacing:6,children:[(0,t.jsx)(d.ZP,{item:!0,md:6,sm:12,children:(0,t.jsxs)(Z.Z,{fullWidth:!0,sx:{mb:6},children:[(0,t.jsx)(N.Qr,{name:"email",control:Y,rules:{required:!0},render(e){let{field:{value:n,onChange:r}}=e;return(0,t.jsx)(p.Z,{type:"email",value:n,label:"Email",onChange:r,placeholder:"denys.lavrynenko@gmail.com",error:Boolean(H.email)})}}),H.email&&(0,t.jsx)(k.Z,{sx:{color:"error.main"},children:H.email.message})]})}),(0,t.jsx)(d.ZP,{item:!0,md:6,sm:12,children:(0,t.jsxs)(Z.Z,{fullWidth:!0,sx:{mb:6},children:[(0,t.jsx)(N.Qr,{name:"phone",control:Y,rules:{required:!0},render(e){let{field:{value:n,onChange:r}}=e;return(0,t.jsx)(P(),{mask:"(+44) 999 999 9999",maskChar:"_",value:n,onChange:r,children:()=>(0,t.jsx)(p.Z,{type:"string",label:"Phone",placeholder:"8316235660",error:Boolean(H.phone)})})}}),H.phone&&(0,t.jsx)(k.Z,{sx:{color:"error.main"},children:H.phone.message})]})})]}),(0,t.jsxs)(d.ZP,{container:!0,spacing:6,children:[(0,t.jsx)(d.ZP,{item:!0,md:6,sm:12,children:(0,t.jsxs)(Z.Z,{fullWidth:!0,sx:{mb:6},children:[(0,t.jsx)(N.Qr,{name:"corpName",control:Y,rules:{required:!0},render(e){let{field:{value:n,onChange:r}}=e;return(0,t.jsx)(p.Z,{value:n,label:"Corp Name",onChange:r,placeholder:"ANZ MIGRATE",error:Boolean(H.corpName)})}}),H.corpName&&(0,t.jsx)(k.Z,{sx:{color:"error.main"},children:H.corpName.message})]})}),(0,t.jsx)(d.ZP,{item:!0,md:6,sm:12,children:(0,t.jsxs)(Z.Z,{fullWidth:!0,sx:{mb:6},children:[(0,t.jsx)(N.Qr,{name:"balance",control:Y,rules:{required:!0},render(e){let{field:{value:n,onChange:r}}=e;return(0,t.jsx)(p.Z,{type:"number",value:n,label:"Credit",onChange:r,placeholder:"100",error:Boolean(H.balance)})}}),H.balance&&(0,t.jsx)(k.Z,{sx:{color:"error.main"},children:H.balance.message})]})})]}),(0,t.jsxs)(Z.Z,{fullWidth:!0,sx:{mb:6},children:[(0,t.jsx)(N.Qr,{name:"address",control:Y,render(e){let{field:{value:n,onChange:r}}=e;return(0,t.jsx)(p.Z,{value:n,label:"Address",onChange:r,placeholder:"England Creek QLD 4306, Australia",error:Boolean(H.address)})}}),H.address&&(0,t.jsx)(k.Z,{sx:{color:"error.main"},children:H.address.message})]}),(0,t.jsxs)(h.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,t.jsx)(f.Z,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:(0,t.jsx)(b.Z,{icon:"mdi:content-save"}),sx:{mr:4},children:"Update"}),(0,t.jsx)(f.Z,{variant:"contained",color:"error",size:"large",startIcon:(0,t.jsx)(b.Z,{icon:"mdi:delete"}),onClick:()=>_(!1),children:"Cancel"})]})]})})]})]})};E.getLayout=e=>(0,t.jsx)(O.Z,{children:e}),n.default=E},76627:function(e,n,r){e.exports=r(53462)},53462:function(e,n,r){"use strict";var t,s=(t=r(67294))&&"object"==typeof t&&"default"in t?t.default:t,a=r(73935);function l(){return(l=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}function i(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e,n,r,t,s,a,l,i){if(!e){var o;if(void 0===n)o=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,t,s,a,l,i],d=0;(o=Error(n.replace(/%s/g,function(){return u[d++]}))).name="Invariant Violation"}throw o.framesToPop=1,o}};function u(e,n,r){if("selectionStart"in e&&"selectionEnd"in e)e.selectionStart=n,e.selectionEnd=r;else{var t=e.createTextRange();t.collapse(!0),t.moveStart("character",n),t.moveEnd("character",r-n),t.select()}}var d={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"};function c(e,n,r){var t="",s="",a=null,l=[];if(void 0===n&&(n="_"),null==r&&(r=d),!e||"string"!=typeof e)return{maskChar:n,formatChars:r,mask:null,prefix:null,lastEditablePosition:null,permanents:[]};var i=!1;return e.split("").forEach(function(e){i=!i&&"\\"===e||(i||!r[e]?(l.push(t.length),t.length===l.length-1&&(s+=e)):a=t.length+1,t+=e,!1)}),{maskChar:n,formatChars:r,prefix:s,mask:t,lastEditablePosition:a,permanents:l}}function m(e,n){return -1!==e.permanents.indexOf(n)}function h(e,n,r){var t=e.mask,s=e.formatChars;return!!r&&(m(e,n)?t[n]===r:RegExp(s[t[n]]).test(r))}function p(e,n){return n.split("").every(function(n,r){return m(e,r)||!h(e,r,n)})}function f(e,n){var r=e.maskChar,t=e.prefix;if(!r){for(;n.length>t.length&&m(e,n.length-1);)n=n.slice(0,n.length-1);return n.length}for(var s=t.length,a=n.length;a>=t.length;a--){var l=n[a];if(!m(e,a)&&h(e,a,l)){s=a+1;break}}return s}function g(e,n){return f(e,n)===e.mask.length}function x(e,n){var r=e.maskChar,t=e.mask,s=e.prefix;if(!r){for((n=v(e,"",n,0)).length<s.length&&(n=s);n.length<t.length&&m(e,n.length);)n+=t[n.length];return n}if(n)return v(e,x(e,""),n,0);for(var a=0;a<t.length;a++)m(e,a)?n+=t[a]:n+=r;return n}function v(e,n,r,t){var s=e.mask,a=e.maskChar,l=e.prefix,i=r.split(""),o=g(e,n);return!a&&t>n.length&&(n+=s.slice(n.length,t)),i.every(function(r){for(var i,u;m(e,u=t)&&r!==s[u];){if(t>=n.length&&(n+=s[t]),i=t,a&&m(e,i)&&r===a)return!0;if(++t>=s.length)return!1}return!h(e,t,r)&&r!==a||(t<n.length?n=a||o||t<l.length?n.slice(0,t)+r+n.slice(t+1):(n=n.slice(0,t)+r+n.slice(t),x(e,n)):a||(n+=r),++t<s.length)}),n}function j(e,n){for(var r=e.mask,t=n;t<r.length;++t)if(!m(e,t))return t;return null}function Z(e){return e||0===e?e+"":""}function k(e){return"function"==typeof e}function C(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame}function b(e){return(C()?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame:function(){return setTimeout(e,1e3/60)})(e)}function w(e){(C()||clearTimeout)(e)}var S=function(e){function n(n){var r=e.call(this,n)||this;r.focused=!1,r.mounted=!1,r.previousSelection=null,r.selectionDeferId=null,r.saveSelectionLoopDeferId=null,r.saveSelectionLoop=function(){r.previousSelection=r.getSelection(),r.saveSelectionLoopDeferId=b(r.saveSelectionLoop)},r.runSaveSelectionLoop=function(){null===r.saveSelectionLoopDeferId&&r.saveSelectionLoop()},r.stopSaveSelectionLoop=function(){null!==r.saveSelectionLoopDeferId&&(w(r.saveSelectionLoopDeferId),r.saveSelectionLoopDeferId=null,r.previousSelection=null)},r.getInputDOMNode=function(){if(!r.mounted)return null;var e=a.findDOMNode(i(i(r))),n="undefined"!=typeof window&&e instanceof window.Element;if(e&&!n)return null;if("INPUT"!==e.nodeName&&(e=e.querySelector("input")),!e)throw Error("react-input-mask: inputComponent doesn't contain input node");return e},r.getInputValue=function(){var e=r.getInputDOMNode();return e?e.value:null},r.setInputValue=function(e){var n=r.getInputDOMNode();n&&(r.value=e,n.value=e)},r.setCursorToEnd=function(){var e=f(r.maskOptions,r.value),n=j(r.maskOptions,e);null!==n&&r.setCursorPosition(n)},r.setSelection=function(e,n,t){void 0===t&&(t={});var s=r.getInputDOMNode(),a=r.isFocused();s&&a&&(t.deferred||u(s,e,n),null!==r.selectionDeferId&&w(r.selectionDeferId),r.selectionDeferId=b(function(){r.selectionDeferId=null,u(s,e,n)}),r.previousSelection={start:e,end:n,length:Math.abs(n-e)})},r.getSelection=function(){return function(e){var n=0,r=0;if("selectionStart"in e&&"selectionEnd"in e)n=e.selectionStart,r=e.selectionEnd;else{var t=document.selection.createRange();t.parentElement()===e&&(n=-t.moveStart("character",-e.value.length),r=-t.moveEnd("character",-e.value.length))}return{start:n,end:r,length:r-n}}(r.getInputDOMNode())},r.getCursorPosition=function(){return r.getSelection().start},r.setCursorPosition=function(e){r.setSelection(e,e)},r.isFocused=function(){return r.focused},r.getBeforeMaskedValueChangeConfig=function(){var e=r.maskOptions,n=e.mask,t=e.maskChar,s=e.permanents,a=e.formatChars;return{mask:n,maskChar:t,permanents:s,alwaysShowMask:!!r.props.alwaysShowMask,formatChars:a}},r.isInputAutofilled=function(e,n,t,s){var a=r.getInputDOMNode();try{if(a.matches(":-webkit-autofill"))return!0}catch(l){}return!r.focused||s.end<t.length&&n.end===e.length},r.onChange=function(e){var n,t,s,a,l,o,u,d,c,p,f,g,Z,C,b,w,S,N,y,P=i(i(r)).beforePasteState,O=i(i(r)).previousSelection,I=r.props.beforeMaskedValueChange,q=r.getInputValue(),M=r.value,E=r.getSelection();r.isInputAutofilled(q,E,M,O)&&(M=x(r.maskOptions,""),O={start:0,end:0,length:0}),P&&(O=P.selection,M=P.value,E={start:O.start+q.length,end:O.start+q.length,length:0},q=M.slice(0,O.start)+q+M.slice(O.end),r.beforePasteState=null);var D=(n=r.maskOptions,t=q,s=E,a=M,l=O,g=n.mask,Z=n.prefix,C=n.lastEditablePosition,b=t,w="",S=0,N=0,y=Math.min(l.start,s.start),s.end>l.start?(o=w=b.slice(l.start,s.end),u=y,d=n.mask,c=n.maskChar,p=o.split(""),f=u,p.every(function(e){for(var r;m(n,r=u)&&e!==d[r];)if(++u>=d.length)return!1;return(h(n,u,e)||e===c)&&u++,u<d.length}),N=(S=u-f)?l.length:0):b.length<a.length&&(N=a.length-b.length),b=a,N&&(1!==N||l.length||(y=l.start===s.start?j(n,s.start):function(e,n){for(var r=n;0<=r;--r)if(!m(e,r))return r;return null}(n,s.start)),b=function(e,n,r,t){var s=r+t,a=e.maskChar,l=e.mask,i=e.prefix,o=n.split("");if(a)return o.map(function(n,t){return t<r||s<=t?n:m(e,t)?l[t]:a}).join("");for(var u=s;u<o.length;u++)m(e,u)&&(o[u]="");return r=Math.max(i.length,r),o.splice(r,s-r),x(e,n=o.join(""))}(n,b,y,N)),b=v(n,b,w,y),(y+=S)>=g.length?y=g.length:y<Z.length&&!S?y=Z.length:y>=Z.length&&y<C&&S&&(y=j(n,y)),w||(w=null),{value:b=x(n,b),enteredString:w,selection:{start:y,end:y}}),W=D.enteredString,A=D.selection,_=D.value;if(k(I)){var B=I({value:_,selection:A},{value:M,selection:O},W,r.getBeforeMaskedValueChangeConfig());_=B.value,A=B.selection}r.setInputValue(_),k(r.props.onChange)&&r.props.onChange(e),r.isWindowsPhoneBrowser?r.setSelection(A.start,A.end,{deferred:!0}):r.setSelection(A.start,A.end)},r.onFocus=function(e){var n=r.props.beforeMaskedValueChange,t=r.maskOptions,s=t.mask,a=t.prefix;if(r.focused=!0,r.mounted=!0,s){if(r.value)f(r.maskOptions,r.value)<r.maskOptions.mask.length&&r.setCursorToEnd();else{var l=x(r.maskOptions,a),i=x(r.maskOptions,l),o=f(r.maskOptions,i),u=j(r.maskOptions,o),d={start:u,end:u};if(k(n)){var c=n({value:i,selection:d},{value:r.value,selection:null},null,r.getBeforeMaskedValueChangeConfig());i=c.value,d=c.selection}var m=i!==r.getInputValue();m&&r.setInputValue(i),m&&k(r.props.onChange)&&r.props.onChange(e),r.setSelection(d.start,d.end)}r.runSaveSelectionLoop()}k(r.props.onFocus)&&r.props.onFocus(e)},r.onBlur=function(e){var n=r.props.beforeMaskedValueChange,t=r.maskOptions.mask;if(r.stopSaveSelectionLoop(),r.focused=!1,t&&!r.props.alwaysShowMask&&p(r.maskOptions,r.value)){var s="";k(n)&&(s=n({value:s,selection:null},{value:r.value,selection:r.previousSelection},null,r.getBeforeMaskedValueChangeConfig()).value);var a=s!==r.getInputValue();a&&r.setInputValue(s),a&&k(r.props.onChange)&&r.props.onChange(e)}k(r.props.onBlur)&&r.props.onBlur(e)},r.onMouseDown=function(e){if(!r.focused&&document.addEventListener){r.mouseDownX=e.clientX,r.mouseDownY=e.clientY,r.mouseDownTime=(new Date).getTime();var n=function e(n){if(document.removeEventListener("mouseup",e),r.focused){var t=Math.max(Math.abs(n.clientX-r.mouseDownX),Math.abs(n.clientY-r.mouseDownY)),s=(new Date).getTime()-r.mouseDownTime;(t<=10&&s<=200||t<=5&&s<=300)&&r.setCursorToEnd()}};document.addEventListener("mouseup",n)}k(r.props.onMouseDown)&&r.props.onMouseDown(e)},r.onPaste=function(e){k(r.props.onPaste)&&r.props.onPaste(e),e.defaultPrevented||(r.beforePasteState={value:r.getInputValue(),selection:r.getSelection()},r.setInputValue(""))},r.handleRef=function(e){null==r.props.children&&k(r.props.inputRef)&&r.props.inputRef(e)};var t=n.mask,s=n.maskChar,l=n.formatChars,o=n.alwaysShowMask,d=n.beforeMaskedValueChange,g=n.defaultValue,C=n.value;r.maskOptions=c(t,s,l),null==g&&(g=""),null==C&&(C=g);var S=Z(C);if(r.maskOptions.mask&&(o||S)&&(S=x(r.maskOptions,S),k(d))){var N=n.value;null==n.value&&(N=g),S=d({value:S,selection:null},{value:N=Z(N),selection:null},null,r.getBeforeMaskedValueChangeConfig()).value}return r.value=S,r}(r=n).prototype=Object.create(e.prototype),function(e,n){for(var r=Object.getOwnPropertyNames(n),t=0;t<r.length;t++){var s=r[t],a=Object.getOwnPropertyDescriptor(n,s);a&&a.configurable&&void 0===e[s]&&Object.defineProperty(e,s,a)}}(r.prototype.constructor=r,e);var r,t=n.prototype;return t.componentDidMount=function(){var e;this.mounted=!0,this.getInputDOMNode()&&(this.isWindowsPhoneBrowser=(e=navigator.userAgent,/windows/i.test(e)&&/phone/i.test(e)),this.maskOptions.mask&&this.getInputValue()!==this.value&&this.setInputValue(this.value))},t.componentDidUpdate=function(){var e=this.previousSelection,n=this.props,r=n.beforeMaskedValueChange,t=n.alwaysShowMask,s=n.mask,a=n.maskChar,l=n.formatChars,i=this.maskOptions,o=t||this.isFocused(),u=null!=this.props.value,d=u?Z(this.props.value):this.value,m=e?e.start:null;if(this.maskOptions=c(s,a,l),this.maskOptions.mask){!i.mask&&this.isFocused()&&this.runSaveSelectionLoop();var h=this.maskOptions.mask&&this.maskOptions.mask!==i.mask;if(i.mask||u||(d=this.getInputValue()),(h||this.maskOptions.mask&&(d||o))&&(d=x(this.maskOptions,d)),h){var v=f(this.maskOptions,d);(null===m||v<m)&&(m=g(this.maskOptions,d)?v:j(this.maskOptions,v))}!this.maskOptions.mask||!p(this.maskOptions,d)||o||u&&this.props.value||(d="");var C={start:m,end:m};if(k(r)){var b=r({value:d,selection:C},{value:this.value,selection:this.previousSelection},null,this.getBeforeMaskedValueChangeConfig());d=b.value,C=b.selection}this.value=d;var w=this.getInputValue()!==this.value;w?(this.setInputValue(this.value),this.forceUpdate()):h&&this.forceUpdate();var S=!1;null!=C.start&&null!=C.end&&(S=!e||e.start!==C.start||e.end!==C.end),(S||w)&&this.setSelection(C.start,C.end)}else i.mask&&(this.stopSaveSelectionLoop(),this.forceUpdate())},t.componentWillUnmount=function(){this.mounted=!1,null!==this.selectionDeferId&&w(this.selectionDeferId),this.stopSaveSelectionLoop()},t.render=function(){var e,n=this.props,r=(n.mask,n.alwaysShowMask,n.maskChar,n.formatChars,n.inputRef,n.beforeMaskedValueChange,n.children),t=function(e,n){if(null==e)return{};var r,t,s={},a=Object.keys(e);for(t=0;t<a.length;t++)0<=n.indexOf(r=a[t])||(s[r]=e[r]);return s}(n,["mask","alwaysShowMask","maskChar","formatChars","inputRef","beforeMaskedValueChange","children"]);if(r){k(r)||o(!1);var a=["onChange","onPaste","onMouseDown","onFocus","onBlur","value","disabled","readOnly"],i=l({},t);a.forEach(function(e){return delete i[e]}),e=r(i),a.filter(function(n){return null!=e.props[n]&&e.props[n]!==t[n]}).length&&o(!1)}else e=s.createElement("input",l({ref:this.handleRef},t));var u={onFocus:this.onFocus,onBlur:this.onBlur};return this.maskOptions.mask&&(t.disabled||t.readOnly||(u.onChange=this.onChange,u.onPaste=this.onPaste,u.onMouseDown=this.onMouseDown),null!=t.value&&(u.value=this.value)),e=s.cloneElement(e,u)},n}(s.Component);e.exports=S}},function(e){e.O(0,[284,480,710,540,72,194,330,323,169,733,459,1,314,774,888,179],function(){return e(e.s=47386)}),_N_E=e.O()}]);