(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8229],{61431:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/crms/item",function(){return s(95234)}])},95234:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return W}});var r=s(85893),t=s(67294),i=s(80562),a=s(73812),l=s(31538),o=s(29630),c=s(79072),d=s(49837),m=s(59742),x=s(61953),u=s(75084),h=s(91359),j=s(1890),p=s(77745),Z=s(95398),f=s(55343),g=s(67836),y=s(32631),C=s(5464),v=s(21609),S=s(98966),b=s(74231),_=s(47533),w=s(87536),P=s(86501);let k=e=>{let{row:n,editVisa:s,deleteVisa:o}=e,[c,d]=(0,t.useState)(null),m=Boolean(c),x=e=>{d(e.currentTarget)},u=()=>{d(null)},h=()=>{s(n),u()},j=()=>{o(n._id),u()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{size:"small",onClick:x,children:(0,r.jsx)(v.Z,{icon:"mdi:dots-vertical"})}),(0,r.jsxs)(a.Z,{keepMounted:!0,anchorEl:c,open:m,onClose:u,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{minWidth:"8rem"}},children:[(0,r.jsxs)(l.Z,{onClick:h,sx:{"& svg":{mr:2}},children:[(0,r.jsx)(v.Z,{icon:"mdi:pencil-outline",fontSize:20}),"Edit"]}),(0,r.jsxs)(l.Z,{onClick:j,sx:{"& svg":{mr:2}},children:[(0,r.jsx)(v.Z,{icon:"mdi:delete-outline",fontSize:20}),"Delete"]})]})]})},z=()=>{let[e,n]=(0,t.useState)("0"),[s,a]=(0,t.useState)([]),[l,z]=(0,t.useState)(!1),[N,I]=(0,t.useState)(10),[T,W]=(0,t.useState)(!1),[E,O]=(0,t.useState)(!1),[X,B]=(0,t.useState)(0),R={name:""},q=b.Ry().shape({name:b.Z_().required("Name is required field.")}),{reset:A,control:D,handleSubmit:F,formState:{errors:H}}=(0,w.cI)({defaultValues:R,mode:"onChange",resolver:(0,_.X)(q)}),{reset:M,control:Q,handleSubmit:V,formState:{errors:G}}=(0,w.cI)({defaultValues:R,mode:"onChange",resolver:(0,_.X)(q)});(0,t.useEffect)(()=>{let e=async()=>{let{data:e}=await C.Z.get("crms/occupation-items");console.log("data :>> ",e),a(e)};e()},[l,N]);let L=e=>{B(e._id),M({name:e.name}),O(!0)},U=async e=>{let{data:n}=await C.Z.post("crms/occupation-items",e);console.log("visa :>> ",n),n.status?(A(R),W(!1),z(!l),P.ZP.success(n.msg)):P.ZP.error(n.msg)},J=async e=>{let{data:n}=await C.Z.put("crms/occupation-items/".concat(X),e);n.status?(M(R),O(!1),z(!l),P.ZP.success(n.msg)):P.ZP.error(n.msg)},K=async e=>{let{data:n}=await C.Z.delete("crms/occupation-items/".concat(e));n.status?(z(!l),P.ZP.success(n.msg)):P.ZP.error(n.msg)};return(0,r.jsxs)(c.ZP,{container:!0,spacing:6,children:[(0,r.jsx)(c.ZP,{item:!0,md:12,sm:12,children:(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(m.Z,{title:(0,r.jsxs)(x.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(o.Z,{variant:"h5",children:"Occupation Types"}),(0,r.jsx)(x.Z,{sx:{pl:0,pr:0,pt:0,pb:0,display:"flex",flex:1,flexWrap:"wrap",alignItems:"center",justifyContent:"flex-end"},children:(0,r.jsx)(x.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center"},children:(0,r.jsxs)(u.Z,{sx:{mb:2},onClick:()=>W(!0),variant:"contained",children:[(0,r.jsx)(v.Z,{icon:"mdi:plus"})," Add Type"]})})})]})}),(0,r.jsx)(h.Z,{children:(0,r.jsx)(S._,{autoHeight:!0,getRowId:e=>e._id,rows:s,columns:[{flex:2,field:"name",headerName:"Occupation Type",renderCell(e){let{row:n}=e;return(0,r.jsx)(o.Z,{noWrap:!0,children:n.name})}},{flex:.5,field:"actions",headerName:"Actions",renderCell(e){let{row:n}=e;return(0,r.jsx)(k,{row:n,editVisa:L,deleteVisa:K})}}],pageSize:N,sx:{"& .MuiDataGrid-columnHeaders":{borderRadius:0}},onPageSizeChange:e=>I(e)})})]})}),(0,r.jsxs)(j.Z,{fullWidth:!0,maxWidth:"sm",onClose:()=>W(!1),open:T,children:[(0,r.jsxs)(p.Z,{children:["New Occupation Type",(0,r.jsx)(i.Z,{onClick:()=>W(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,r.jsx)(v.Z,{icon:"mdi:close"})})]}),(0,r.jsx)(Z.Z,{sx:{p:6},children:(0,r.jsxs)("form",{onSubmit:F(U),style:{paddingTop:8},children:[(0,r.jsxs)(f.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(w.Qr,{name:"name",control:D,render(e){let{field:{value:n,onChange:s}}=e;return(0,r.jsx)(g.Z,{value:n,label:"Name",onChange:s,error:Boolean(H.name)})}}),H.name&&(0,r.jsx)(y.Z,{sx:{color:"error.main"},children:H.name.message})]}),(0,r.jsxs)(x.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,r.jsx)(u.Z,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:(0,r.jsx)(v.Z,{icon:"mdi:content-save"}),sx:{mr:4},children:"Save"}),(0,r.jsx)(u.Z,{variant:"contained",color:"error",size:"large",startIcon:(0,r.jsx)(v.Z,{icon:"mdi:delete"}),onClick:()=>W(!1),children:"Cancel"})]})]})})]}),(0,r.jsxs)(j.Z,{fullWidth:!0,maxWidth:"sm",onClose:()=>O(!1),open:E,children:[(0,r.jsxs)(p.Z,{children:["Edit Occupation Type",(0,r.jsx)(i.Z,{onClick:()=>O(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,r.jsx)(v.Z,{icon:"mdi:close"})})]}),(0,r.jsx)(Z.Z,{sx:{p:6},children:(0,r.jsxs)("form",{onSubmit:V(J),style:{paddingTop:8},children:[(0,r.jsxs)(f.Z,{fullWidth:!0,sx:{mb:6},children:[(0,r.jsx)(w.Qr,{name:"name",control:Q,render(e){let{field:{value:n,onChange:s}}=e;return(0,r.jsx)(g.Z,{value:n,label:"Name",onChange:s,error:Boolean(G.name)})}}),G.name&&(0,r.jsx)(y.Z,{sx:{color:"error.main"},children:G.name.message})]}),(0,r.jsxs)(x.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,r.jsx)(u.Z,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:(0,r.jsx)(v.Z,{icon:"mdi:content-save"}),sx:{mr:4},children:"Update"}),(0,r.jsx)(u.Z,{variant:"contained",color:"error",size:"large",startIcon:(0,r.jsx)(v.Z,{icon:"mdi:delete"}),onClick:()=>O(!1),children:"Cancel"})]})]})})]})]})};var N=s(21840),I=s(94314);let T=()=>(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(c.ZP,{container:!0,spacing:6,children:[(0,r.jsx)(c.ZP,{item:!0,md:6,sm:12,children:(0,r.jsx)(z,{})}),(0,r.jsx)(c.ZP,{item:!0,md:6,sm:12,children:(0,r.jsx)(N.Z,{})})]})});T.getLayout=e=>(0,r.jsx)(I.Z,{children:e});var W=T}},function(e){e.O(0,[6284,9799,4583,3816,3951,7836,9072,9491,9317,7985,4314,1840,9774,2888,179],function(){return e(e.s=61431)}),_N_E=e.O()}]);