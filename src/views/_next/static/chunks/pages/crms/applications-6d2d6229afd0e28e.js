(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[318],{80198:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/crms/applications",function(){return t(42566)}])},42566:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return eD}});var n=t(85893),i=t(67294),r=t(79072),s=t(49837),l=t(59742),o=t(29630),d=t(61953),m=t(91359),c=t(18661),p=t(45670),h=t(8769),u=t(55050),x=t(94314),b=t(5464),f=t(67836),j=t(80562),v=t(73812),Z=t(31538),g=t(21448),y=t(75084),N=t(22841),P=t(75158),C=t(55343),A=t(53442),W=t(1890),S=t(77745),D=t(95398),w=t(58316),I=t(32631),k=t(9041),T=t(76779),M=t(852),Y=t(61702),O=t(17288),_=t(74231),z=t(47533),R=t(87536),L=t(98966),E=t(46437),F=t(9198),H=t.n(F),B=t(21609),G=t(86501),U=t(30381),V=t.n(U),K=t(67074),J=t(51964),q=t.n(J),Q=t(83461),X=t(33504),$=t(41899);let ee=e=>{let{value:a}=e;return(0,n.jsx)(j.Z,{"aria-label":"delete",size:"large",onClick:()=>navigator.clipboard.writeText("".concat(a)),children:(0,n.jsx)($.Z,{fontSize:"small"})})},ea=["Never","1 Time","2 Times","More Than 2 Times"],et=(0,K.ZP)(q())(e=>{let{theme:a}=e;return{padding:a.spacing(5)}}),en=(0,i.forwardRef)((e,a)=>{let{...t}=e,{label:i,readOnly:r}=t;return(0,n.jsx)(f.Z,{inputRef:a,...t,label:i||"",...r&&{inputProps:{readOnly:!0}}})}),ei=e=>{let{id:a,application:t,assign:r,viewNote:s,updateStatus:l,remove:o}=e,{user:d}=(0,O.a)(),[m,c]=(0,i.useState)(null),p=Boolean(m),h=e=>{e.stopPropagation(),c(e.currentTarget)},u=()=>{c(null)},x=()=>{r(a),u()},b=()=>{s(t),u()},f=e=>{l(a,e),u()},g=()=>{o(a),u()},y=e=>{let a=document.createElement("a");a.href="/uploads/attachments/".concat(e.file),a.download="attachment.".concat(e.file.split(".").pop()),a.target="_blank",a.rel="referrer",a.click(),u()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.Z,{size:"small",onClick:h,children:(0,n.jsx)(B.Z,{icon:"mdi:dots-vertical"})}),(0,n.jsxs)(v.Z,{keepMounted:!0,anchorEl:m,open:p,onClose:u,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{minWidth:"8rem"}},children:["staff"===d.role?[(0,n.jsxs)(Z.Z,{onClick:()=>f(!0),sx:{"& svg":{mr:2}},children:[(0,n.jsx)(B.Z,{icon:"mdi:book-check",fontSize:20}),"Approve"]},1),(0,n.jsxs)(Z.Z,{onClick:()=>f(!1),sx:{"& svg":{mr:2}},children:[(0,n.jsx)(B.Z,{icon:"mdi:book-cancel",fontSize:20}),"Decline"]},2)]:"super_admin"===d.role||"admin"===d.role?[(0,n.jsxs)(Z.Z,{sx:{"& svg":{mr:2}},onClick:x,children:[(0,n.jsx)(B.Z,{icon:"mdi:calendar-month",fontSize:20})," Assignment"]},1),(0,n.jsxs)(Z.Z,{sx:{"& svg":{mr:2}},onClick:b,children:[(0,n.jsx)(B.Z,{icon:"mdi:eye",fontSize:20})," View Notes"]},2)]:t.attaches.map((e,a)=>(0,n.jsxs)(Z.Z,{onClick:()=>y(e),children:[(0,n.jsx)("img",{src:"/images/download.svg",alt:"download",width:"20",style:{marginRight:5}})," ",e.file]},a)),"super_admin"===d.role&&(0,n.jsxs)(Z.Z,{onClick:g,sx:{"& svg":{mr:2}},children:[(0,n.jsx)(B.Z,{icon:"mdi:delete-outline",fontSize:20}),"Delete"]})]})]})},er=e=>{let{staffs:a}=e,t=(0,i.useRef)(),{user:s}=(0,O.a)(),[l,m]=(0,i.useState)(""),[c,p]=(0,i.useState)(10),[h,u]=(0,i.useState)([]),[x,v]=(0,i.useState)(!0),[F,U]=(0,i.useState)(!1),[K,J]=(0,i.useState)(!1),[q,$]=(0,i.useState)(!1),[er,es]=(0,i.useState)(0),[el,eo]=(0,i.useState)("approved"),[ed,em]=(0,i.useState)([]),[ec,ep]=(0,i.useState)({}),[eh,eu]=(0,i.useState)(!1),[ex,eb]=(0,i.useState)([!0,!0,!0]),[ef,ej]=(0,i.useState)("ALL"),[ev,eZ]=(0,i.useState)([]),[eg,ey]=(0,i.useState)([]),[eN,eP]=(0,i.useState)({note:"",attaches:[]}),eC=_.Ry().shape({staff:_.Z_().required("Staff is required field.")}),{reset:eA,control:eW,handleSubmit:eS,formState:{errors:eD}}=(0,R.cI)({defaultValues:{staff:""},mode:"onChange",resolver:(0,z.X)(eC)});(0,i.useEffect)(()=>{"super_admin"===s.role||"admin"===s.role?ey([{flex:2,minWidth:150,field:"firstName",headerName:"Name",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].firstName})}},{flex:2,minWidth:150,field:"lastName",headerName:"Surname",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].lastName})}},{flex:3,minWidth:170,field:"passportNumber",headerName:"Passport Number",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].passportNumber})}},{flex:1,minWidth:70,field:"amount",headerName:"Fee",renderCell(e){let{row:a}=e;return(0,n.jsxs)(o.Z,{noWrap:!0,children:["$",a.amount]})}},{flex:3,minWidth:180,field:"issueDate",headerName:"Issue Date",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:eR(a.attaches)})}},{flex:3,minWidth:180,field:"createdAt",headerName:"Submitted Date",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:V()(a.createdAt).format("DD/MM/YYYY HH:mm")})}},{flex:4,minWidth:250,field:"orderNumber",headerName:"Order Number",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.orderNumber})}},{flex:3,minWidth:120,field:"staff",headerName:"Assigned to",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.staff?"".concat(a.staff.firstName," ").concat(a.staff.lastName):""})}},{flex:1,minWidth:100,field:"status",headerName:"Status",renderCell(e){let{row:a}=e;return(0,n.jsx)(g.Z,{skin:"light",size:"small",variant:"filled",label:a.status[0].toUpperCase()+a.status.substring(1),color:"received"==a.status?"warning":"approved"==a.status?"success":"error",sx:{textTransform:"capitalize","& .MuiChip-label":{lineHeight:"18px"}}})}},{flex:3,minWidth:240,field:"visaType",headerName:"Visa Type",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].visaType.name})}},{flex:1,minWidth:80,field:"action",headerName:"Action",renderCell(e){let{row:a}=e;return(0,n.jsx)(ei,{id:a._id,application:a,assign:ew,viewNote:ek,updateStatus:eT,remove:eY})}},{flex:4,minWidth:260,field:"_id",headerName:"Application Number",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a._id})}}]):"agent"===s.role?ey([{flex:2,minWidth:150,field:"firstName",headerName:"Name",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].firstName})}},{flex:2,minWidth:150,field:"lastName",headerName:"Surname",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].lastName})}},{flex:3,minWidth:170,field:"passportNumber",headerName:"Passport Number",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].passportNumber})}},{flex:1,minWidth:70,field:"amount",headerName:"Fee",renderCell(e){let{row:a}=e;return(0,n.jsxs)(o.Z,{noWrap:!0,children:["$",a.amount]})}},{flex:3,minWidth:180,field:"issueDate",headerName:"Issue Date",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:eR(a.attaches)})}},{flex:3,minWidth:180,field:"createdAt",headerName:"Submitted Date",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:V()(a.createdAt).format("DD/MM/YYYY HH:mm")})}},{flex:4,minWidth:250,field:"orderNumber",headerName:"Order Number",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.orderNumber})}},{flex:1,minWidth:100,field:"status",headerName:"Status",renderCell(e){let{row:a}=e;return(0,n.jsx)(g.Z,{skin:"light",size:"small",variant:"filled",label:a.status[0].toUpperCase()+a.status.substring(1),color:"received"==a.status?"warning":"approved"==a.status?"success":"error",sx:{textTransform:"capitalize","& .MuiChip-label":{lineHeight:"18px"}}})}},{flex:3,minWidth:240,field:"visaType",headerName:"Visa Type",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].visaType.name})}},{flex:1,minWidth:80,field:"action",headerName:"Action",renderCell(e){let{row:a}=e;return(0,n.jsx)(ei,{id:a._id,application:a,assign:ew,viewNote:ek,updateStatus:eT,remove:eY})}},{flex:4,minWidth:260,field:"_id",headerName:"Application Number",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a._id})}}]):ey([{flex:2,minWidth:150,field:"firstName",headerName:"Name",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].firstName})}},{flex:2,minWidth:150,field:"lastName",headerName:"Surname",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].lastName})}},{flex:3,minWidth:170,field:"passportNumber",headerName:"Passport Number",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].passportNumber})}},{flex:3,minWidth:180,field:"issueDate",headerName:"Issue Date",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:eR(a.attaches)})}},{flex:3,minWidth:180,field:"createdAt",headerName:"Submitted Date",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:V()(a.createdAt).format("DD/MM/YYYY HH:mm")})}},{flex:4,minWidth:250,field:"orderNumber",headerName:"Order Number",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.orderNumber})}},{flex:1,minWidth:100,field:"status",headerName:"Status",renderCell(e){let{row:a}=e;return(0,n.jsx)(g.Z,{skin:"light",size:"small",variant:"filled",label:a.status[0].toUpperCase()+a.status.substring(1),color:"received"==a.status?"warning":"approved"==a.status?"success":"error",sx:{textTransform:"capitalize","& .MuiChip-label":{lineHeight:"18px"}}})}},{flex:3,minWidth:240,field:"visaType",headerName:"Visa Type",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].visaType.name})}},{flex:1,minWidth:80,field:"action",headerName:"Action",renderCell(e){let{row:a}=e;return(0,n.jsx)(ei,{id:a._id,application:a,assign:ew,viewNote:ek,updateStatus:eT,remove:eY})}},{flex:4,minWidth:260,field:"_id",headerName:"Application Number",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a._id})}}])},[]),(0,i.useEffect)(()=>{let e=async()=>{let{data:e}=await b.Z.get("visa/travel-types");em(e)},a=async()=>{let{data:e}=await b.Z.get("crms/visa-durations");eZ(e)};a(),e()},[]),(0,i.useEffect)(()=>{let e=async()=>{let{data:e}=await b.Z.get("/crms/applications",{params:{userId:s._id,by:"global",search:l}});u(e)};e()},[x,l]);let ew=async e=>{es(e);let{data:a}=await b.Z.get("crms/applications/".concat(e,"/assign"));a?eA({staff:a.staff}):eA({staff:""}),U(!0)},eI=async e=>{let{data:a}=await b.Z.put("crms/applications/".concat(er,"/assign"),e);a.status?(G.Am.success(a.msg),eA(),U(!1)):G.Am.error(a.msg)},ek=e=>{ep(e),$(!0)},eT=async(e,a)=>{es(e),eo(a?"approved":"declined"),J(!0)},eM=async e=>{if(e.preventDefault(),""===eN.note)G.Am.error("Please put down the note.");else{let a=new FormData;a.append("note",eN.note),a.append("status",el);for(let t=0;t<eN.attaches.length;t++)eN.attaches[t]instanceof File&&a.append("attaches[]",eN.attaches[t]);let{data:n}=await b.Z.put("crms/applications/".concat(er),a,{headers:{"Content-Type":"multipart/form-data"}});n.status?(J(!1),v(!x),G.Am.success(n.msg)):G.Am.error(n.msg)}},eY=async e=>{let{data:a}=await b.Z.delete("crms/applications/".concat(e));a.status?(G.Am.success(a.msg),v(!x)):G.Am.error(a.msg)},eO=e=>{ep(e.row),eu(!0)},e_=e=>{let a=X.find(a=>e==a.abbreviation);return a.name},ez=e=>{let a=ed.find(a=>a._id==e);return a.name},eR=e=>e.length?V()(e[0].createdAt).format("DD/MM/YYYY HH:mm"):"",eL=e=>{let a=document.createElement("a");a.href="/uploads/attachments/".concat(e.file),a.download="attachment.".concat(e.file.split(".").pop()),a.target="_blank",a.rel="referrer",a.click()};return(0,n.jsxs)(d.Z,{children:[(0,n.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsx)(y.Z,{variant:"contained",sx:{mb:3},startIcon:(0,n.jsx)(B.Z,{icon:"mdi:file-download"}),children:(0,n.jsx)(Q.CSVLink,{style:{textDecoration:"none",color:"#fafafa"},filename:"applications.csv",data:"agent"===s.role||"staff"===s.role?h.map((e,a)=>({id:e._id,orderNumber:e.orderNumber,passportNumber:e.persons[0].passportNumber,firstName:e.persons[0].firstName,lastName:e.persons[0].lastName,phone:e.persons[0].phone,issueDate:eR(e.attaches),submittedDate:V()(e.createdAt).format("DD/MM/YYYY HH:mm:ss"),status:e.status})):h.map((e,a)=>({id:e._id,orderNumber:e.orderNumber,passportNumber:e.persons[0].passportNumber,firstName:e.persons[0].firstName,lastName:e.persons[0].lastName,phone:e.persons[0].phone,amount:e.amount,issueDate:eR(e.attaches),submittedDate:V()(e.createdAt).format("DD/MM/YYYY HH:mm:ss"),status:e.status})),headers:"agent"===s.role||"staff"===s.role?[{label:"Application number",key:"id"},{label:"Order number",key:"orderNumber"},{label:"Passport number",key:"passportNumber"},{label:"First name",key:"firstName"},{label:"Last name",key:"lastName"},{label:"Phone",key:"phone"},{label:"Issue date",key:"issueDate"},{label:"Submitted date",key:"submittedDate"},{label:"Status",key:"status"}]:[{label:"Application number",key:"id"},{label:"Order number",key:"orderNumber"},{label:"Passport number",key:"passportNumber"},{label:"First name",key:"firstName"},{label:"Last name",key:"lastName"},{label:"Phone",key:"phone"},{label:"Fee",key:"amount"},{label:"Issue date",key:"issueDate"},{label:"Submitted date",key:"submittedDate"},{label:"Status",key:"status"}],children:"Export"})}),(0,n.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(N.Z,{sx:{mb:3},control:(0,n.jsx)(P.Z,{sx:{p:2,"& .MuiSvgIcon-root":{fontSize:25}},defaultChecked:!0,onChange(e){let a=[...ex];a[0]=e.target.checked,console.log("arr :>> ",h),eb(a)}}),label:"Approved"}),(0,n.jsx)(N.Z,{sx:{mb:3},control:(0,n.jsx)(P.Z,{sx:{p:2,"& .MuiSvgIcon-root":{fontSize:25}},defaultChecked:!0,onChange(e){let a=[...ex];a[1]=e.target.checked,console.log("arr :>> ",a),eb(a)}}),label:"Pending"}),(0,n.jsx)(N.Z,{sx:{mb:3},control:(0,n.jsx)(P.Z,{sx:{p:2,"& .MuiSvgIcon-root":{fontSize:25}},defaultChecked:!0,onChange(e){let a=[...ex];a[2]=e.target.checked,eb(a)}}),label:"Declined"}),(0,n.jsx)(C.Z,{sx:{m:1,mb:3,minWidth:120},size:"small",children:(0,n.jsxs)(A.Z,{labelId:"demo-select-small",id:"demo-select-small",value:ef,onChange(e){ej(e.target.value)},displayEmpty:!0,inputProps:{"aria-label":"Without label"},children:[(0,n.jsx)(Z.Z,{value:"ALL",children:"ALL"}),ev.map((e,a)=>(0,n.jsx)(Z.Z,{value:e._id,children:e.name},a))]})}),(0,n.jsx)(f.Z,{size:"small",sx:{mb:2.5,mr:2},placeholder:"Search application...",onChange:e=>m(e.target.value)})]})]}),(0,n.jsx)(L._,{autoHeight:!0,rows:h.filter(e=>("approved"==e.status&&ex[0]||("pending"==e.status||"received"==e.status)&&ex[1]||"declined"==e.status&&ex[2])&&(e.persons[0].visaType.stay_duration==ef||"ALL"==ef)),columns:eg,pageSize:c,rowsPerPageOptions:[10,25,50],getRowId:e=>e._id,onRowClick:eO,sx:{"& .MuiDataGrid-columnHeaders":{borderRadius:0}},onPageSizeChange:e=>p(e)}),(0,n.jsxs)(W.Z,{fullWidth:!0,maxWidth:"sm",onClose(){},open:F,children:[(0,n.jsxs)(S.Z,{children:["Choose a sub user to deal with this application",(0,n.jsx)(j.Z,{onClick:()=>U(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,n.jsx)(B.Z,{icon:"mdi:close"})})]}),(0,n.jsx)(D.Z,{sx:{p:6},children:(0,n.jsxs)("form",{onSubmit:eS(eI),style:{paddingTop:8},children:[(0,n.jsxs)(C.Z,{fullWidth:!0,sx:{mb:6},children:[(0,n.jsx)(w.Z,{htmlFor:"sub-user",children:"Staff"}),(0,n.jsx)(R.Qr,{id:"sub-user",name:"staff",control:eW,rules:{required:!0},render(e){let{field:{value:t,onChange:i}}=e;return(0,n.jsx)(A.Z,{value:t,label:"Staff",onChange:i,error:Boolean(eD.staff),children:a.map((e,a)=>(0,n.jsxs)(Z.Z,{value:e._id,sx:{flexDirection:"column",alignItems:"flex-start"},children:[(0,n.jsx)(o.Z,{children:e.firstName+" "+e.lastName}),(0,n.jsx)(o.Z,{variant:"body2",sx:{color:"text.disabled"},children:e.email})]},a))})}}),eD.staff&&(0,n.jsx)(I.Z,{sx:{color:"error.main"},children:eD.staff.message})]}),(0,n.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,n.jsx)(y.Z,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:(0,n.jsx)(B.Z,{icon:"mdi:content-save"}),sx:{mr:4},children:"Update"}),(0,n.jsx)(y.Z,{variant:"contained",color:"error",size:"large",startIcon:(0,n.jsx)(B.Z,{icon:"mdi:delete"}),onClick:()=>U(!1),children:"Cancel"})]})]})})]}),(0,n.jsxs)(W.Z,{fullWidth:!0,maxWidth:"sm",onClose:()=>J(!1),open:K,children:[(0,n.jsxs)(S.Z,{children:["Update Status",(0,n.jsx)(j.Z,{onClick:()=>J(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,n.jsx)(B.Z,{icon:"mdi:close"})})]}),(0,n.jsx)(D.Z,{sx:{p:6},children:(0,n.jsxs)("form",{onSubmit:eM,style:{paddingTop:8},children:[(0,n.jsx)(C.Z,{fullWidth:!0,sx:{mb:6},children:(0,n.jsx)(f.Z,{multiline:!0,rows:4,value:eN.note,label:"Note",onChange:e=>eP({...eN,note:e.target.value})})}),(0,n.jsx)(C.Z,{fullWidth:!0,sx:{mb:6},children:(0,n.jsx)(f.Z,{type:"file",inputProps:{multiple:!0},onChange(e){eP({...eN,attaches:e.target.files})}})}),(0,n.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,n.jsx)(y.Z,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:(0,n.jsx)(B.Z,{icon:"mdi:content-save"}),sx:{mr:4},children:"Update"}),(0,n.jsx)(y.Z,{variant:"contained",color:"error",size:"large",startIcon:(0,n.jsx)(B.Z,{icon:"mdi:delete"}),onClick:()=>J(!1),children:"Cancel"})]})]})})]}),(0,n.jsxs)(W.Z,{fullWidth:!0,maxWidth:"md",onClose(){eu(!1)},open:eh,children:[(0,n.jsxs)(S.Z,{children:["Application Detail ",(0,n.jsx)("small",{children:"super_admin"!==s.role&&"admin"!==s.role?"":ec.staff?"(Staff assigned to: ".concat(ec.staff.firstName," ").concat(ec.staff.lastName,")"):""}),(0,n.jsx)(j.Z,{onClick:()=>eu(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,n.jsx)(B.Z,{icon:"mdi:close"})})]}),(0,n.jsx)(D.Z,{children:(0,n.jsx)(et,{ref:t,style:{height:"calc(100vh - 300px)"},children:(0,n.jsx)(E.Z,{children:(0,n.jsx)(r.ZP,{container:!0,spacing:5,children:Object.keys(ec).length?ec.persons.map((e,a)=>{var t,s;return(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"First name",placeholder:"Denys",value:e.firstName,readOnly:!0,InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:account-outline"})}),endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:e.firstName})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Last name",placeholder:"Lavrynenko",value:e.lastName,readOnly:!0,InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:account-outline"})}),endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:e.lastName})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Father's name",placeholder:"Alexander",value:e.fatherName,readOnly:!0,InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:account-outline"})}),endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:e.fatherName})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,n.jsx)(d.Z,{children:(0,n.jsx)(H(),{showYearDropdown:!0,showMonthDropdown:!0,popperPlacement:"bottom-start",selected:new Date(e.birthday),readOnly:!0,placeholderText:"DD/MM/YYYY",customInput:(0,n.jsx)(en,{fullWidth:!0,label:"Date of birthday",InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:calendar-month"})}),endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:V()(e.birthday).format("DD/MM/YYYY")})})}})})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Nationality",placeholder:"Alexander",value:e_(e.nationality),readOnly:!0,InputProps:{endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:e_(e.nationality)})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,value:e.phone,label:"Phone number",placeholder:"(+44) 831 623 5660",InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:phone"})}),endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:e.phone})})},readOnly:!0})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Previous Nationality",placeholder:"Alexander",value:e_(e.prevNationality),readOnly:!0,InputProps:{endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:e_(e.prevNationality)})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Email",placeholder:"denys.lavrynenko@gmail.com",value:e.email,readOnly:!0,InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:email-outline"})}),endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:e.email})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Occupation",placeholder:"Alexander",value:e.occupation,readOnly:!0,InputProps:{endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:e.occupation})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Type of Visa",placeholder:"Alexander",value:e.visaType.name,readOnly:!0,InputProps:{endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:e.visaType.name})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Type of Travel Document",placeholder:"Alexander",value:ez(e.travelType),readOnly:!0,InputProps:{endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:ez(e.travelType)})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Passport Number",placeholder:"7700225VH",value:e.passportNumber,readOnly:!0,InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:passport"})}),endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:e.passportNumber})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Visiate Times To Iran",placeholder:"7700225VH",value:ea[e.visitedTimes],readOnly:!0,InputProps:{endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:ea[e.visitedTimes]})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(H(),{showYearDropdown:!0,showMonthDropdown:!0,selected:new Date(e.issuedDate),readOnly:!0,id:"issued-date-input",popperPlacement:"bottom-start",placeholderText:"MM/DD/YYYY",customInput:(0,n.jsx)(en,{fullWidth:!0,label:"Issued Date",InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:calendar-month"})}),endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:V()(e.issuedDate).format("MM/DD/YYYY")})})}})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,xs:12,sx:{mb:3},children:(0,n.jsx)(H(),{showYearDropdown:!0,showMonthDropdown:!0,selected:new Date(e.expireDate),readOnly:!0,id:"expire-date-input",popperPlacement:"bottom-start",placeholderText:"MM/DD/YYYY",customInput:(0,n.jsx)(en,{fullWidth:!0,label:"Expire Date",InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:calendar-month"})}),endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:V()(e.expireDate).format("MM/DD/YYYY")})})}})})}),(0,n.jsx)(r.ZP,{item:!0,md:12,children:(0,n.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"row"},children:[(0,n.jsxs)(d.Z,{sx:{borderRadius:1,marginRight:4,flexBasis:170,height:175,padding:1,border:"2px solid #585b75",overflow:"hidden",position:"relative"},children:[(0,n.jsx)("img",{src:"/uploads/personal_photos/".concat(e.personalPhoto),alt:"personal_photo",style:{width:"100%",height:"100%",borderRadius:5}}),(0,n.jsx)(y.Z,{href:"/uploads/personal_photos/".concat(e.personalPhoto),download:e.firstName+"_personal."+e.personalPhoto.split(".").pop(),target:"_blank",rel:"noreferrer",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#fafafa",textAlign:"center",background:"#00000033"},children:"download"})]}),(0,n.jsxs)(d.Z,{sx:{borderRadius:1,marginRight:4,flexBasis:215,height:175,padding:1,border:"2px solid #585b75",overflow:"hidden",position:"relative"},children:[(0,n.jsx)("img",{src:"/uploads/passport_photos/".concat(e.passportPhoto),alt:"passport_photo",style:{width:"100%",height:"100%",borderRadius:5}}),(0,n.jsx)(y.Z,{href:"/uploads/passport_photos/".concat(e.passportPhoto),download:e.firstName+"_passport."+e.passportPhoto.split(".").pop(),target:"_blank",rel:"noreferrer",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#fafafa",textAlign:"center",background:"#00000033"},children:"download"})]}),(0,n.jsx)(f.Z,{sx:{flex:1},fullWidth:!0,multiline:!0,readOnly:!0,rows:6,label:"Note",value:null!==(t=e.note)&&void 0!==t?t:"",InputProps:{endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:null!==(s=e.note)&&void 0!==s?s:""})})}})]})})]},a)}):null})})})}),(0,n.jsx)(T.Z,{children:(0,n.jsx)(d.Z,{sx:{flex:1,pt:0,pb:3,display:"flex",justifyContent:"flex-end"},children:(0,n.jsx)(y.Z,{type:"button",variant:"contained",size:"large",startIcon:(0,n.jsx)(B.Z,{icon:"mdi:close"}),onClick:()=>eu(!1),children:"Close"})})})]}),(0,n.jsxs)(W.Z,{fullWidth:!0,maxWidth:"sm",onClose:()=>$(!1),open:q,children:[(0,n.jsxs)(S.Z,{children:["View Note",(0,n.jsx)(j.Z,{onClick:()=>$(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,n.jsx)(B.Z,{icon:"mdi:close"})})]}),(0,n.jsxs)(D.Z,{sx:{px:6},children:[(0,n.jsx)(C.Z,{fullWidth:!0,sx:{my:2},children:(0,n.jsx)(f.Z,{multiline:!0,readOnly:!0,rows:4,value:ec.note,label:"Note"})}),(0,n.jsx)(M.Z,{desnse:!0,children:ec.attaches&&ec.attaches.length&&ec.attaches.map((e,a)=>(0,n.jsx)(Z.Z,{sx:{mb:1},onClick:()=>eL(e),children:(0,n.jsxs)(Y.Z,{download:!0,target:"_blank",children:[(0,n.jsx)("img",{src:"/images/download.svg",alt:"download",width:"20",style:{marginRight:5,heightHeight:1,verticalAlign:"middle"}}),(0,n.jsx)("span",{style:{verticalAlign:"middle"},children:e.file})]})},a))})]}),(0,n.jsx)(T.Z,{sx:{justifyContent:"flex-end"},children:(0,n.jsxs)(y.Z,{variant:"contained",color:"error",onClick:()=>$(!1),children:[(0,n.jsx)(B.Z,{icon:"mdi:close"})," Close"]})})]})]})};var es=t(44373),el=t(14398),eo=t(98948),ed=t(44044),em=t(94071),ec=t(31812),ep=t(76627),eh=t.n(ep),eu=t(77718),ex=t.n(eu),eb=t(62097),ef=t(41796);let ej=(0,K.ZP)(d.Z)(()=>({width:20,height:20,borderWidth:3,borderRadius:"50%",borderStyle:"solid"})),ev=e=>{let{active:a,completed:t,error:i}=e,r=(0,eb.Z)();return i?(0,n.jsx)(B.Z,{icon:"mdi:alert",fontSize:20,color:r.palette.error.main,transform:"scale(1.2)"}):t?(0,n.jsx)(B.Z,{icon:"mdi:check-circle",fontSize:20,color:r.palette.primary.main,transform:"scale(1.2)"}):(0,n.jsx)(ej,{sx:{borderColor:a?"primary.main":(0,ef.Fq)(r.palette.primary.main,.3)}})};var eZ=t(51514),eg=t(67555),ey=t.n(eg);t(58530),t(16250);let eN=["Never","1 Time","2 Times","More Than 2 Times"],eP=(0,K.ZP)(q())(e=>{let{theme:a}=e;return{padding:a.spacing(5)}}),eC=(0,i.forwardRef)((e,a)=>{let{...t}=e,{label:i,readOnly:r}=t;return(0,n.jsx)(f.Z,{inputRef:a,...t,label:i||"",...r&&{inputProps:{readOnly:!0}}})}),eA=e=>{let{id:a,application:t,assign:r,viewNote:s,updateStatus:l,remove:o}=e,{user:d}=(0,O.a)(),[m,c]=(0,i.useState)(null),p=Boolean(m),h=e=>{e.stopPropagation(),c(e.currentTarget)},u=()=>{c(null)},x=()=>{r(a),u()},b=()=>{s(t),u()},f=e=>{l(a,e),u()},g=()=>{o(a),u()},y=e=>{let a=document.createElement("a");a.href="/uploads/attachments/".concat(e.file),a.download="attachment.".concat(e.file.split(".").pop()),a.target="_blank",a.rel="referrer",a.click(),u()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.Z,{size:"small",onClick:h,children:(0,n.jsx)(B.Z,{icon:"mdi:dots-vertical"})}),(0,n.jsxs)(v.Z,{keepMounted:!0,anchorEl:m,open:p,onClose:u,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{minWidth:"8rem"}},children:["staff"===d.role?[(0,n.jsxs)(Z.Z,{onClick:()=>f(!0),sx:{"& svg":{mr:2}},children:[(0,n.jsx)(B.Z,{icon:"mdi:book-check",fontSize:20}),"Approve"]},1),(0,n.jsxs)(Z.Z,{onClick:()=>f(!1),sx:{"& svg":{mr:2}},children:[(0,n.jsx)(B.Z,{icon:"mdi:book-cancel",fontSize:20}),"Decline"]},2),t.attaches.map((e,a)=>(0,n.jsxs)(Z.Z,{onClick:()=>y(e),children:[(0,n.jsx)("img",{src:"/images/download.svg",alt:"download",width:"20",style:{marginRight:5}})," ",e.file]},3+a))]:"super_admin"===d.role||"admin"===d.role?[(0,n.jsxs)(Z.Z,{sx:{"& svg":{mr:2}},onClick:x,children:[(0,n.jsx)(B.Z,{icon:"mdi:calendar-month",fontSize:20})," Assignment"]},1),(0,n.jsxs)(Z.Z,{sx:{"& svg":{mr:2}},onClick:b,children:[(0,n.jsx)(B.Z,{icon:"mdi:eye",fontSize:20})," View Notes"]},2)]:t.attaches.map((e,a)=>(0,n.jsxs)(Z.Z,{onClick:()=>y(e),children:[(0,n.jsx)("img",{src:"/images/download.svg",alt:"download",width:"20",style:{marginRight:5}})," ",e.file]},a)),"super_admin"===d.role&&(0,n.jsxs)(Z.Z,{onClick:g,sx:{"& svg":{mr:2}},children:[(0,n.jsx)(B.Z,{icon:"mdi:delete-outline",fontSize:20}),"Delete"]})]})]})},eW=e=>{let{staffs:a}=e,{user:t,setUser:s}=(0,O.a)(),{settings:l}=(0,eZ.r)(),m=(0,i.useRef)(),[c,p]=(0,i.useState)([]),[h,u]=(0,i.useState)(""),[x,v]=(0,i.useState)(10),[F,U]=(0,i.useState)([]),[K,J]=(0,i.useState)(!0),[q,$]=(0,i.useState)(!1),[ea,et]=(0,i.useState)(!1),[en,ei]=(0,i.useState)(!1),[er,ep]=(0,i.useState)(0),[eu,eb]=(0,i.useState)(0),[ef,ej]=(0,i.useState)(!1),[eg,eW]=(0,i.useState)(!1),[eS,eD]=(0,i.useState)("ALL"),[ew,eI]=(0,i.useState)([]),[ek,eT]=(0,i.useState)([!0,!0,!0]),[eM,eY]=(0,i.useState)(!1),[eO,e_]=(0,i.useState)([]),[ez,eR]=(0,i.useState)({note:"",attaches:""}),[eL,eE]=(0,i.useState)([{firstName:"",lastName:"",fatherName:"",birthday:"",nationality:null,phone:"",prevNationality:null,email:"",occupation:null,visaType:null,travelType:null,passportNumber:"",visitedTimes:null,issuedDate:"",expireDate:"",personalPhoto:{},passportPhoto:{},note:"",visaTypes:[]}]),[eF,eH]=(0,i.useState)([]),[eB,eG]=(0,i.useState)([]),[eU,eV]=(0,i.useState)({}),[eK,eJ]=(0,i.useState)(!1),[eq,eQ]=(0,i.useState)("approved"),[eX,e$]=(0,i.useState)(!1),e0=_.Ry().shape({staff:_.Z_().required("Staff is required field.")}),{reset:e1,control:e2,handleSubmit:e3,formState:{errors:e4}}=(0,R.cI)({defaultValues:{staff:""},mode:"onChange",resolver:(0,z.X)(e0)});(0,i.useEffect)(()=>{"super_admin"===t.role||"admin"===t.role?e_([{flex:2,minWidth:150,field:"firstName",headerName:"Name",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].firstName})}},{flex:2,minWidth:150,field:"lastName",headerName:"Surname",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].lastName})}},{flex:2,minWidth:170,field:"passportNumber",headerName:"Passport Number",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].passportNumber})}},{flex:1,minWidth:70,field:"amount",headerName:"Fee",renderCell(e){let{row:a}=e;return(0,n.jsxs)(o.Z,{noWrap:!0,children:["$",a.amount]})}},{flex:3,minWidth:180,field:"issueDate",headerName:"Issue Date",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:ap(a.attaches)})}},{flex:3,minWidth:180,field:"createdAt",headerName:"Submitted Date",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:V()(a.createdAt).format("DD/MM/YYYY HH:mm:ss")})}},{flex:3,minWidth:120,field:"assign",headerName:"Assigned to",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.staff?"".concat(a.staff.firstName," ").concat(a.staff.lastName):""})}},{flex:3,minWidth:120,field:"sentBy",headerName:"Sent by",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.agent?"".concat(a.agent.firstName," ").concat(a.agent.lastName):""})}},{flex:1,minWidth:100,field:"status",headerName:"Status",renderCell(e){let{row:a}=e;return(0,n.jsx)(g.Z,{skin:"light",size:"small",variant:"filled",label:a.status[0].toUpperCase()+a.status.substring(1),color:"received"==a.status?"warning":"approved"==a.status?"success":"error",sx:{textTransform:"capitalize","& .MuiChip-label":{lineHeight:"18px"}}})}},{flex:3,minWidth:240,field:"visaType",headerName:"Visa Type",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].visaType.name})}},{flex:1,minWidth:80,field:"action",headerName:"Action",renderCell(e){let{row:a}=e;return(0,n.jsx)(eA,{id:a._id,application:a,assign:e5,viewNote:e8,updateStatus:e7,remove:ae})}},{flex:4,minWidth:260,field:"_id",headerName:"Application Number",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a._id})}}]):"agent"===t.role?e_([{flex:2,minWidth:150,field:"firstName",headerName:"Name",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].firstName})}},{flex:2,minWidth:150,field:"lastName",headerName:"Surname",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].lastName})}},{flex:2,minWidth:170,field:"passportNumber",headerName:"Passport Number",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].passportNumber})}},{flex:1,minWidth:70,field:"amount",headerName:"Fee",renderCell(e){let{row:a}=e;return(0,n.jsxs)(o.Z,{noWrap:!0,children:["$",a.amount]})}},{flex:3,minWidth:180,field:"issueDate",headerName:"Issue Date",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:ap(a.attaches)})}},{flex:3,minWidth:180,field:"createdAt",headerName:"Submitted Date",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:V()(a.createdAt).format("DD/MM/YYYY HH:mm")})}},{flex:1,minWidth:100,field:"status",headerName:"Status",renderCell(e){let{row:a}=e;return(0,n.jsx)(g.Z,{skin:"light",size:"small",variant:"filled",label:a.status[0].toUpperCase()+a.status.substring(1),color:"received"==a.status?"warning":"approved"==a.status?"success":"error",sx:{textTransform:"capitalize","& .MuiChip-label":{lineHeight:"18px"}}})}},{flex:3,minWidth:240,field:"visaType",headerName:"Visa Type",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].visaType.name})}},{flex:1,minWidth:80,field:"action",headerName:"Action",renderCell(e){let{row:a}=e;return(0,n.jsx)(eA,{id:a._id,application:a,assign:e5,viewNote:e8,updateStatus:e7,remove:ae})}},{flex:4,minWidth:260,field:"_id",headerName:"Application Number",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a._id})}}]):e_([{flex:2,minWidth:150,field:"firstName",headerName:"Name",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].firstName})}},{flex:2,minWidth:150,field:"lastName",headerName:"Surname",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].lastName})}},{flex:2,minWidth:170,field:"passportNumber",headerName:"Passport Number",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].passportNumber})}},{flex:3,minWidth:180,field:"issueDate",headerName:"Issue Date",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:ap(a.attaches)})}},{flex:3,minWidth:180,field:"createdAt",headerName:"Submitted Date",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:V()(a.createdAt).format("DD/MM/YYYY HH:mm")})}},{flex:1,minWidth:100,field:"status",headerName:"Status",renderCell(e){let{row:a}=e;return(0,n.jsx)(g.Z,{skin:"light",size:"small",variant:"filled",label:a.status[0].toUpperCase()+a.status.substring(1),color:"received"==a.status?"warning":"approved"==a.status?"success":"error",sx:{textTransform:"capitalize","& .MuiChip-label":{lineHeight:"18px"}}})}},{flex:3,minWidth:240,field:"visaType",headerName:"Visa Type",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a.persons[0].visaType.name})}},{flex:1,minWidth:80,field:"action",headerName:"Action",renderCell(e){let{row:a}=e;return(0,n.jsx)(eA,{id:a._id,application:a,assign:e5,viewNote:e8,updateStatus:e7,remove:ae})}},{flex:4,minWidth:260,field:"_id",headerName:"Application Number",renderCell(e){let{row:a}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:a._id})}}])},[]),(0,i.useEffect)(()=>{let e=async()=>{let{data:e}=await b.Z.get("/crms/applications",{params:{userId:t._id,search:h,by:"agent"}});U(e)};e()},[K,h]),(0,i.useEffect)(()=>{let e=async()=>{let{data:e}=await b.Z.get("visa/agent-visa-prices",{params:{categoryId:t.category,nationality:"default"}});eH(e),eE(eL.map((a,t)=>(0===t&&(a.visaTypes=e),a)))},a=async()=>{let{data:e}=await b.Z.get("visa/travel-types");eG(e)},n=async()=>{let{data:e}=await b.Z.get("crms/visa-durations");eI(e)},i=async()=>{let{data:e}=await b.Z.get("crms/occupations");p(e)};n(),e(),a(),i()},[]);let e5=async e=>{ep(e);let{data:a}=await b.Z.get("crms/applications/".concat(e,"/assign"));a&&e1({staff:a.staff}),$(!0)},e6=async e=>{let{data:a}=await b.Z.put("crms/applications/".concat(er,"/assign"),e);a.status?(G.Am.success(a.msg),e1(),$(!1)):G.Am.error(a.msg)},e8=e=>{eV(e),ei(!0)},e7=async(e,a)=>{ep(e),eQ(a?"approved":"declined"),et(!0)},e9=async e=>{if(e.preventDefault(),""===ez.note)G.Am.error("Please put down the note.");else{let a=new FormData;a.append("note",ez.note),a.append("status",eq);for(let t=0;t<ez.attaches.length;t++)ez.attaches[t]instanceof File&&a.append("attaches[]",ez.attaches[t]);let{data:n}=await b.Z.put("crms/applications/".concat(er),a,{headers:{"Content-Type":"multipart/form-data"}});n.status?(et(!1),J(!K),G.Am.success(n.msg)):G.Am.error(n.msg)}},ae=async e=>{let{data:a}=await b.Z.delete("crms/applications/".concat(e));a.status?(G.Am.success(a.msg),J(!K)):G.Am.error(a.msg)},aa=()=>{eb(0),e$(!1),eE([{firstName:"",lastName:"",fatherName:"",birthday:"",nationality:null,phone:"",prevNationality:null,email:"",occupation:null,visaType:null,travelType:null,passportNumber:"",visitedTimes:null,issuedDate:"",expireDate:"",personalPhoto:{},passportPhoto:{},note:"",visaTypes:eF}]),ej(!0)},at=()=>{eE([...eL,{firstName:"",lastName:"",fatherName:"",birthday:"",nationality:null,phone:"",prevNationality:null,email:"",occupation:null,visaType:null,travelType:null,passportNumber:"",visitedTimes:null,issuedDate:"",expireDate:"",personalPhoto:{},passportPhoto:{},note:"",visaTypes:eF}]),m.current._container.scrollTop=Number.MAX_SAFE_INTEGER},an=e=>{eE(eL.filter((a,t)=>t!==e))},ai=async function(e,a,n){let i=!(arguments.length>3)||void 0===arguments[3]||arguments[3];if("nationality"===n){let{data:r}=await b.Z.get("visa/agent-visa-prices",{params:{categoryId:t.category,nationality:null===e?"default":e.abbreviation}});eE(eL.map((t,s)=>a===s?{...t,[n]:i?e:"",visaTypes:r}:t))}else eE(eL.map((t,r)=>a!==r?t:null!=e&&0===Object.keys(e).length&&("personalPhoto"===n||"passportPhoto"===n)&&!0===i?t:{...t,[n]:i?e:{}}))},ar=()=>{let e=!0;eL.forEach((a,t)=>{if(""===a.firstName){G.Am.error("Please enter your first name."),e=!1;return}if(""===a.lastName){G.Am.error("Please enter your last name."),e=!1;return}if(""===a.fatherName){G.Am.error("Please enter your father's name."),e=!1;return}if(""===a.birthday){G.Am.error("Please enter your birthday."),e=!1;return}if(null===a.nationality){G.Am.error("Please choose your nationality."),e=!1;return}if(""===a.phone){G.Am.error("Please enter your phone number."),e=!1;return}if(a.phone.replace(/[^0-9]/g,"").length<11){G.Am.error("The phone number format seems to be incorrect."),e=!1;return}else if(null===a.prevNationality){G.Am.error("Please choose your previous nationality."),e=!1;return}else if("UK"===a.prevNationality.abbreviation){G.Am.error("Because you have record of british in the previous nationality, you can not continue this application."),e=!1;return}else if(""===a.email){G.Am.error("Please enter your email address."),e=!1;return}else if(/\S+@\S+\.\S+/.test(a.email)){if(null===a.occupation){G.Am.error("Please choose your occupation."),e=!1;return}if(null===a.visaType){G.Am.error("Please choose the type of visa."),e=!1;return}if(null===a.travelType){G.Am.error("Please choose the type of travel."),e=!1;return}else if(""===a.passportNumber){G.Am.error("Please enter your passport number."),e=!1;return}else if(null===a.visitedTimes){G.Am.error("Please choose the times that you have ever visited Iran so far"),e=!1;return}else if(""===a.issuedDate){G.Am.error("Please enter issued date of visa."),e=!1;return}else if(""===a.expireDate){G.Am.error("Please enter expire date of visa."),e=!1;return}else if(6>V().duration(V()(a.expireDate).diff(V()(),"months",!0))){G.Am.error("Because the expire date of your passport is not enough, you can't continue this application."),e=!1;return}else if(Object.keys(a.passportPhoto).length){if(!Object.keys(a.personalPhoto).length){G.Am.error("Please choose your personal photo.");return}}else{G.Am.error("Please choose your passport photo."),e=!1;return}}else{G.Am.error("The email format seems to be incorrect."),e=!1;return}}),e$(e)},as=()=>{0===eu?e$(!1):eb(eu-1)},al=()=>{eu===eL.length-1?eM?ao():G.Am.error("You need to confirm all the details."):eb(eu+1)},ao=async()=>{let e=new FormData;eL.forEach((a,t)=>{e.append("firstName[]",a.firstName),e.append("lastName[]",a.lastName),e.append("fatherName[]",a.fatherName),e.append("birthday[]",V()(a.birthday).format("YYYY-MM-DD")),e.append("nationality[]",a.nationality.abbreviation),e.append("phone[]",a.phone),e.append("prevNationality[]",a.prevNationality.abbreviation),e.append("email[]",a.email),e.append("occupation[]",a.occupation.name),e.append("visaType[]",a.visaType.visaType._id),e.append("travelType[]",a.travelType._id),e.append("passportNumber[]",a.passportNumber),e.append("visitedTimes[]",a.visitedTimes.val),e.append("issuedDate[]",a.issuedDate),e.append("expireDate[]",a.expireDate),e.append("personalPhoto[]",a.personalPhoto.file),e.append("passportPhoto[]",a.passportPhoto.file),e.append("note[]",a.note)}),e.append("by","agent"),e.append("agentId",t._id),eW(!0);let{data:a}=await b.Z.post("crms/applications",e,{headers:{"Content-Type":"multipart/form-data"}});eW(!1),a.status?(G.Am.success(a.msg),ej(!1),s({...t,balance:Number(t.balance)-Number(a.amount)}),J(!K)):G.Am.error(a.msg)},ad=e=>{eV(e.row),eJ(!0)},am=e=>{let a=X.find(a=>e==a.abbreviation);return a.name},ac=e=>{let a=eB.find(a=>a._id==e);return a.name},ap=e=>e.length?V()(e[0].createdAt).format("DD/MM/YYYY HH:mm"):"",ah=e=>{let a=document.createElement("a");a.href="/uploads/attachments/".concat(e.file),a.download="attachment.".concat(e.file.split(".").pop()),a.target="_blank",a.rel="referrer",a.click()};return(0,n.jsxs)(d.Z,{children:[(0,n.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsx)(y.Z,{variant:"contained",sx:{mb:3,minWidth:120},startIcon:(0,n.jsx)(B.Z,{icon:"mdi:file-download"}),children:(0,n.jsx)(Q.CSVLink,{style:{textDecoration:"none",color:"#fafafa"},filename:"applications.csv",data:"agent"===t.role||"staff"===t.role?F.map((e,a)=>({id:e._id,orderNumber:e.orderNumber,passportNumber:e.persons[0].passportNumber,firstName:e.persons[0].firstName,lastName:e.persons[0].lastName,phone:e.persons[0].phone,issueDate:ap(e.attaches),submittedDate:V()(e.createdAt).format("DD/MM/YYYY HH:mm:ss"),status:e.status})):F.map((e,a)=>({id:e._id,orderNumber:e.orderNumber,passportNumber:e.persons[0].passportNumber,firstName:e.persons[0].firstName,lastName:e.persons[0].lastName,phone:e.persons[0].phone,amount:e.amount,issueDate:ap(e.attaches),submittedDate:V()(e.createdAt).format("DD/MM/YYYY HH:mm:ss"),status:e.status})),headers:"agent"===t.role||"staff"===t.role?[{label:"Application number",key:"id"},{label:"Order number",key:"orderNumber"},{label:"Passport number",key:"passportNumber"},{label:"First name",key:"firstName"},{label:"Last name",key:"lastName"},{label:"Phone",key:"phone"},{label:"Issue date",key:"issueDate"},{label:"Submitted date",key:"submittedDate"},{label:"Status",key:"status"}]:[{label:"Application number",key:"id"},{label:"Order number",key:"orderNumber"},{label:"Passport number",key:"passportNumber"},{label:"First name",key:"firstName"},{label:"Last name",key:"lastName"},{label:"Phone",key:"phone"},{label:"Fee",key:"amount"},{label:"Issue date",key:"issueDate"},{label:"Submitted date",key:"submittedDate"},{label:"Status",key:"status"}],children:"Export"})}),(0,n.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,n.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,n.jsx)(N.Z,{control:(0,n.jsx)(P.Z,{sx:{p:2,"& .MuiSvgIcon-root":{fontSize:25}},defaultChecked:!0,onChange(e){let a=[...ek];a[0]=e.target.checked,eT(a)}}),label:"Approved"}),(0,n.jsx)(N.Z,{control:(0,n.jsx)(P.Z,{sx:{p:2,"& .MuiSvgIcon-root":{fontSize:25}},defaultChecked:!0,onChange(e){let a=[...ek];a[1]=e.target.checked,eT(a)}}),label:"Pending"}),(0,n.jsx)(N.Z,{control:(0,n.jsx)(P.Z,{sx:{p:2,"& .MuiSvgIcon-root":{fontSize:25}},defaultChecked:!0,onChange(e){let a=[...ek];a[2]=e.target.checked,eT(a)}}),label:"Declined"}),(0,n.jsx)(C.Z,{sx:{m:1,minWidth:120},size:"small",children:(0,n.jsxs)(A.Z,{labelId:"demo-select-small",id:"demo-select-small",value:eS,onChange(e){eD(e.target.value)},displayEmpty:!0,inputProps:{"aria-label":"Without label"},children:[(0,n.jsx)(Z.Z,{value:"ALL",children:"ALL"}),ew.map((e,a)=>(0,n.jsx)(Z.Z,{value:e._id,children:e.name},a))]})})]}),(0,n.jsx)(f.Z,{size:"small",sx:{mb:3,mr:2},placeholder:"Search application...",onChange:e=>u(e.target.value)}),"agent"===t.role&&(0,n.jsx)(y.Z,{variant:"contained",color:"primary",sx:{float:"right",mb:3,minWidth:110},onClick:aa,startIcon:(0,n.jsx)(B.Z,{icon:"mdi:plus"}),children:"Apply"})]})]}),F.length>0&&(0,n.jsx)(L._,{autoHeight:!0,rows:F.filter(e=>("approved"==e.status&&ek[0]||("pending"==e.status||"received"==e.status)&&ek[1]||"declined"==e.status&&ek[2])&&(e.persons[0].visaType.stay_duration==eS||"ALL"==eS)),columns:eO,pageSize:x,rowsPerPageOptions:[10,25,50],getRowId:e=>e._id,onRowClick:ad,sx:{"& .MuiDataGrid-columnHeaders":{borderRadius:0}},onPageSizeChange:e=>v(e)}),(0,n.jsxs)(W.Z,{fullWidth:!0,maxWidth:"sm",onClose(){$(!1)},open:q,children:[(0,n.jsxs)(S.Z,{children:["Choose a sub user to deal with this application",(0,n.jsx)(j.Z,{onClick:()=>$(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,n.jsx)(B.Z,{icon:"mdi:close"})})]}),(0,n.jsx)(D.Z,{sx:{p:6},children:(0,n.jsxs)("form",{onSubmit:e3(e6),style:{paddingTop:8},children:[(0,n.jsxs)(C.Z,{fullWidth:!0,sx:{mb:6},children:[(0,n.jsx)(w.Z,{htmlFor:"sub-user",children:"Staff"}),(0,n.jsx)(R.Qr,{id:"sub-user",name:"staff",control:e2,rules:{required:!0},render(e){let{field:{value:t,onChange:i}}=e;return(0,n.jsx)(A.Z,{value:t,label:"Staff",onChange:i,error:Boolean(e4.staff),children:a.map((e,a)=>(0,n.jsxs)(Z.Z,{value:e._id,sx:{flexDirection:"column",alignItems:"flex-start"},children:[(0,n.jsx)(o.Z,{children:e.firstName+" "+e.lastName}),(0,n.jsx)(o.Z,{variant:"body2",sx:{color:"text.disabled"},children:e.email})]},a))})}}),e4.staff&&(0,n.jsx)(I.Z,{sx:{color:"error.main"},children:e4.staff.message})]}),(0,n.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,n.jsx)(y.Z,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:(0,n.jsx)(B.Z,{icon:"mdi:content-save"}),sx:{mr:4},children:"Update"}),(0,n.jsx)(y.Z,{variant:"contained",color:"error",size:"large",startIcon:(0,n.jsx)(B.Z,{icon:"mdi:delete"}),onClick:()=>$(!1),children:"Cancel"})]})]})})]}),(0,n.jsxs)(W.Z,{fullWidth:!0,maxWidth:"sm",onClose(){et(!1)},open:ea,children:[(0,n.jsxs)(S.Z,{children:["Update Status",(0,n.jsx)(j.Z,{onClick:()=>et(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,n.jsx)(B.Z,{icon:"mdi:close"})})]}),(0,n.jsx)(D.Z,{sx:{p:6},children:(0,n.jsxs)("form",{onSubmit:e9,style:{paddingTop:8},children:[(0,n.jsx)(C.Z,{fullWidth:!0,sx:{mb:6},children:(0,n.jsx)(f.Z,{multiline:!0,rows:4,value:ez.note,label:"Note",onChange:e=>eR({...ez,note:e.target.value})})}),(0,n.jsx)(C.Z,{fullWidth:!0,sx:{mb:6},children:(0,n.jsx)(f.Z,{type:"file",inputProps:{multiple:!0},onChange:e=>eR({...ez,attaches:e.target.files})})}),(0,n.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,n.jsx)(y.Z,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:(0,n.jsx)(B.Z,{icon:"mdi:content-save"}),sx:{mr:4},children:"Update"}),(0,n.jsx)(y.Z,{variant:"contained",color:"error",size:"large",startIcon:(0,n.jsx)(B.Z,{icon:"mdi:delete"}),onClick:()=>et(!1),children:"Cancel"})]})]})})]}),(0,n.jsxs)(W.Z,{fullWidth:!0,maxWidth:"lg",open:ef,children:[(0,n.jsxs)(S.Z,{children:["New Application",(0,n.jsx)(j.Z,{onClick:()=>ej(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,n.jsx)(B.Z,{icon:"mdi:close"})})]}),(0,n.jsx)(D.Z,{children:(0,n.jsx)(E.Z,{children:eX?(0,n.jsx)(d.Z,{children:(0,n.jsxs)(r.ZP,{container:!0,spacing:5,children:[(0,n.jsx)(r.ZP,{item:!0,md:3,children:(0,n.jsx)(eo.Z,{activeStep:eu,orientation:"vertical",children:eL.map((e,a)=>(0,n.jsx)(ed.Z,{onClick:()=>eb(a),sx:{"&.Mui-completed + svg":{color:"primary.main"}},children:(0,n.jsx)(em.Z,{StepIconComponent:ev,children:(0,n.jsxs)("div",{className:"step-label",style:{display:"flex",alignItems:"center",justifyContent:"flex-start"},children:[(0,n.jsx)(o.Z,{className:"step-number",sx:{fontWeight:600,letterSpacing:"0.25px",fontSize:"2.125rem",marginRight:"0.625rem",color:"#4c4e64de"},children:"0".concat(a+1)}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(o.Z,{className:"step-title",sx:{fontWeight:500,fontSize:"0.875rem",letterSpacing:"0.1px",color:"#4c4e64de"},children:[e.firstName," ",e.lastName]}),(0,n.jsx)(o.Z,{className:"step-subtitle",sx:{fontWeight:400,fontSize:"0.75rem",letterSpacing:"0.4px",color:"#4c4e64de"},children:e.passportNumber})]})]})})},a))})}),(0,n.jsxs)(r.ZP,{item:!0,md:9,children:[(0,n.jsxs)(o.Z,{variant:"h5",sx:{mb:3},children:["Application Details ",eU.staff?"(".concat(eU.staff.firstName," ").concat(eU.staff.lastName,")"):""]}),(0,n.jsxs)(r.ZP,{container:!0,spacing:5,children:[(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,children:(0,n.jsx)(C.Z,{fullWidth:!0,sx:{mt:3,mb:3},children:(0,n.jsx)(f.Z,{value:eL[eu].firstName,label:"First name",readOnly:!0})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,children:(0,n.jsx)(C.Z,{fullWidth:!0,sx:{mt:3,mb:3},children:(0,n.jsx)(f.Z,{value:eL[eu].lastName,label:"Last name",readOnly:!0})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,children:(0,n.jsx)(C.Z,{fullWidth:!0,sx:{mt:3,mb:3},children:(0,n.jsx)(f.Z,{value:eL[eu].fatherName,label:"Father's name",readOnly:!0})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,children:(0,n.jsx)(C.Z,{fullWidth:!0,sx:{mb:3},children:(0,n.jsx)(f.Z,{value:V()(eL[eu].birthday).format("DD/MM/YYYY"),label:"Date of birthday",readOnly:!0})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,children:(0,n.jsx)(C.Z,{fullWidth:!0,sx:{mb:3},children:(0,n.jsx)(f.Z,{value:eL[eu].nationality.name,label:"Nationality",readOnly:!0})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,children:(0,n.jsx)(C.Z,{fullWidth:!0,sx:{mb:3},children:(0,n.jsx)(f.Z,{value:eL[eu].phone,label:"Phone number",readOnly:!0})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,children:(0,n.jsx)(C.Z,{fullWidth:!0,sx:{mb:3},children:(0,n.jsx)(f.Z,{value:eL[eu].prevNationality.name,label:"Previous nationality",readOnly:!0})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,children:(0,n.jsx)(C.Z,{fullWidth:!0,sx:{mb:3},children:(0,n.jsx)(f.Z,{value:eL[eu].email,label:"Email",readOnly:!0})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,children:(0,n.jsx)(C.Z,{fullWidth:!0,sx:{mb:3},children:(0,n.jsx)(f.Z,{value:eL[eu].occupation.name,label:"Occupation",readOnly:!0})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,children:(0,n.jsx)(C.Z,{fullWidth:!0,sx:{mb:3},children:(0,n.jsx)(f.Z,{value:eL[eu].visaType.visaType.name,label:"Type of visa",readOnly:!0})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,children:(0,n.jsx)(C.Z,{fullWidth:!0,sx:{mb:3},children:(0,n.jsx)(f.Z,{value:eL[eu].travelType.name,label:"Type of travel document",readOnly:!0})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,children:(0,n.jsx)(C.Z,{fullWidth:!0,sx:{mb:3},children:(0,n.jsx)(f.Z,{value:eL[eu].passportNumber,label:"Passport number",readOnly:!0})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,children:(0,n.jsx)(C.Z,{fullWidth:!0,sx:{mb:3},children:(0,n.jsx)(f.Z,{value:eL[eu].visitedTimes.val,label:"Visited times to Iran",readOnly:!0})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,children:(0,n.jsx)(C.Z,{fullWidth:!0,sx:{mb:3},children:(0,n.jsx)(f.Z,{value:V()(eL[eu].issuedDate).format("DD/MM/YYYY"),label:"Issued date",readOnly:!0})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,children:(0,n.jsx)(C.Z,{fullWidth:!0,sx:{mb:3},children:(0,n.jsx)(f.Z,{value:V()(eL[eu].expireDate).format("DD/MM/YYYY"),label:"Expire date",readOnly:!0})})}),(0,n.jsx)(r.ZP,{item:!0,md:12,children:(0,n.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"row"},children:[(0,n.jsx)("img",{src:eL[eu].personalPhoto.dataUrl,alt:"personal photo",style:{width:175,height:175,borderRadius:5,marginRight:20}}),(0,n.jsx)("img",{src:eL[eu].passportPhoto.dataUrl,alt:"personal photo",style:{width:225,height:175,borderRadius:5,marginRight:20}}),(0,n.jsx)(d.Z,{sx:{flex:1},children:(0,n.jsx)(f.Z,{fullWidth:!0,multiline:!0,rows:6,label:"Note",readOnly:!0,value:eL[eu].note})})]})}),eL.length-1==eu&&(0,n.jsx)(r.ZP,{item:!0,md:12,children:(0,n.jsx)(N.Z,{control:(0,n.jsx)(P.Z,{checked:eM,onChange:()=>eY(!eM)}),label:"I confirm all the details are correct."})})]}),(0,n.jsxs)(d.Z,{sx:{mt:4,display:"flex",justifyContent:"space-between"},children:[(0,n.jsx)(y.Z,{color:"secondary",variant:"outlined",onClick:as,startIcon:(0,n.jsx)(B.Z,{icon:"mdi:arrow-left"}),children:"Back for Edit"}),(0,n.jsx)(ec.Z,{variant:"contained",size:"large",loading:eg,loadingPosition:"start",...eu===eL.length-1?{startIcon:(0,n.jsx)(B.Z,{icon:"mdi:upload"})}:{},...eu!==eL.length-1?{endIcon:(0,n.jsx)(B.Z,{icon:"mdi:arrow-right"})}:{},onClick:al,children:eu===eL.length-1?"Submit":"Next"})]})]})]})}):(0,n.jsxs)(d.Z,{children:[(0,n.jsx)(eP,{ref:m,style:{height:"calc(100vh - 300px)"},children:(0,n.jsx)(r.ZP,{container:!0,spacing:5,children:eL.map((e,a)=>(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)(r.ZP,{item:!0,md:12,style:{paddingTop:0},children:(0,n.jsx)(es.Z,{textAlign:"center",children:(0,n.jsx)(o.Z,{variant:"h5",sx:{mb:0},children:"Person ".concat(a+1)})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"First name",value:e.firstName,onChange:e=>ai(e.target.value.toUpperCase(),a,"firstName"),InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:account-outline"})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Last name",value:e.lastName,onChange:e=>ai(e.target.value.toUpperCase(),a,"lastName"),InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:account-outline"})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Father's name",value:e.fatherName,onChange:e=>ai(e.target.value.toUpperCase(),a,"fatherName"),InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:account-outline"})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,n.jsx)(d.Z,{children:(0,n.jsx)(H(),{showYearDropdown:!0,showMonthDropdown:!0,popperPlacement:"bottom-start",selected:e.birthday,onChange:e=>ai(e,a,"birthday"),dateFormat:"dd/MM/yyyy",placeholderText:"DD/MM/YYYY",customInput:(0,n.jsx)(eh(),{mask:"99/99/9999",value:e.birthday,children:e=>(0,n.jsx)(eC,{fullWidth:!0,label:"Date of birthday",InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:calendar-month"})})},...e})})})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,n.jsx)(C.Z,{fullWidth:!0,children:(0,n.jsx)(el.Z,{value:e.nationality,sx:{width:"100%"},options:X,getOptionLabel:e=>e.name,onChange:(e,t)=>ai(t,a,"nationality"),renderInput:e=>(0,n.jsx)(f.Z,{...e,label:"Nationality"})})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(C.Z,{fullWidth:!0,children:(0,n.jsx)(ey(),{country:"gb",placeholder:"Phone number",containerStyle:{marginTop:12},inputStyle:{width:"100%",padding:"17.5px 14px 17.5px 58px"},value:e.phone,onChange:e=>ai(e,a,"phone")})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(C.Z,{fullWidth:!0,children:(0,n.jsx)(el.Z,{value:e.prevNationality,sx:{width:"100%"},options:X,getOptionLabel:e=>e.name,onChange:(e,t)=>ai(t,a,"prevNationality"),renderInput:e=>(0,n.jsx)(f.Z,{...e,label:"Previous nationality"})})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Email",value:e.email,onChange:e=>ai(e.target.value,a,"email"),InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:email-outline"})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(C.Z,{fullWidth:!0,children:(0,n.jsx)(el.Z,{value:e.occupation,sx:{width:"100%"},options:c,getOptionLabel:e=>e.name,onChange:(e,t)=>ai(t,a,"occupation"),renderInput:e=>(0,n.jsx)(f.Z,{...e,label:"Occupation"})})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(C.Z,{fullWidth:!0,children:(0,n.jsx)(el.Z,{value:e.visaType,sx:{width:"100%"},options:e.visaTypes,getOptionLabel:e=>"".concat(e.name," - ").concat(e.stay_duration.name," - $").concat(e.price),onChange:(e,t)=>ai(t,a,"visaType"),renderInput:e=>(0,n.jsx)(f.Z,{...e,label:"Type of visa"})})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(C.Z,{fullWidth:!0,children:(0,n.jsx)(el.Z,{value:e.travelType,sx:{width:"100%"},options:eB,getOptionLabel:e=>e.name,onChange:(e,t)=>ai(t,a,"travelType"),renderInput:e=>(0,n.jsx)(f.Z,{...e,label:"Type of travel document"})})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Passport number",value:e.passportNumber,onChange:e=>ai(e.target.value,a,"passportNumber"),InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:passport"})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(C.Z,{fullWidth:!0,children:(0,n.jsx)(el.Z,{value:e.visitedTimes,sx:{width:"100%"},options:[{val:0,name:"Never"},{val:1,name:"1 Time"},{val:2,name:"2 Times"},{val:3,name:"More than 3 times"}],getOptionLabel:e=>e.name,onChange:(e,t)=>ai(t,a,"visitedTimes"),renderInput:e=>(0,n.jsx)(f.Z,{...e,label:"Visited times to Iran"})})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(H(),{showYearDropdown:!0,showMonthDropdown:!0,selected:e.issuedDate,id:"issued-date-input",popperPlacement:"bottom-start",dateFormat:"dd/MM/yyyy",placeholderText:"DD/MM/YYYY",onChange:e=>ai(e,a,"issuedDate"),customInput:(0,n.jsx)(eh(),{mask:"99/99/9999",value:e.issuedDate,children:e=>(0,n.jsx)(eC,{fullWidth:!0,label:"Issued date",InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:calendar-month"})})},...e})})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,xs:12,sx:{mb:3},children:(0,n.jsx)(H(),{showYearDropdown:!0,showMonthDropdown:!0,selected:e.expireDate,id:"expire-date-input",popperPlacement:"bottom-start",dateFormat:"dd/MM/yyyy",placeholderText:"DD/MM/YYYY",onChange:e=>ai(e,a,"expireDate"),customInput:(0,n.jsx)(eh(),{mask:"99/99/9999",value:e.expireDate,children:e=>(0,n.jsx)(eC,{fullWidth:!0,label:"Expire date",InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:calendar-month"})})},...e})})})}),(0,n.jsx)(r.ZP,{item:!0,md:12,children:(0,n.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"row"},children:[(0,n.jsx)(ex(),{style:{width:175,height:175,background:"dark"==l.mode?"#282a42":"#dddddd",backgroundImage:e.personalPhoto.dataUrl?"url(".concat(e.personalPhoto.dataUrl,")"):"",backgroundPosition:"center",backgroundSize:"cover",borderRadius:5,marginRight:20,marginBottom:20},deleteIcon:(0,n.jsx)(B.Z,{icon:"mdi:delete-circle"}),uploadIcon:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,n.jsx)(B.Z,{icon:"mdi:camera",style:{width:50,height:50}}),(0,n.jsx)("span",{style:{fontSize:12},children:"Personal photo"})]}),onFileAdded:e=>ai(e,a,"personalPhoto",!0),onFileRemoved:e=>ai(e,a,"personalPhoto",!1)}),(0,n.jsx)(ex(),{style:{width:225,height:175,background:"dark"==l.mode?"#282a42":"#dddddd",backgroundImage:e.passportPhoto.dataUrl?"url(".concat(e.passportPhoto.dataUrl,")"):"",backgroundPosition:"center",backgroundSize:"cover",borderRadius:5,marginRight:20,marginBottom:20},deleteIcon:(0,n.jsx)(B.Z,{icon:"mdi:delete-circle"}),uploadIcon:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,n.jsx)(B.Z,{icon:"mdi:camera",style:{width:50,height:50}}),(0,n.jsx)("span",{style:{fontSize:12},children:"Passport photo"})]}),onFileAdded:e=>ai(e,a,"passportPhoto",!0),onFileRemoved(e){ai(e,a,"passportPhoto",!1)}}),(0,n.jsx)(d.Z,{sx:{flex:1,marginBottom:5},children:(0,n.jsx)(f.Z,{fullWidth:!0,multiline:!0,value:e.note,rows:6,label:"Note",onChange:e=>ai(e.target.value,a,"note")})})]})}),0!==a&&(0,n.jsx)(r.ZP,{item:!0,md:12,children:(0,n.jsx)(y.Z,{color:"error",startIcon:(0,n.jsx)(B.Z,{icon:"mdi:delete"}),sx:{float:"right"},onClick:()=>an(a),children:"Remove Person"})})]},a))})}),(0,n.jsxs)(d.Z,{sx:{flex:1,pt:4,pb:3,display:"flex",justifyContent:"space-between"},children:[(0,n.jsx)(y.Z,{type:"button",variant:"contained",size:"large",startIcon:(0,n.jsx)(B.Z,{icon:"mdi:plus"}),sx:{mr:4},onClick:at,children:"Person"}),(0,n.jsx)(y.Z,{type:"button",variant:"contained",size:"large",endIcon:(0,n.jsx)(B.Z,{icon:"mdi:arrow-right"}),onClick:ar,children:"Next"})]})]})})})]}),(0,n.jsxs)(W.Z,{fullWidth:!0,maxWidth:"md",onClose(){eJ(!1)},open:eK,children:[(0,n.jsxs)(S.Z,{children:["Application Detail ",(0,n.jsx)("small",{children:"super_admin"!==t.role&&"admin"!==t.role?"":eU.staff&&eU.agent?"(Staff assigned to: ".concat(eU.staff.firstName," ").concat(eU.staff.lastName,", Agent applied by: ").concat(eU.agent.firstName," ").concat(eU.agent.lastName,")"):void 0!==eU.staff&&null!==eU.staff&&!Object.keys(eU.staff).length&&eU.agent?"(Agent applied by: ".concat(eU.agent.firstName," ").concat(eU.agent.lastName,")"):""}),(0,n.jsx)(j.Z,{onClick:()=>eJ(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,n.jsx)(B.Z,{icon:"mdi:close"})})]}),(0,n.jsx)(D.Z,{children:(0,n.jsx)(eP,{ref:m,style:{height:"calc(100vh - 300px)"},children:(0,n.jsx)(E.Z,{children:(0,n.jsx)(r.ZP,{container:!0,spacing:5,children:Object.keys(eU).length?eU.persons.map((e,a)=>{var t,s;return(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"First name",placeholder:"Denys",value:e.firstName,readOnly:!0,InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:account-outline"})}),endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:e.firstName})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Last name",placeholder:"Lavrynenko",value:e.lastName,readOnly:!0,InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:account-outline"})}),endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:e.lastName})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Father's name",placeholder:"Alexander",value:e.fatherName,readOnly:!0,InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:account-outline"})}),endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:e.fatherName})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,n.jsx)(d.Z,{children:(0,n.jsx)(H(),{showYearDropdown:!0,showMonthDropdown:!0,popperPlacement:"bottom-start",selected:new Date(e.birthday),readOnly:!0,placeholderText:"DD/MM/YYYY",customInput:(0,n.jsx)(eC,{fullWidth:!0,label:"Date of birthday",InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:calendar-month"})}),endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:V()(e.birthday).format("DD/MM/YYYY")})})}})})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Nationality",placeholder:"Alexander",value:am(e.nationality),readOnly:!0,InputProps:{endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:am(e.nationality)})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mt:3,mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,value:e.phone,label:"Phone number",placeholder:"(+44) 831 623 5660",InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:phone"})}),endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:e.phone})})},readOnly:!0})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Previous Nationality",placeholder:"Alexander",value:am(e.prevNationality),readOnly:!0,InputProps:{endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:am(e.prevNationality)})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Email",placeholder:"denys.lavrynenko@gmail.com",value:e.email,readOnly:!0,InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:email-outline"})}),endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:e.email})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Occupation",placeholder:"Alexander",value:e.occupation,readOnly:!0,InputProps:{endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:e.occupation})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Type of Visa",placeholder:"Alexander",value:e.visaType.name,readOnly:!0,InputProps:{endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:e.visaType.name})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Type of Travel Document",placeholder:"Alexander",value:ac(e.travelType),readOnly:!0,InputProps:{endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:ac(e.travelType)})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Passport Number",placeholder:"7700225VH",value:e.passportNumber,readOnly:!0,InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:passport"})}),endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:e.passportNumber})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(f.Z,{fullWidth:!0,label:"Visiate Times To Iran",placeholder:"7700225VH",value:eN[e.visitedTimes],readOnly:!0,InputProps:{endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:eN[e.visitedTimes]})})}})}),(0,n.jsx)(r.ZP,{item:!0,md:4,sm:6,xs:12,sx:{mb:3},children:(0,n.jsx)(H(),{showYearDropdown:!0,showMonthDropdown:!0,selected:new Date(e.issuedDate),readOnly:!0,id:"issued-date-input",popperPlacement:"bottom-start",placeholderText:"MM/DD/YYYY",customInput:(0,n.jsx)(eC,{fullWidth:!0,label:"Issued Date",InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:calendar-month"})}),endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:V()(e.issuedDate).format("MM/DD/YYYY")})})}})})}),(0,n.jsx)(r.ZP,{item:!0,md:4,xs:12,sx:{mb:3},children:(0,n.jsx)(H(),{showYearDropdown:!0,showMonthDropdown:!0,selected:new Date(e.expireDate),readOnly:!0,id:"expire-date-input",popperPlacement:"bottom-start",placeholderText:"MM/DD/YYYY",customInput:(0,n.jsx)(eC,{fullWidth:!0,label:"Expire Date",InputProps:{startAdornment:(0,n.jsx)(k.Z,{position:"start",children:(0,n.jsx)(B.Z,{icon:"mdi:calendar-month"})}),endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:V()(e.expireDate).format("MM/DD/YYYY")})})}})})}),(0,n.jsx)(r.ZP,{item:!0,md:12,children:(0,n.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"row"},children:[(0,n.jsxs)(d.Z,{sx:{borderRadius:1,marginRight:4,flexBasis:170,height:175,padding:1,border:"2px solid #585b75",overflow:"hidden",position:"relative"},children:[(0,n.jsx)("img",{src:"/uploads/personal_photos/".concat(e.personalPhoto),alt:"personal_photo",style:{width:"100%",height:"100%",borderRadius:5}}),(0,n.jsx)(y.Z,{href:"/uploads/personal_photos/".concat(e.personalPhoto),download:e.firstName+"_personal."+e.personalPhoto.split(".").pop(),target:"_blank",rel:"noreferrer",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#fafafa",textAlign:"center",background:"#00000033"},children:"download"})]}),(0,n.jsxs)(d.Z,{sx:{borderRadius:1,marginRight:4,flexBasis:215,height:175,padding:1,border:"2px solid #585b75",overflow:"hidden",position:"relative"},children:[(0,n.jsx)("img",{src:"/uploads/passport_photos/".concat(e.passportPhoto),alt:"passport_photo",style:{width:"100%",height:"100%",borderRadius:5}}),(0,n.jsx)(y.Z,{href:"/uploads/passport_photos/".concat(e.passportPhoto),download:e.firstName+"_passport."+e.passportPhoto.split(".").pop(),target:"_blank",rel:"noreferrer",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#fafafa",textAlign:"center",background:"#00000033"},children:"download"})]}),(0,n.jsx)(f.Z,{sx:{flex:1},fullWidth:!0,multiline:!0,readOnly:!0,rows:6,label:"Note",value:null!==(t=e.note)&&void 0!==t?t:"",InputProps:{endAdornment:(0,n.jsx)(k.Z,{position:"end",children:(0,n.jsx)(ee,{value:null!==(s=e.note)&&void 0!==s?s:""})})}})]})})]},a)}):null})})})}),(0,n.jsx)(T.Z,{children:(0,n.jsxs)(d.Z,{sx:{flex:1,pt:0,pb:3,display:"flex",justifyContent:eU.attach?"space-between":"flex-end"},children:[eU.attach&&(0,n.jsx)(y.Z,{variant:"contained",sx:{backgroundColor:"#09542F"},startIcon:(0,n.jsx)(B.Z,{icon:"mdi:attach-file"}),href:"/uploads/attachments/".concat(eU.attach),target:"_blank",download:"attachment.".concat(eU.attach.split(".").pop()),rel:"referrer",children:"Attached File"}),(0,n.jsx)(y.Z,{type:"button",variant:"contained",size:"large",startIcon:(0,n.jsx)(B.Z,{icon:"mdi:close"}),onClick:()=>eJ(!1),children:"Close"})]})})]}),(0,n.jsxs)(W.Z,{fullWidth:!0,maxWidth:"sm",onClose:()=>ei(!1),open:en,children:[(0,n.jsxs)(S.Z,{children:["View Note",(0,n.jsx)(j.Z,{onClick:()=>ei(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,n.jsx)(B.Z,{icon:"mdi:close"})})]}),(0,n.jsxs)(D.Z,{sx:{px:6},children:[(0,n.jsx)(C.Z,{fullWidth:!0,sx:{my:2},children:(0,n.jsx)(f.Z,{multiline:!0,readOnly:!0,rows:4,value:eU.note,label:"Note"})}),(0,n.jsx)(M.Z,{desnse:!0,children:eU.attaches&&eU.attaches.length&&eU.attaches.map((e,a)=>(0,n.jsx)(Z.Z,{sx:{mb:1},onClick:()=>ah(e),children:(0,n.jsxs)(Y.Z,{download:!0,target:"_blank",children:[(0,n.jsx)("img",{src:"/images/download.svg",alt:"download",width:"20",style:{marginRight:5,heightHeight:1,verticalAlign:"middle"}}),(0,n.jsx)("span",{style:{verticalAlign:"middle"},children:e.file})]})},a))})]}),(0,n.jsx)(T.Z,{sx:{justifyContent:"flex-end"},children:(0,n.jsxs)(y.Z,{variant:"contained",color:"error",onClick:()=>ei(!1),children:[(0,n.jsx)(B.Z,{icon:"mdi:close"})," Close"]})})]})]})},eS=()=>{let{user:e}=(0,O.a)(),[a,t]=(0,i.useState)([]),[x,f]=(0,i.useState)("1");(0,i.useEffect)(()=>{let e=async()=>{let{data:e}=await b.Z.get("crms/staffs",{params:{search:!0}});t(e)};e()},[]);let j=(e,a)=>{f(a)};return(0,n.jsx)(r.ZP,{container:!0,spacing:6,children:(0,n.jsx)(r.ZP,{item:!0,xs:12,children:(0,n.jsxs)(s.Z,{children:[(0,n.jsx)(l.Z,{title:(0,n.jsxs)(o.Z,{variant:"h5",children:["Application Management","agent"===e.role&&(0,n.jsx)(d.Z,{sx:{float:"right"},children:(0,n.jsxs)(o.Z,{variant:"h6",children:["Credit: $",e.balance]})})]})}),(0,n.jsx)(m.Z,{children:"agent"!==e.role?(0,n.jsxs)(p.ZP,{value:x,children:[(0,n.jsxs)(h.Z,{variant:"fullWidth",onChange:j,children:[(0,n.jsx)(c.Z,{value:"1",label:"Applications by global user"}),(0,n.jsx)(c.Z,{value:"2",label:"Applications by agent"})]}),(0,n.jsx)(u.Z,{value:"1",children:(0,n.jsx)(er,{staffs:a})}),(0,n.jsx)(u.Z,{value:"2",children:(0,n.jsx)(eW,{staffs:a})})]}):(0,n.jsx)(eW,{staff:a})})]})})})};eS.getLayout=e=>(0,n.jsx)(x.Z,{children:e});var eD=eS},33504:function(e){"use strict";e.exports=JSON.parse('[{"name":"Afghanistan","abbreviation":"AF"},{"name":"Albania","abbreviation":"AL"},{"name":"Algeria","abbreviation":"DZ"},{"name":"American Samoa","abbreviation":"AS"},{"name":"Andorra","abbreviation":"AD"},{"name":"Angola","abbreviation":"AO"},{"name":"Anguilla","abbreviation":"AI"},{"name":"Antarctica","abbreviation":"AQ"},{"name":"Antigua and Barbuda","abbreviation":"AG"},{"name":"Argentina","abbreviation":"AR"},{"name":"Armenia","abbreviation":"AM"},{"name":"Aruba","abbreviation":"AW"},{"name":"Australia","abbreviation":"AU"},{"name":"Austria","abbreviation":"AT"},{"name":"Azerbaijan","abbreviation":"AZ"},{"name":"Bahamas","abbreviation":"BS"},{"name":"Bahrain","abbreviation":"BH"},{"name":"Bangladesh","abbreviation":"BD"},{"name":"Barbados","abbreviation":"BB"},{"name":"Belarus","abbreviation":"BY"},{"name":"Belgium","abbreviation":"BE"},{"name":"Belize","abbreviation":"BZ"},{"name":"Benin","abbreviation":"BJ"},{"name":"Bermuda","abbreviation":"BM"},{"name":"Bhutan","abbreviation":"BT"},{"name":"Bolivia","abbreviation":"BO"},{"name":"Bosnia and Herzegovina","abbreviation":"BA"},{"name":"Botswana","abbreviation":"BW"},{"name":"Bouvet Island","abbreviation":"BV"},{"name":"Brazil","abbreviation":"BR"},{"name":"British Indian Ocean Territory","abbreviation":"IO"},{"name":"Brunei","abbreviation":"BN"},{"name":"Bulgaria","abbreviation":"BG"},{"name":"Burkina Faso","abbreviation":"BF"},{"name":"Burundi","abbreviation":"BI"},{"name":"Cambodia","abbreviation":"KH"},{"name":"Cameroon","abbreviation":"CM"},{"name":"Canada","abbreviation":"CA"},{"name":"Cape Verde","abbreviation":"CV"},{"name":"Cayman Islands","abbreviation":"KY"},{"name":"Central African Republic","abbreviation":"CF"},{"name":"Chad","abbreviation":"TD"},{"name":"Chile","abbreviation":"CL"},{"name":"China","abbreviation":"CN"},{"name":"Christmas Island","abbreviation":"CX"},{"name":"Cocos (Keeling) Islands","abbreviation":"CC"},{"name":"Colombia","abbreviation":"CO"},{"name":"Comoros","abbreviation":"KM"},{"name":"Congo","abbreviation":"CG"},{"name":"Cook Islands","abbreviation":"CK"},{"name":"Costa Rica","abbreviation":"CR"},{"name":"Croatia","abbreviation":"HR"},{"name":"Cuba","abbreviation":"CU"},{"name":"Cyprus","abbreviation":"CY"},{"name":"Czech Republic","abbreviation":"CZ"},{"name":"Denmark","abbreviation":"DK"},{"name":"Djibouti","abbreviation":"DJ"},{"name":"Dominica","abbreviation":"DM"},{"name":"Dominican Republic","abbreviation":"DO"},{"name":"East Timor","abbreviation":"TP"},{"name":"Ecuador","abbreviation":"EC"},{"name":"Egypt","abbreviation":"EG"},{"name":"El Salvador","abbreviation":"SV"},{"name":"Equatorial Guinea","abbreviation":"GQ"},{"name":"Eritrea","abbreviation":"ER"},{"name":"Estonia","abbreviation":"EE"},{"name":"Ethiopia","abbreviation":"ET"},{"name":"Falkland Islands","abbreviation":"FK"},{"name":"Faroe Islands","abbreviation":"FO"},{"name":"Fiji Islands","abbreviation":"FJ"},{"name":"Finland","abbreviation":"FI"},{"name":"France","abbreviation":"FR"},{"name":"French Guiana","abbreviation":"GF"},{"name":"French Polynesia","abbreviation":"PF"},{"name":"French Southern territories","abbreviation":"TF"},{"name":"Gabon","abbreviation":"GA"},{"name":"Gambia","abbreviation":"GM"},{"name":"Georgia","abbreviation":"GE"},{"name":"Germany","abbreviation":"DE"},{"name":"Ghana","abbreviation":"GH"},{"name":"Gibraltar","abbreviation":"GI"},{"name":"Greece","abbreviation":"GR"},{"name":"Greenland","abbreviation":"GL"},{"name":"Grenada","abbreviation":"GD"},{"name":"Guadeloupe","abbreviation":"GP"},{"name":"Guam","abbreviation":"GU"},{"name":"Guatemala","abbreviation":"GT"},{"name":"Guernsey","abbreviation":"GG"},{"name":"Guinea","abbreviation":"GN"},{"name":"Guinea-Bissau","abbreviation":"GW"},{"name":"Guyana","abbreviation":"GY"},{"name":"Haiti","abbreviation":"HT"},{"name":"Heard Island and McDonald Islands","abbreviation":"HM"},{"name":"Holy See (Vatican City State)","abbreviation":"VA"},{"name":"Honduras","abbreviation":"HN"},{"name":"Hong Kong","abbreviation":"HK"},{"name":"Hungary","abbreviation":"HU"},{"name":"Iceland","abbreviation":"IS"},{"name":"India","abbreviation":"IN"},{"name":"Indonesia","abbreviation":"ID"},{"name":"Iran","abbreviation":"IR"},{"name":"Iraq","abbreviation":"IQ"},{"name":"Ireland","abbreviation":"IE"},{"name":"Isle of Man","abbreviation":"IM"},{"name":"Israel","abbreviation":"IL"},{"name":"Italy","abbreviation":"IT"},{"name":"Ivory Coast","abbreviation":"CI"},{"name":"Jamaica","abbreviation":"JM"},{"name":"Japan","abbreviation":"JP"},{"name":"Jersey","abbreviation":"JE"},{"name":"Jordan","abbreviation":"JO"},{"name":"Kazakhstan","abbreviation":"KZ"},{"name":"Kenya","abbreviation":"KE"},{"name":"Kiribati","abbreviation":"KI"},{"name":"Kuwait","abbreviation":"KW"},{"name":"Kyrgyzstan","abbreviation":"KG"},{"name":"Laos","abbreviation":"LA"},{"name":"Latvia","abbreviation":"LV"},{"name":"Lebanon","abbreviation":"LB"},{"name":"Lesotho","abbreviation":"LS"},{"name":"Liberia","abbreviation":"LR"},{"name":"Libyan Arab Jamahiriya","abbreviation":"LY"},{"name":"Liechtenstein","abbreviation":"LI"},{"name":"Lithuania","abbreviation":"LT"},{"name":"Luxembourg","abbreviation":"LU"},{"name":"Macao","abbreviation":"MO"},{"name":"North Macedonia","abbreviation":"MK"},{"name":"Madagascar","abbreviation":"MG"},{"name":"Malawi","abbreviation":"MW"},{"name":"Malaysia","abbreviation":"MY"},{"name":"Maldives","abbreviation":"MV"},{"name":"Mali","abbreviation":"ML"},{"name":"Malta","abbreviation":"MT"},{"name":"Marshall Islands","abbreviation":"MH"},{"name":"Martinique","abbreviation":"MQ"},{"name":"Mauritania","abbreviation":"MR"},{"name":"Mauritius","abbreviation":"MU"},{"name":"Mayotte","abbreviation":"YT"},{"name":"Mexico","abbreviation":"MX"},{"name":"Micronesia, Federated States of","abbreviation":"FM"},{"name":"Moldova","abbreviation":"MD"},{"name":"Monaco","abbreviation":"MC"},{"name":"Mongolia","abbreviation":"MN"},{"name":"Montenegro","abbreviation":"ME"},{"name":"Montserrat","abbreviation":"MS"},{"name":"Morocco","abbreviation":"MA"},{"name":"Mozambique","abbreviation":"MZ"},{"name":"Myanmar","abbreviation":"MM"},{"name":"Namibia","abbreviation":"NA"},{"name":"Nauru","abbreviation":"NR"},{"name":"Nepal","abbreviation":"NP"},{"name":"Netherlands","abbreviation":"NL"},{"name":"Netherlands Antilles","abbreviation":"AN"},{"name":"New Caledonia","abbreviation":"NC"},{"name":"New Zealand","abbreviation":"NZ"},{"name":"Nicaragua","abbreviation":"NI"},{"name":"Niger","abbreviation":"NE"},{"name":"Nigeria","abbreviation":"NG"},{"name":"Niue","abbreviation":"NU"},{"name":"Norfolk Island","abbreviation":"NF"},{"name":"North Korea","abbreviation":"KP"},{"name":"Northern Ireland","abbreviation":"GB"},{"name":"Northern Mariana Islands","abbreviation":"MP"},{"name":"Norway","abbreviation":"NO"},{"name":"Oman","abbreviation":"OM"},{"name":"Pakistan","abbreviation":"PK"},{"name":"Palau","abbreviation":"PW"},{"name":"Palestine","abbreviation":"PS"},{"name":"Panama","abbreviation":"PA"},{"name":"Papua New Guinea","abbreviation":"PG"},{"name":"Paraguay","abbreviation":"PY"},{"name":"Peru","abbreviation":"PE"},{"name":"Philippines","abbreviation":"PH"},{"name":"Pitcairn","abbreviation":"PN"},{"name":"Poland","abbreviation":"PL"},{"name":"Portugal","abbreviation":"PT"},{"name":"Puerto Rico","abbreviation":"PR"},{"name":"Qatar","abbreviation":"QA"},{"name":"Reunion","abbreviation":"RE"},{"name":"Romania","abbreviation":"RO"},{"name":"Russian Federation","abbreviation":"RU"},{"name":"Rwanda","abbreviation":"RW"},{"name":"Saint Helena","abbreviation":"SH"},{"name":"Saint Kitts and Nevis","abbreviation":"KN"},{"name":"Saint Lucia","abbreviation":"LC"},{"name":"Saint Pierre and Miquelon","abbreviation":"PM"},{"name":"Saint Vincent and the Grenadines","abbreviation":"VC"},{"name":"Samoa","abbreviation":"WS"},{"name":"San Marino","abbreviation":"SM"},{"name":"Sao Tome and Principe","abbreviation":"ST"},{"name":"Saudi Arabia","abbreviation":"SA"},{"name":"Senegal","abbreviation":"SN"},{"name":"Serbia","abbreviation":"RS"},{"name":"Seychelles","abbreviation":"SC"},{"name":"Sierra Leone","abbreviation":"SL"},{"name":"Singapore","abbreviation":"SG"},{"name":"Slovakia","abbreviation":"SK"},{"name":"Slovenia","abbreviation":"SI"},{"name":"Solomon Islands","abbreviation":"SB"},{"name":"Somalia","abbreviation":"SO"},{"name":"South Africa","abbreviation":"ZA"},{"name":"South Georgia and the South Sandwich Islands","abbreviation":"GS"},{"name":"South Korea","abbreviation":"KR"},{"name":"South Sudan","abbreviation":"SS"},{"name":"Spain","abbreviation":"ES"},{"name":"Sri Lanka","abbreviation":"LK"},{"name":"Sudan","abbreviation":"SD"},{"name":"Suriname","abbreviation":"SR"},{"name":"Svalbard and Jan Mayen","abbreviation":"SJ"},{"name":"Swaziland","abbreviation":"SZ"},{"name":"Sweden","abbreviation":"SE"},{"name":"Switzerland","abbreviation":"CH"},{"name":"Syria","abbreviation":"SY"},{"name":"Tajikistan","abbreviation":"TJ"},{"name":"Tanzania","abbreviation":"TZ"},{"name":"Thailand","abbreviation":"TH"},{"name":"The Democratic Republic of Congo","abbreviation":"CD"},{"name":"Timor-Leste","abbreviation":"TL"},{"name":"Togo","abbreviation":"TG"},{"name":"Tokelau","abbreviation":"TK"},{"name":"Tonga","abbreviation":"TO"},{"name":"Trinidad and Tobago","abbreviation":"TT"},{"name":"Tunisia","abbreviation":"TN"},{"name":"Turkey","abbreviation":"TR"},{"name":"Turkmenistan","abbreviation":"TM"},{"name":"Turks and Caicos Islands","abbreviation":"TC"},{"name":"Tuvalu","abbreviation":"TV"},{"name":"Uganda","abbreviation":"UG"},{"name":"Ukraine","abbreviation":"UA"},{"name":"United Arab Emirates","abbreviation":"AE"},{"name":"United Kingdom","abbreviation":"UK"},{"name":"United States","abbreviation":"US"},{"name":"United States Minor Outlying Islands","abbreviation":"UM"},{"name":"Uruguay","abbreviation":"UY"},{"name":"Uzbekistan","abbreviation":"UZ"},{"name":"Vanuatu","abbreviation":"VU"},{"name":"Venezuela","abbreviation":"VE"},{"name":"Vietnam","abbreviation":"VN"},{"name":"Virgin Islands, British","abbreviation":"VG"},{"name":"Virgin Islands, U.S.","abbreviation":"VI"},{"name":"Wallis and Futuna","abbreviation":"WF"},{"name":"Western Sahara","abbreviation":"EH"},{"name":"Yemen","abbreviation":"YE"},{"name":"Zambia","abbreviation":"ZM"},{"name":"Zimbabwe","abbreviation":"ZW"}]')}},function(e){e.O(0,[4885,6284,9799,4583,8515,3344,7836,9072,9491,9317,7985,8960,7974,3907,4181,4314,6437,9774,2888,179],function(){return e(e.s=80198)}),_N_E=e.O()}]);