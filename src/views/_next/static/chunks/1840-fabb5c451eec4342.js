"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1840],{21840:function(e,s,r){var n=r(85893),i=r(67294),t=r(80562),a=r(73812),l=r(31538),o=r(29630),c=r(79072),d=r(49837),x=r(59742),u=r(61953),m=r(75084),h=r(91359),Z=r(1890),j=r(77745),p=r(95398),g=r(55343),f=r(67836),y=r(32631),C=r(94314),v=r(5464),S=r(21609),b=r(98966),k=r(74231),w=r(47533),z=r(87536),P=r(86501);let I=e=>{let{row:s,editVisa:r,deleteVisa:o}=e,[c,d]=(0,i.useState)(null),x=Boolean(c),u=e=>{d(e.currentTarget)},m=()=>{d(null)},h=()=>{r(s),m()},Z=()=>{o(s._id),m()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.Z,{size:"small",onClick:u,children:(0,n.jsx)(S.Z,{icon:"mdi:dots-vertical"})}),(0,n.jsxs)(a.Z,{keepMounted:!0,anchorEl:c,open:x,onClose:m,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{minWidth:"8rem"}},children:[(0,n.jsxs)(l.Z,{onClick:h,sx:{"& svg":{mr:2}},children:[(0,n.jsx)(S.Z,{icon:"mdi:pencil-outline",fontSize:20}),"Edit"]}),(0,n.jsxs)(l.Z,{onClick:Z,sx:{"& svg":{mr:2}},children:[(0,n.jsx)(S.Z,{icon:"mdi:delete-outline",fontSize:20}),"Delete"]})]})]})},W=()=>{let[e,s]=(0,i.useState)("0"),[r,a]=(0,i.useState)([]),[l,C]=(0,i.useState)(!1),[W,D]=(0,i.useState)(10),[_,T]=(0,i.useState)(!1),[E,N]=(0,i.useState)(!1),[B,R]=(0,i.useState)(0),q={},A=k.Ry().shape({duration:k.Z_().required("Name is required field.")}),{reset:H,control:M,handleSubmit:O,formState:{errors:Q}}=(0,z.cI)({defaultValues:q,mode:"onChange",resolver:(0,w.X)(A)}),{reset:V,control:X,handleSubmit:F,formState:{errors:G}}=(0,z.cI)({defaultValues:q,mode:"onChange",resolver:(0,w.X)(A)});(0,i.useEffect)(()=>{let e=async()=>{let{data:e}=await v.Z.get("crms/visa-durations");console.log("data :>> ",e),a(e)};e()},[l,W]);let L=e=>{R(e._id),console.log("row :>> ",e),V({duration:e.duration}),N(!0)},U=async e=>{let{data:s}=await v.Z.post("crms/visa-durations",e);console.log("visa :>> ",e),s.status?(H(q),T(!1),C(!l),P.ZP.success(s.msg)):P.ZP.error(s.msg)},J=async e=>{let{data:s}=await v.Z.put("crms/visa-durations/".concat(B),e);s.status?(V(q),N(!1),C(!l),P.ZP.success(s.msg)):P.ZP.error(s.msg)},K=async e=>{let{data:s}=await v.Z.delete("crms/visa-durations/".concat(e));s.status?(C(!l),P.ZP.success(s.msg)):P.ZP.error(s.msg)};return(0,n.jsxs)(c.ZP,{container:!0,spacing:6,children:[(0,n.jsx)(c.ZP,{item:!0,md:12,sm:12,children:(0,n.jsxs)(d.Z,{children:[(0,n.jsx)(x.Z,{title:(0,n.jsxs)(u.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(o.Z,{variant:"h5",children:"Duration Types"}),(0,n.jsx)(u.Z,{sx:{pl:0,pr:0,pt:0,pb:0,display:"flex",flex:1,flexWrap:"wrap",alignItems:"center",justifyContent:"flex-end"},children:(0,n.jsx)(u.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center"},children:(0,n.jsxs)(m.Z,{sx:{mb:2},onClick:()=>T(!0),variant:"contained",children:[(0,n.jsx)(S.Z,{icon:"mdi:plus"})," Add Duration"]})})})]})}),(0,n.jsx)(h.Z,{children:(0,n.jsx)(b._,{autoHeight:!0,getRowId:e=>e._id,rows:r,columns:[{flex:2,field:"duration",headerName:"Duration Type",renderCell(e){let{row:s}=e;return(0,n.jsx)(o.Z,{noWrap:!0,children:s.duration})}},{flex:.5,field:"actions",headerName:"Actions",renderCell(e){let{row:s}=e;return(0,n.jsx)(I,{row:s,editVisa:L,deleteVisa:K})}}],pageSize:W,sx:{"& .MuiDataGrid-columnHeaders":{borderRadius:0}},onPageSizeChange:e=>D(e)})})]})}),(0,n.jsxs)(Z.Z,{fullWidth:!0,maxWidth:"sm",onClose:()=>T(!1),open:_,children:[(0,n.jsxs)(j.Z,{children:["New Duration Type",(0,n.jsx)(t.Z,{onClick:()=>T(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,n.jsx)(S.Z,{icon:"mdi:close"})})]}),(0,n.jsx)(p.Z,{sx:{p:6},children:(0,n.jsxs)("form",{onSubmit:O(U),style:{paddingTop:8},children:[(0,n.jsxs)(g.Z,{fullWidth:!0,sx:{mb:6},children:[(0,n.jsx)(z.Qr,{name:"duration",control:M,render(e){let{field:{value:s,onChange:r}}=e;return(0,n.jsx)(f.Z,{value:s,label:"Duration",onChange:r,error:Boolean(Q.name)})}}),Q.name&&(0,n.jsx)(y.Z,{sx:{color:"error.main"},children:Q.name.message})]}),(0,n.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,n.jsx)(m.Z,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:(0,n.jsx)(S.Z,{icon:"mdi:content-save"}),sx:{mr:4},children:"Save"}),(0,n.jsx)(m.Z,{variant:"contained",color:"error",size:"large",startIcon:(0,n.jsx)(S.Z,{icon:"mdi:delete"}),onClick:()=>T(!1),children:"Cancel"})]})]})})]}),(0,n.jsxs)(Z.Z,{fullWidth:!0,maxWidth:"sm",onClose:()=>N(!1),open:E,children:[(0,n.jsxs)(j.Z,{children:["Edit Duration Type",(0,n.jsx)(t.Z,{onClick:()=>N(!1),sx:{position:"absolute",right:18,top:18,color:"#aaaaaa"},children:(0,n.jsx)(S.Z,{icon:"mdi:close"})})]}),(0,n.jsx)(p.Z,{sx:{p:6},children:(0,n.jsxs)("form",{onSubmit:F(J),style:{paddingTop:8},children:[(0,n.jsxs)(g.Z,{fullWidth:!0,sx:{mb:6},children:[(0,n.jsx)(z.Qr,{name:"duration",control:X,render(e){let{field:{value:s,onChange:r}}=e;return(0,n.jsx)(f.Z,{value:s,label:"Duration",onChange:r,error:Boolean(G.name)})}}),G.name&&(0,n.jsx)(y.Z,{sx:{color:"error.main"},children:G.name.message})]}),(0,n.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,n.jsx)(m.Z,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:(0,n.jsx)(S.Z,{icon:"mdi:content-save"}),sx:{mr:4},children:"Update"}),(0,n.jsx)(m.Z,{variant:"contained",color:"error",size:"large",startIcon:(0,n.jsx)(S.Z,{icon:"mdi:delete"}),onClick:()=>N(!1),children:"Cancel"})]})]})})]})]})};W.getLayout=e=>(0,n.jsx)(C.Z,{children:e}),s.Z=W}}]);